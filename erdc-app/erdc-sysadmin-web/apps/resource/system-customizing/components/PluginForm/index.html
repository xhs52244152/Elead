<div id="project-form">
    <div class="mb-12 ptb-8 pl-12 bg-normal text-sm">{{i18nMappingObj.noteUnique}}</div>
    <FamDynamicForm
        ref="dynamicForm"
        :form="formData"
        :data="dataConfig"
    >
        <template #nameslot="scope">
            <div class="flex grow-1 justify-betwwen align-items-center">
                <div class="mr-8 w-100 text-right">{{erdcloud}}</div>
                <erd-input
                    v-model="scope.data[scope.formConfig.field]"
                    :placeholder="i18nMappingObj.projectNamePlaceholder"
                ></erd-input>
                <div
                    class="ml-8 w-100"
                    v-if="!isServieEnginerring"
                >
                    {{plugin}}
                </div>
            </div>
        </template>
        <template #type-information="scope">
            <div class="w-100p">
                <div class="flex justify-between mb-12 align-items-center text-lg text-gray-85 font-bold">
                    <div>{{i18nMappingObj.typeInformation}}</div>
                    <div class="flex">
                        <erd-button @click="onAdd">{{i18nMappingObj.add}}</erd-button>
                    </div>
                </div>
                <fam-erd-table
                    border
                    :column-config="{resizable: true}"
                    align="left"
                    :data="tableData"
                    :column="column"
                    :max-line="5"
                    ref="erdTable"
                >
                    <template #column:default:interfaceList="{data}">
                        <div v-for="item in data.row[data.column.property]">{{item}}</div>
                    </template>
                    <template #column:default:tenantPolicy="{data}">
                        <span>{{tenantPolicy(data.row[data.column.property])}}</span>
                    </template>
                    <template #column:default:operation="{data}">
                        <erd-dropdown
                            popper-class="vxe-table--ignore-clear"
                            trigger="click"
                            @visible-change="(show) => visibleChange(show, data.row)"
                            @command="(name) => onCommand(name, data)"
                        >
                            <erd-button
                                class="erd-dropdown-link"
                                type="text"
                            >
                                <span>{{i18nMappingObj.operation}}</span>
                                <i
                                    class="erd-iconfont erd-icon-arrow-up"
                                    v-if="data.row.visible"
                                ></i>
                                <i
                                    class="erd-iconfont erd-icon-arrow-down"
                                    v-else
                                ></i>
                            </erd-button>
                            <erd-dropdown-menu slot="dropdown">
                                <erd-show-tooltip
                                    v-for="(item, i) in buttons.children"
                                    :key="item.key || i"
                                    placement="top"
                                    :content="item.displayName"
                                    :enterable="false"
                                    :flex="false"
                                    padding-width="32"
                                >
                                    <template v-slot:show-tooltip-title>
                                        <erd-dropdown-item
                                            :command="item.name"
                                            class="ellipsis"
                                        >
                                            <span class="title_text">{{item.displayName}}</span>
                                        </erd-dropdown-item>
                                    </template>
                                </erd-show-tooltip>
                            </erd-dropdown-menu>
                        </erd-dropdown>
                    </template>
                </fam-erd-table>
            </div>
        </template>
    </FamDynamicForm>

    <erd-ex-dialog
        :title="i18nMappingObj.addClass"
        :visible.sync="addClassVisible"
        size="large"
    >
        <AddClassForm
            ref="addClassForm"
            v-if="addClassVisible"
            :type="type"
            :service="service"
            :model-data="modelData"
        ></AddClassForm>
        <template
            #footer
            class="dialog-footer"
        >
            <erd-button
                type="primary"
                @click="onAddClass"
            >
                {{i18nMappingObj.Confirm}}
            </erd-button>
            <erd-button @click="addClassVisible = !addClassVisible">{{i18nMappingObj.Cancel}}</erd-button>
        </template>
    </erd-ex-dialog>
</div>
