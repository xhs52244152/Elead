<div
    id="PropertyDefineTree"
    ref="PropertyDefineTree"
    :lan="lan"
    class="flex-1"
>
    <div class="attrDefine flex flex-column h-100p">
        <div
            class="tree-header"
            ref="header"
        >
            <div class="tree-title">{{i18nMappingObj.featureDef}}</div>
            <div class="search flex align-items-center">
                <erd-input
                    @input="search"
                    v-model="searchValue"
                    :placeholder="i18nMappingObj.searchKeyword"
                    suffix-icon="erd-iconfont erd-icon-search"
                    clearable
                    class="mr-8"
                >
                </erd-input>
                <erd-tooltip
                    :content="i18n.import"
                    placement="top"
                >
                    <erd-button
                        type="fill-icon"
                        icon="erd-iconfont erd-icon-import"
                        @click="onImport"
                    ></erd-button>
                </erd-tooltip>
                <erd-tooltip
                    :content="i18n.export"
                    placement="top"
                >
                    <erd-button
                        type="fill-icon"
                        icon="erd-iconfont erd-icon-export"
                        @click="onExport"
                    ></erd-button>
                </erd-tooltip>
            </div>
        </div>
        <erd-scrollbar
            class="flex-1"
            style="min-height: 0"
            wrap-style="overflow: hidden auto;"
        >
            <erd-ex-tree
                :data="treeData"
                :props="defaultProps"
                class="tree-list"
                @node-click="onCheck"
                :filter-node-method="filterSearch"
                :expand-on-click-node="false"
                :highlight-current="true"
                node-key="key"
                :default-expanded-keys="defaultExpandedKeys"
                :default-checked-keys="defaultCheckedKeys"
                ref="tree"
            >
                <template v-slot="scope">
                    <div
                        class="tree-content"
                        @mouseenter="mouseenter(scope)"
                        @mouseleave="mouseleave(scope)"
                    >
                        <div class="tree-text">{{scope.node.label}}</div>
                        <div
                            class="tree-operation"
                            v-show="scope.data.show"
                            @click.stop
                        >
                            <erd-button
                                type="icon"
                                icon="erd-iconfont erd-icon-add-document fontSize18"
                                v-if="scope.node.level == 1"
                                size="mini"
                                class="drag"
                                @click="onCreate"
                            >
                            </erd-button>
                        </div>
                    </div>
                </template>
            </erd-ex-tree>
        </erd-scrollbar>
    </div>
    <basic-infor-config
        v-if="basicInforConfigVisible"
        :visible.sync="basicInforConfigVisible"
        :title="i18nMappingObj.attrdef"
        @onsubmit="onSubmit"
    >
    </basic-infor-config>
    <!-- 导入 -->
    <FamImport
        v-if="importVisible"
        :visible.sync="importVisible"
        :request-config="importRequestConfig"
        businessName="PropertyDefinitionImport"
        @submit-success-callback="importSuccess"
    ></FamImport>
    <!-- 导出 -->
    <fam-export
        v-if="exportVisible"
        :visible.sync="exportVisible"
        :request-config="exportRequestConfig"
        businessName="PropertyDefinitionExport"
    ></fam-export>
</div>
