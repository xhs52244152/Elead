(function(e){function t(t){for(var n,c,a=t[0],s=t[1],l=t[2],m=0,u=[];m<a.length;m++)c=a[m],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&u.push(i[c][0]),i[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);d&&d(t);while(u.length)u.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,a=1;a<o.length;a++){var s=o[a];0!==i[s]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=o[0]))}return e}var n={},i={app:0},r=[];function c(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=e,c.c=n,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(o,n,function(t){return e[t]}.bind(null,n));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=s;r.push([0,"gmodules"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"020b":function(e,t,o){"use strict";o("b709")},"0410":function(e,t,o){e.exports=o.p+"img/ico-voice-message-white.3973a210.png"},"04b3":function(e,t,o){e.exports=o.p+"img/close.0fb8dc6e.png"},"04f4":function(e,t,o){"use strict";o("4007")},"08e0":function(e,t,o){},"0b7b":function(e,t,o){},"0d85":function(e,t,o){e.exports=o.p+"img/pic-default.1390d7c7.png"},"0e31":function(e,t,o){e.exports=o.p+"img/ico-voice-message-play.1c474ffb.gif"},"10d2":function(e,t,o){"use strict";o("bfc2")},"239b":function(e,t,o){},"25a4":function(e,t,o){e.exports=o.p+"img/radio-nocheck.07a1bc71.png"},"2a32":function(e,t,o){},"2ea3":function(e,t,o){"use strict";o("0b7b")},"36e8":function(e,t,o){"use strict";o("9495")},"382f":function(e,t,o){e.exports=o.p+"img/nomsg-zh.01650d46.png"},"39d9":function(e,t,o){"use strict";o("ab28")},4007:function(e,t,o){},"42a6":function(e,t,o){"use strict";o("08e0")},"48be":function(e,t,o){"use strict";o("b68c")},"48c0":function(e,t,o){"use strict";o("9957")},"4dcb":function(e,t,o){},"4ee2":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);var n=o("8bbf");const i=e=>(Object(n["pushScopeId"])("data-v-6cf0b7d5"),e=e(),Object(n["popScopeId"])(),e),r=i(()=>Object(n["createElementVNode"])("div",{class:"ndp2-wrap",id:"viewer"},null,-1)),c=[r],a={class:"nd_sync_cover"};function s(e,t,o,i,r,s){const l=Object(n["resolveComponent"])("tips"),d=Object(n["resolveComponent"])("loading"),m=Object(n["resolveComponent"])("bottom-btn"),u=Object(n["resolveComponent"])("config-switch"),h=Object(n["resolveComponent"])("structure-tree"),g=Object(n["resolveComponent"])("tag-com"),p=Object(n["resolveComponent"])("unit-change"),v=Object(n["resolveComponent"])("coor-cover");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{id:"vueMain",class:Object(n["normalizeClass"])(["ndp2-wrap noselect",{"tag-drawing":i.store.state.tagStore.tagDrawing,showhide:i.store.state.modelStore.showhide}]),ondragstart:"return false"},[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["ndp2-preview-box",{zh:"en"!=e.language}])},c,2),Object(n["createVNode"])(l),Object(n["createVNode"])(d),Object(n["withDirectives"])(Object(n["createVNode"])(m,null,null,512),[[n["vShow"],!i.store.state.printMode]]),Object(n["withDirectives"])(Object(n["createVNode"])(u,null,null,512),[[n["vShow"],i.store.state.menuStore.showManyConfig]]),Object(n["withDirectives"])(Object(n["createVNode"])(h,null,null,512),[[n["vShow"],i.store.state.menuStore.structMenu]]),Object(n["createVNode"])(g),Object(n["withDirectives"])(Object(n["createVNode"])(p,null,null,512),[[n["vShow"],i.store.state.menuStore.unitMenu]]),Object(n["withDirectives"])(Object(n["createVNode"])(v,null,null,512),[[n["vShow"],"coordinate"==i.store.state.menuStore.menuChoose2]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",a,null,512),[[n["vShow"],i.store.state.rtmNeedCover]])],2)}o("4ee2"),o("88ae"),o("4dcb"),o("b8c8");var l=o("5880");o("4e3f"),o("9f26"),o("08ed"),o("8249"),o("7b23"),o("3f71");function d(){var e=[],t=nd_viewCtrl.allTags?nd_viewCtrl.allTags:[];if(t)for(let r=0;r<t.length;r++)try{var o=t[r];if(o&&o.content){var n=JSON.parse(o.content);o.imgURL&&(n.imgURL=o.imgURL),"ImageAnno"==n.state.type&&(n.state.type="",n.state.origiType="ImageAnno"),e.push(n)}else o.cx&&o.cy&&e.push(o)}catch(i){}return e}function m(){var e=v(),t=ce.state.modelStore.isModelCfg,o=d(),n={isModelCfg:t,configNum:e.configNum,shareInfo:e,viewSetting:u(),bgSetList:nd_viewCtrl.bgSetList,allTag:o};return n}function u(){var e={bgColor:0,showShadow:!1,bgImg:"",inAssemblyContext:!1,pmiVisible:!1,loadbrepDefault:!1,testMode:!1,language:"zh",from:"pc"};return e.disratio=nd_viewCtrl&&nd_viewCtrl.disratio||void 0,e.bgColor=nd_viewCtrl&&nd_viewCtrl.bgColor||0,e.bgColor=L(e.bgColor),e.bgImg=nd_viewCtrl&&nd_viewCtrl.bgImg||"",e.showShadow=nd_viewCtrl&&nd_viewCtrl.showShadow||!1,e.waterString=nd_viewCtrl&&nd_viewCtrl.waterString||"",e.defaultStandardView=nd_viewCtrl&&nd_viewCtrl.defaultStandardView||null,e.pmiVisible=nd_viewCtrl&&nd_viewCtrl.pmiVisible||!1,e.testMode=nd_viewCtrl&&nd_viewCtrl.testMode||!1,e.loadbrepDefault=nd_viewCtrl&&nd_viewCtrl.loadbrepDefault||!1,e}function h(){var e=ce.state.modelStore.isModelCfg,t=ce.state.modelStore.activConfig,o=-1;e&&-1==o&&(o=0),-1!=t&&(o=t);var n=nd_viewCtrl&&nd_viewCtrl.shareInfo&&nd_viewCtrl.shareInfo.camerainfo,i=n?o:-2;if(void 0!=nd_viewCtrl.configNum&&null!=nd_viewCtrl.configNum&&""!==nd_viewCtrl.configNum){var r=Number(nd_viewCtrl.configNum);r>=0&&(o=r)}if(nd_viewCtrl.shareInfo&&void 0!=nd_viewCtrl.shareInfo.configNum&&null!=nd_viewCtrl.shareInfo.configNum&&""!==nd_viewCtrl.shareInfo.configNum){r=Number(nd_viewCtrl.shareInfo.configNum);r>=0&&(o=r,i=r)}return ce.commit("modelStore/setShareConfig",i),o}function g(){var e="";nd_viewCtrl&&nd_viewCtrl.shareInfo&&nd_viewCtrl.shareInfo.unitType&&nd_viewCtrl.shareInfo.unitType.length>0?(e=nd_viewCtrl.shareInfo.unitType,ce.commit("modelStore/setUnitType",e)):nd_viewCtrl&&nd_viewCtrl.unitType&&(e=nd_viewCtrl.unitType),ce.commit("modelStore/setUnitType",e);var t=[];return nd_viewCtrl&&nd_viewCtrl.shareInfo&&nd_viewCtrl.shareInfo.scale&&nd_viewCtrl.shareInfo.scale.length>0?t=nd_viewCtrl.shareInfo.scale:nd_viewCtrl.measuringScale&&nd_viewCtrl.measuringScale.length>0&&(t=nd_viewCtrl.measuringScale),ce.commit("modelStore/setInitMeasureScale",t),t}function p(){var e=[];if(nd_viewCtrl&&nd_viewCtrl.shareInfo&&nd_viewCtrl.shareInfo.bgSetList&&nd_viewCtrl.shareInfo.bgSetList.length>0)e=nd_viewCtrl.shareInfo.bgSetList;else if(nd_viewCtrl&&nd_viewCtrl.bgSetList&&nd_viewCtrl.bgSetList.length>0)e=nd_viewCtrl.bgSetList;else if(nd_viewCtrl&&nd_viewCtrl.bgColor){var t="num:"+String(L(nd_viewCtrl.bgColor));const n=ce.state.modelStore.bgSetList;for(var o=0;o<n.length;o++)e.push(t)}return e.length>0&&ce.commit("modelStore/setInitBgSetList",e),e}function v(){var e=h(),t=g(),o=1;try{if(t&&t.length>0&&void 0!=t[e]){var n=t[e];n&&n.indexOf(":")>0&&(o=parseFloat(n.split(":")[1])/parseFloat(n.split(":")[0]))}}catch(r){o=1}var i={camerainfo:null,configNum:e,measuringScale:o,isShare:!1};return nd_viewCtrl&&nd_viewCtrl.shareInfo&&nd_viewCtrl.shareInfo.camerainfo&&(i.camerainfo=nd_viewCtrl.shareInfo.camerainfo,i.isShare=!0),i}function w(){var e=nd_viewCtrl&&(nd_viewCtrl.hideStructure||nd_viewCtrl._opt&&nd_viewCtrl._opt.hideStructure)||!1;return{hideStructure:e}}function f(){var e=w();if(nd_viewCtrl&&!nd_viewCtrl.hidebtnCfg&&(nd_viewCtrl.hidebtnCfg=[]),nd_viewCtrl&&nd_viewCtrl.showBtnCfg)return{type:"show",showbtns:nd_viewCtrl.showBtnCfg};if(nd_viewCtrl&&nd_viewCtrl.hidebtnCfg){nd_viewCtrl.viewMode&&"sync"==nd_viewCtrl.viewMode&&nd_viewCtrl.hidebtnCfg.push("#ico-Tagging"),e.hideStructure&&nd_viewCtrl.hidebtnCfg.push("#ico-structure"),e.hideAreaTool&&(nd_viewCtrl.hidebtnCfg.push("#ico-measure"),nd_viewCtrl.hidebtnCfg.push("#ico-ruler")),e.hideShowPMI&&nd_viewCtrl.hidebtnCfg.push("#ico-pmi");var t=[];if(nd_viewCtrl.hidebtnCfg&&nd_viewCtrl.hidebtnCfg.length>0)for(let e=0;e<nd_viewCtrl.hidebtnCfg.length;e++){var o=nd_viewCtrl.hidebtnCfg[e];o&&(o.startsWith("#")?t.push(o):t.push("#"+o))}return{type:"hide",hidebtns:t}}return{type:"no"}}(function(){try{parent&&parent.nd_viewCtrl?window.nd_viewCtrl=parent.nd_viewCtrl:window.nd_viewCtrl&&(window.nd_viewCtrl=window.nd_viewCtrl)}catch(e){}})();var b={tagNote:"tag_2d",pcMtxtTagTxt:"tag_2d",pcMtxtTagImg:"tag_2d",pcMtxtTagTxtImg:"tag_2d",meter:"",structureTree:"oper1_2d",hideshowNote:"oper1_2d",bgColor:"oper1_2d",reset:"oper2_2d",full:"oper2_2d",fullout:"oper2_2d",zoom:"oper2_2d",coordinateMeter:"mea1_2d",distanceMeter:"mea0_2d",edgesMeter:"mea1_2d",radiusMeter:"mea1_2d",angelMeter:"mea1_2d",scaleMeter:"mea1_2d",clearMeter:"mea1_2d",continuousLineMeter:"mea1_2d",continuousAreaMeter:"mea1_2d",distancePt2pt:"mea0_2d",distancePt2line:"mea0_2d",distanceLine2line:"mea0_2d",distanceLineargauge:"mea0_2d",distanceCentreOfCircle:"mea0_2d",distanceCentreToPoint:"mea0_2d",distanceAxis2line:"mea0_2d",smartdis:"mea2_2d",unit:"mea2_2d",pcUnitType1:"mea2_2d",pcUnitType2:"mea2_2d",pcUnitType3:"mea2_2d",screenshot:"screenshot_2d"},C={cancel:"取消",save:"保存",sure:"确定",search:"搜索",back:"返回",exit:"退出",del:"删除",searchTree:"搜索结构树",searchTree2:"搜索结构树部件",gUnit:"个",layout:"布局",chooseToLayout:"选择布局",hideNote:"隐藏批注",showNote:"显示批注",bgColor:"背景色",reset:"重置视角",chooseLayer:"选择图层",chooseBgColor:"选择背景色",scaleMeter:"设置比例",accuracyInfo:"该模型比较复杂，图形加载可能比较慢，浏览可能会不够流畅，建议您选择低精度模式查看。",lowAccuracy:"低精度模式",highAccuracy:"高精度模式",reset:"重置",full:"全屏",fullout:"退出全屏",zoom:"缩放",unit:"设置单位",hideNote:"隐藏批注",showNote:"显示批注",tagNote:"批注",meter:"测量",hideshowNote:"批注显藏",structureTree:"选择图层",showHide:"显示隐藏",chooseMeterType:"选择测量形式",chooseMeterDistanceType:"选择距离形式",chooseMeterLengthType:"选择长度形式",chooseMeterAngleType:"选择角度形式",chooseMeterAreaType:"选择面积形式",chooseMeterVolumnWeightType:"选择体积重量形式",chooseTagType:"选择批注形式",coordinateMeter:"坐标",distanceMeter:"距离",continuousLineMeter:"连续长度",continuousAreaMeter:"面积",smartdis:"智能测量",edgesMeter:"线段长度",radiusMeter:"半径",angelMeter:"角度",scaleMeter:"设置比例",clearMeter:"清空",distanceLineargauge:"线性测量",distanceCentreOfCircle:"圆心距",distanceCentreToPoint:"圆心到点",distanceAxis2line:"圆心到线",distancePt2pt:"点到点",distancePt2line:"点到线",distanceLine2line:"线到线",chooseStructureTree:"选择结构树",noTreeData:"暂无搜索结果",noTreeData2:"暂无数据",serveErrorTips:"提示：服务器异常，请稍候重试",dataIsNeed:"必填信息不能为空",noChildCfg:"缺少当前子菜单配置",choosePoint:"单击确定批注位置",tagTitle:"文本批注",tagholder:"请在此输入批注说明(选填)",tagPoint:"点",tagText:"文本",tagDraw:"绘图",tagArrow:"箭头",tagLine:"线段",tagCircle:"圆形",tagRect:"方形",tagSave:"保存",tagCancle:"取消",tagTip1:"禁止输入非法字符",tagTip2:"图片过大",tagTip3:"图片格式不正确",tagTip4:"请选择图片",tagTip5:"选择图片",loadError:"加载错误",pcNowConfig:"当前布局",pcStructLv:"结构树层级",pcMtxtHomeView:"重置视角",pcMtxtTagTxt:"文本批注",pcMtxtTagImg:"图片批注",pcMtxtTagImg2:"图片路径",pcMtxtTagTxtImg:"图文批注",pcMtxtSmartMeter:"智能测量",pcMtxtDistance:"距离",pcMtxtLength:"长度",pcMtxtAngle:"角度",pcMtxtRadius:"半径",pcMtxtBox:"包围盒",pcMtxtP2P:"点到点",pcMtxtP2L:"点到线",pcMtxtL2L:"线到线",pcMtxtBgColor:"",pcMtxtZoom:"",pcMtxtFull:"",pcMtxtCoordinate:"",pcMtxtEdges:"",pcMtxtContinuousLine:"",pcMtxtContinuousArea:"",pcMtxtLineAngel:"",pcMtxtScale:"",clear:"",pcMtxtLinear:"",pcMtxtHoleDist:"",pcMtxtAxis2pt:"",pcMtxtAxisline:"",pcUnitIcon:"单位设置",pcUnitType1:"默认单位",pcUnitType2:"公制单位(mm)",pcUnitType3:"英制单位(in)",rightScaleTips:"请填写正确的比例",pcFileTypeTips:"提示：图片格式不正确！",pcBrepNotEnd:"提示：测量数据正在加载，请稍候重试...",colorBlack:"黑色",colorGrey:"灰色",colorBeige:"米色",tagAudioTips1:"说话时间太短",tagDelConfirm:"确定要删除当前批注吗?",tagSaveConfirm:"是否要保存当前的批注?",tagAudioTimeTip:"",tagAudioCreate:"松开即可形成一条语音",tagAudioPress:"按住说话",tagExitSee:"退出查看批注",tagExit:"退出",tagExit2:"退出批注",tagTips:"请输入文本",tagDelImg:"删除图片",tagNoRoot:"请前往设置开启麦克风权限",tagSaveConfirm2:"是否要保存当前的批注?",tagSeeBigImg:"查看大图",tagSeeSmallImg:"最小化",unit:"单位设置",screenshot:"屏幕快照",measureTimesErr:"当前测量数据过多，请清除后再进行添加",modelLoadErr:"模型加载失败",modelLimitErr:"当前使用人数超过限制"};const S={_cEvent:null,_patform:"",_mode:"3D",_userID:"",_jg_appkey:"",init:function(e){var t=this;this._mode=e;try{if(j()){var o=navigator.userAgent;o.indexOf("MicroMessenger")>-1&&nd_viewCtrl&&nd_viewCtrl.wx_miniProgram||t.importJG_sdk()}else t.importJG_sdk()}catch(n){}},importJG_sdk:function(){var e=this;if(!nd_viewCtrl||!nd_viewCtrl.unsupportedJG)try{var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src","./coreViewer/res/janalytics-web.min.js?ver=4.1"),document.head.appendChild(t),t.onload=function(){e.init_detail()}}catch(o){}},init_detail:function(){if(window.JAnalyticsInterface){var e=this;nd_viewCtrl&&nd_viewCtrl.jg_appkey?this._jg_appkey=nd_viewCtrl.jg_appkey:this._jg_appkey="915297554df1c66f3fbf9e46",window.JAnalyticsInterface.init({appkey:e._jg_appkey,debugMode:!1,channel:"default-channel",loc:!1,singlePage:!1}),this._userID=nd_viewCtrl&&nd_viewCtrl.userID,this._patform=M()}},sendJig:function(e,t){if(window.JAnalyticsInterface){var o=window.JAnalyticsInterface.Event.CountEvent,n=C[t];this._cEvent=new o(e),this._cEvent.addKeyValue("菜单名称",n).addKeyValue("操作终端","mobile").addKeyValue("用户ID",this._userID),window.JAnalyticsInterface.onEvent(this._cEvent),this._cEvent=new o("2d"),this._cEvent.addKeyValue("菜单名称",n).addKeyValue("操作终端","mobile").addKeyValue("用户ID",this._userID),window.JAnalyticsInterface.onEvent(this._cEvent)}},buryClick:function(e,t){t||(t=b[e]),t+="_pc",this.sendJig(t,e)}};var O=S;const y=(e,t)=>{O.buryClick(e,t)},T=e=>{try{let t=decodeURIComponent(e||"");return t}catch(t){let o=e;const n=[{code:"%25",encode:"%"},{code:"%3F",encode:"?"},{code:"%23",encode:"#"},{code:"%26",encode:"&"},{code:"%3D",encode:"="}];o=o.replace(/%25|%3F|%23|%26|%3D/g,(e,t,o)=>{for(const i of n)if(i.code===e)return i.encode});const i=[{code:"%",encode:"%25"},{code:"?",encode:"%3F"},{code:"#",encode:"%23"},{code:"&",encode:"%26"},{code:"=",encode:"%3D"}];return o=o.replace(/[%?#&=]/g,(e,t,o)=>{for(const n of i)if(n.code===e)return n.encode}),decodeURIComponent(o||"")}},j=function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=!1,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){o=!0;break}return o},M=()=>{if(j()){var e=navigator.userAgent;return e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1||e.indexOf("Macintosh")>-1?"IOS":e.indexOf("Android")>-1||e.indexOf("Linux")>-1?"Android":"Other"}return"PC"};function x(){const e={modelFolder:"",Folder:"",Name:"",modejsPath:"",captureImg:"../../assets/img/pic-default2.png",capturePath:"",isShare:!1,bgColor:"0xFFF2F2F2"};return e}function D(e){var t=[];return e.map((e,o,n)=>{var i=x();Object.assign(i,e);var r=e.Folder.substring(e.Folder.lastIndexOf("/")+1),c=/^[0-9]+$/.test(r),a=c?e.Folder.substr(0,e.Folder.lastIndexOf("/")):e.Folder;i.captureImg=a+"/"+e.Name+"_thumbnail.jpg",i.capturePath=a+"/"+e.Name+"_thumbnail.jpg",i.modejsPath=e.Folder+"/model.js","Model"==e.Name&&(i.bgColor="0x000000"),t.push(i)}),t}const k=function(e,t,o){var n=[];if(-1!=o[t].toLowerCase().indexOf(e.toLowerCase())&&n.push(o),o.children.length)for(var i=0;i<o.children.length;i++)n=n.concat(k(e,t,o.children[i]));return n},E=function(e){const t=f();return"show"==t.type||("hide"!=t.type||!(t.hidebtns.indexOf(e)>-1))},I=function(e){var t=e&&e.replace("(","");t=t&&t.replace(")",""),t=t&&t.replace("rgb","").split(",");for(var o="0X",n=0;n<t.length;n++){var i=Number(t[n]).toString(16);i.length<2&&(i="0"+i),o+=i}return 8!==o.length&&(o=e),o},_=function(e){const t=["","rgb(0,0,0)","rgb(255,253,245)","rgb(242,242,242)"],o=I(t[e]);return o},B=function(e){var t;return t=String(e)&&String(e).indexOf("num:")>=0?parseInt(e.split(":")[1]):_(e),t};function N(e){var t=e.replace("(","").replace(")","").split(",");if(3!=t.length)return"#ffff";for(var o="#",n=0;n<3;n++){var i=t[n];if(""==i&&(i="0"),parseInt(i)!=i)return"#ffff";if(i>255)return"#ffff";var r="0123456789ABCDEF",c="",a=i%16;c=r.substr(a,1),a=(i-a)/16,o+=r.substr(a,1)+c}return o}function A(e){var t=N(e);return t=t.replace("#","0X"),Number(t)}function V(e){return e=e.replace("#","0X"),Number(e)}function L(e){return"string"==typeof e?e.indexOf("#")>=0?V(e):3==e.split(",").length?A(e):e:e}const P=function(e){if(!e||e.indexOf(":")<=0)return;const t=e.split(":")[0],o=e.split(":")[1],n=parseFloat(o)/parseFloat(t);return n},z=function(){var e=new Date;return"cms"+e.getDay()+e.getHours()+e.getMinutes()+e.getSeconds()+e.getMilliseconds()+Math.round(1e4*Math.random())},R=function(e){e.isChecked=!1,e.parent&&R(e.parent)},U=function(e){e.parent&&(e.parent.isChecked=e.parent.children.every(e=>e.isChecked)),e.parent&&e.parent.parent&&U(e.parent)},F=function(e,t){e.isRendered&&e.children&&e.children.map(e=>{e.isChecked=t,e.children&&F(e,t)})},H=function(e){e.isHighlight=!1,e.parent&&H(e.parent)},W=function(e){e.parent&&(e.parent.isHighlight=e.parent.children.every(e=>e.isHighlight)),e.parent&&e.parent.parent&&W(e.parent)},G=function(e,t){e.children&&e.children.map(e=>{e.isHighlight=t,e.children&&G(e,t)})},K=function(e,t){e.uuid==t.uuid?(e.isHighlight=!0,G(e,!0),W(e),J(e)):e.children&&e.children.map(o=>{o.parent=e,K(o,t)})},J=function(e){e.isOpenChild=!0,e.parent&&J(e.parent)},Y=function(e,t){e&&(t.isHighlight=e.isHighlight,t.isChecked=e.isChecked,t.isOpenChild=e.isOpenChild,t.children&&t.children.map((t,o)=>{Y(e.children[o],t)}))},Q=function(e,t){return new Promise((t,o)=>{var{url:n,method:i,data:r}=e,c=i||"GET",a=!0,s=null;window.XMLHttpRequest?s=new XMLHttpRequest:window.ActiveXObject&&(s=new ActiveXObject("Microsoft.XMLHTTP")),null!=s?(s.onreadystatechange=function(){var e=void 0;if(4==s.readyState){if(s.responseText&&404!=s.status&&!s.responseText.includes("<!DOCTYPE html>"))try{e=JSON.parse(s.responseText)}catch(o){}t(e)}},s.open(c,n,a),s.setRequestHeader("Content-type","application/json; charset=utf8"),c=c.toUpperCase(),"GET"==c||"DELETE"==c?s.send():"POST"!=c&&"PUT"!=c||s.send(JSON.stringify(r))):(alert("Your browser does not support XMLHTTP."),t(void 0))})},Z=function(e,t){var o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",e),o.onload=function(){t&&t()},document.head.appendChild(o)},X=function(e){if(!pako)return null;let t=atob(e);const o=t.split("").map((function(e){return e.charCodeAt(0)})),n=new Uint8Array(o),i=pako.inflate(n);t=new Uint16Array(i);let r,c="",a=8192;for(r=0;r<t.length/a;r++)c+=String.fromCharCode.apply(null,t.slice(r*a,(r+1)*a));return c+=String.fromCharCode.apply(null,t.slice(r*a)),decodeURIComponent(c)},q=function(e,t){if(!pako)return null;let o;return o=t?pako.gzip(encodeURIComponent(e),{to:"string"}):pako.gzip(e,{to:"string"}),btoa(o)},ee=function(e,t){let o=!1;return e.map(e=>{e.state.uuid==t&&(o=!0)}),o},te=function(){try{return new Promise((e,t)=>{const o=window.localStorage.getItem("0_BF"),n=(new Date).getTime();let i=o&&o.split(",")[1]||0;if(!o||i-n>864e5){var r=new Fingerprint2;r.get(t=>{window.localStorage.setItem("0_BF",t+","+(new Date).getTime()),e(t)})}else e(o.split(",")[0])})}catch(e){return""}},oe=function(e){try{let t="MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCxl/XzEMiiYrLq prR5BxAY+IPkPdOtiEt7fP3jtxac0m5S1FAT/3jiQb+bTmqeffsl5gw7LaMMOkAj 5h+HzH/TbTmxYn4dIUkGFvvZHAiwMuDA+7fORjhTaz1hmQi1gUNX9Qu985ys2jFb eXAg5XV2orovM+qY3regbNkWwVk3iJ1Kk3rk2ZBw26AVvs+ujVvAE8cGP/LgAAOe CvNDTiA//agCTajQo1xSkAIcLSNKdUfn5OdTlx0sifXcw5NUmBZKbQ7Q7tC0Xpa1 RanG+5riOzLcw6zOKwHn62Hp3Twosc/hLATaOmz/ru5rnNe+bDBndp3iRo/zCiL8 8iwmg+s7AgMBAAECggEBAJnBWusKSOpuUUDe+7kc6E72OhpNfQrsyY0sdhPE3AsC FQoZTwtBT8Nz8RPhHGYD5IC3XzeNF3DqrcVm4z2LS9Ac7Koq/8zwmGxxUbJylwMV yYjLZiNsoC941Te+as/aDhgEzBm05Jyye7Eavn18q+n+kPt1E1Mu4ARAuOL+muN8 LNqNFOMSYzocXRJqnKSXnnIQQa6FvA6UiM8DaJcXJ83V24tF0vaLfCOOFvfNQwGN gNapppvJGSqE1QjrNwllO8O8cBmiC0PIW0lff2qeXH6bfhzUiaMa70sDEEHcZlW5 WmoJABjYwEH5xvjCqieK5SOGKwQkwFj0gcqBKGWZPYECgYEA6xAV4UqvvIlRvlMI eKAlJJwS10M9avScyq9W+fJk0KVqstGGdIDklRy4pd1SALDwKU4C58I/5Gsky+S+ iPwUaZySWjwgdBl4icv3cbUdu61gUUdHfDh+d+hZcnRKa9EzQEPReOkcVpSlfxnJ oaS7psozL3nUfJrTH+QlflesQXECgYEAwWl1dpcCJkmuacUhzCsZ29BljREjlPK6 6qnjUEY/IWqddH2ZWrJBB+6ZSNYSniNqpsjnFPccQdEfk2kxWLjeCCNb42Lukm6F rrJt7Kit7KW0VDyN7+etkzGRfM0QQl9mhX4wUxWyCKdgq7+Ut/nwlYhZi7TN86n7 qRBN1HPlIWsCgYEA0Q43R20TKoy+RJS4Xf+fyRV9tDE6+Fqg76pNonIvs1jKskqi WA8iPHOUzP8vJSo4DaQx9UjPZijcSvIfetkmll8H0nTTMC5PA86BPYGk9ftWRDMu oo3j/GSK2L4QSh9+g1NNg0lfSKlfHtEigD5wHgCK0Vh64G8aAaz4o4r5yiECgYBH G93K5wQsTYSpcIfXh7UvIvRjI/0AAyoDoshnOBx3zbnsHU1nkgfkwa1roQEhUQYi IdUL2TpzXE6OpOs2omlHdrCO7k2mWqodq45Mp0uiqN2e5tCMdpJTfrLtvnsO3AJW bCmaMmzNT7R0ELC930+7unCps6TQxBs5cjwbMyz31wKBgF1wlS2cWsuOQ76t8LPn jXC6nsU2eisWN5KFbxhNphCnqxgYBJth5Vk3OIby2nmvNGqO12p1bUZpbVEBttyj JcXR+iuasOWWev0SuUFZvp3bYEiX/sCjWZbB9mBjg/s6QW5z4ZW9rF6UdOr7ISQ8 6g9cU4ontroPvD52Jcffyr3f",o=new JSEncrypt;o.setPrivateKey(t);let n=o.decrypt(e);return n}catch(t){return""}};var ne={namespaced:!0,state:{hideItem:{structTree:!1,measure:!1},configs:[],shareInfo:void 0,shareConfig:-2,isModelCfg:!1,modelPath:"",modelSetInfo:null,nowConfig:-1,nowConfigName:"",annotationTagId:"",activConfig:-1,scaleDialog:!1,measureScale:[],bgSetList:[],colorIdx:0,allTag:[],nowTag:[],delTagUuid:"",tagRelate:!0,_geometryload:!1,_brepload:!1,_highLightNode:[],treeUpdate:!1,unit:"",needOpenImg:""},mutations:{initModelInfo(e,t){-1===t.opt.configNum?e.nowConfig=0:(e.configs=t.opt.modelList,e.nowConfig=t.opt.configNum),e.shareInfo=t.opt.shareInfo,e.nowConfigName=t.opt.nowConfigName,e.allTag=t.opt.allTag,e.nowTag=t.opt.nowTag},resetTagIndex(e,t){if(e.allTag&&e.allTag.length>0){var o=e.allTag;for(let e=0;e<o.length;e++)o[e].index=String(e+1);e.allTag=o,e.tagRelate&&(e.nowTag=e.allTag.filter(t=>!t.modelName||t.modelName==e.nowConfigName))}},setAllTag(e,t){e.allTag=t},setNowTag(e,t){e.nowTag=t},setModelCfg(e,t){e.isModelCfg=t.isModelCfg,e.isModelCfg&&(e.cfgSrcs=t.cfgSrcs)},setShareConfig(e,t){e.shareConfig=t},setActiveCfg(e,t){e.activConfig=t},setScaleDialog(e,t){e.scaleDialog=t},setGeometryload(e,t){e._geometryload=t},setBrepload(e,t){e._brepload=t},setShowhide(e,t){e.showhide=t},changeMultipleCfg(e,t){if(t!=e.nowConfig){e._geometryload=!1,e._brepload=!1,e.nowConfig=t;var o=e.configs[e.nowConfig].Name;e.nowConfigName=o,e.allTag&&(e.nowTag=e.allTag.filter(e=>!e.modelName||e.modelName==o));var n={configNum:e.nowConfig,measuringScale:1};try{if(e.measureScale.length>0&&void 0!=e.measureScale[e.nowConfig]){t=e.measureScale[e.nowConfig];n.measuringScale=P(t)}}catch(a){}var i=e.shareConfig==e.nowConfig?e.shareInfo.camerainfo:null,r=e.configs[e.nowConfig].Folder+"/model.js",c=-2==e.shareConfig?e.nowConfig:e.shareConfig;e.modelPath=r,e.modelSetInfo=n,se.loadModelView(r,null,c,i,n)}},setModelPath(e,t){e.modelPath=t},setModelSetInfo(e,t){e.modelSetInfo=t},setAnnotationTagId(e,t){e.annotationTagId=t},setNowConfig(e,t){e.nowConfig=t},addTag(e,t){e.nowTag.push(t),e.allTag.push(t)},updateTagText(e,t){var o=t.uuid;e.nowTag.map((function(e,n){e.state.uuid==o&&(e.text=encodeURIComponent(t.text))})),e.allTag.map((function(e,n){e.state.uuid==o&&(e.text=encodeURIComponent(t.text))}))},delTagByuuid(e,t){var o=-1;e.nowTag.map((function(e,n){e.state.uuid==t&&(o=n)})),o>=0&&e.nowTag.splice(o,1);var n=-1;e.allTag.map((function(e,o){e.state.uuid==t&&(n=o)})),n>=0&&e.allTag.splice(n,1),n>=0&&(e.delTagUuid=t)},checkHighLightNode(e,t){e._highLightNode.map(e=>{e.isHighLight=t})},setHighLightNode(e,t){e._highLightNode=t},addHighLightNodeByOne(e,t){e._highLightNode.push(t)},addHighLightNode(e,t){e._highLightNode=e._highLightNode.concat(t)},deleteHighLightNodeByOne(e,t){let o=e._highLightNode.indexOf(t);o>-1&&e._highLightNode.splice(o,1)},deleteHighLightNode(e,t){t.map(t=>{let o=e._highLightNode.indexOf(t);o>-1&&e._highLightNode.splice(o,1)})},setMeasureScale(e,t){e.measureScale[e.nowConfig]=t;var o=P(t);se.setMeasuringScale(o)},setInitMeasureScale(e,t){e.measureScale=t},setInitBgSetList(e,t){e.bgSetList=t},setShareBg(e,t){e.bgSetList[e.nowConfig]=t,e.colorIdx=t},setHideItem(e,t){e.hideItem={...e.hideItem,...t}},treeSubject(e){e.treeUpdate=!e.treeUpdate},setUnitType(e,t){e.unit=t},setNeedOpenImg(e,t){e.needOpenImg=t}},actions:{}},ie={namespaced:!0,state:{isShowTagEdit:!1,tagDrawing:!1,tagShow:!0},mutations:{startNewTagDraw(e){e.isShowTagEdit=!0},setTagdrawing(e,t){e.tagDrawing=t},setTagshow(e,t){e.tagShow=t}},actions:{}},re={namespaced:!0,state:{showOneMenu:!0,menuChoose:"",menuChoose2:"",menuChoose3:"",showAllMenu:!0,structMenu:!1,unitMenu:!1,showManyConfig:!0},mutations:{setShowOneMenu(e,t){e.showOneMenu=t},setMenuChoose(e,t){e.menuChoose=t},setMenuChoose2(e,t){e.menuChoose2=t},setMenuChoose3(e,t){e.menuChoose3=t},setShowAllMenu(e,t){e.showAllMenu=t},setStructMenu(e,t){e.structMenu=t},setShowManyConfig(e,t){e.showManyConfig=t},setUnitMenu(e,t){e.unitMenu=t}},actions:{}},ce=Object(l["createStore"])({namespaced:!0,state:{isShowCtrlBtn:!1,isShowBottomBtn:!1,isShowMsg:!1,msgTxt:"",msgFunc:null,showAreaTips:!0,helpShow:!1,showLoading:!0,isShareConfig:!1,treeMode:"normal",opt:{},mpath:"",language:"",isFull:!1,clickIng:!1,setTi:null,printMode:!1,rtmNeedCover:!1,modelIsLoaded:!1},mutations:{setLanguage(e,t){e.language=t},showCtrlBtn(e){e.isShowCtrlBtn=!0},hideCtrlBtn(e){e.isShowCtrlBtn=!1},showBottomBtn(e){e.isShowBottomBtn=!0},hideBottomBtn(e){e.isShowBottomBtn=!1},showMsgTip(e,t){e.msgTxt=t.txt,e.isShowMsg=!0,e.msgFunc=t.func},hideMsgTip(e){e.isShowMsg=!1},setShowAreaTips(e,t){e.showAreaTips=t},setHelpShow(e,t){e.helpShow=t},setShowLoading(e,t){e.showLoading=t},setTreemode(e,t){e.treeMode=t},setOpt(e,t){e.opt=t},setPath(e,t){e.mpath=t.mpath},setFull(e,t){e.isFull=t},setClickIng(e,t){e.setTi&&clearTimeout(e.setTi),e.clickIng=t,e.setTi=setTimeout(()=>{e.clickIng=!1},1e3)},setPrintMode(e,t){e.printMode=t},setRtmNeedCover(e,t){e.rtmNeedCover=t},setModelIsLoaded(e,t){e.modelIsLoaded=t}},actions:{},modules:{modelStore:ne,tagStore:ie,menuStore:re}});const ae={_viewer:null,_loaded:0,_geometryload:!1,_pmiload:!1,_nowModel:0,_OnlyVisbale:void 0,_is2DModel:!1,_viewMode:"common",_modelId:0,state:{brepOk:!1,pmiOk:!1},copyRight:["新迪","MD5 6bf14f1225fc5faa","3870337AC4335EB9","武汉新迪数字工程系统有限公司","MD5 7119695dc5e0b620","F2594065542A15E9649EF73FDDBCA95E2FDA28426AE5B3C8DA906D8F80ED2F82","杭州新迪数字工程系统有限公司","MD5 975c80e892939df2","E411A8048C3755F3856E6224F3B78E5A35442CB1D7CD4491873F2E161326BC30"],init:function(e){if(this.copyRight){this._viewer=new NDSWebViewer.Viewer({id:"viewer",from:e.from,BreploadWorkerUrl:"./coreViewer/NDSBrepLoadWorker.min.js?ver=4.1",loadWorkerUrl:"./coreViewer/NDSLoadWorker.min.js?ver=4.1",enableArrowKeyOp:!0,backGroundColor:e.bgColor,enableGroundShadow:e.showShadow,enableAutoRotation:!1,backGroundImage:e.bgImg,is2DModel:!0,language:"zh-CN",inAssemblyContext:!1,toolbar:!1,pmiVisible:!0,loadbrepDefault:e.loadbrepDefault,has2DCover:!0,hasLoadingWaiter:!1,hasLoadingCoverer:!0,enableSelect:!0,autoSwitchFirstPersonView:!1,showLines:!0,projectionMode:"Orthographic",hasViewBox:!1,limitEventArea:!0,convertPhongToPBR:!0,enableBodyVolumeMeasure:!0,clipPlaneShaderVersion:3,showSectionPlane:!0,defaultStandardView:"front",defaultOpRotate:!1,Arthur:e.waterString,viewState:"shadedWithEdges",testMode:e.testMode,disratio:e.disratio})}},getViewerIntance:function(){return this._viewer},async loadModelView(e,t,o,n,i){ce.commit("setShowLoading",!0);const r=await this.allowCode(e);if(2==r&&!ce.state.modelIsLoaded){if(!nd_viewCtrl.hasOwnProperty("fingerHttp"))return ce.commit("setShowLoading",!1),void ce.commit("menuStore/setShowManyConfig",!1);const e=await te(),t=await Q({url:nd_viewCtrl.fingerHttp+"/nds_requests/common/ViewerVisit",method:"POST",data:{browserMark:e,viewerVersion:window.ViewerVersion}});if(!t)return ce.commit("menuStore/setShowManyConfig",!1),void ce.commit("setShowLoading",!1);if(1!=t.status.code)return mc.$eventBus.emit("MsgTipEvent4",t.status.msg),ce.commit("menuStore/setShowManyConfig",!1),void ce.commit("setShowLoading",!1);let o=JSON.parse(oe(t.data));if(o.browserMark!=e)return ce.commit("menuStore/setShowManyConfig",!1),void ce.commit("setShowLoading",!1);if(!o.visit)return mc.$eventBus.emit("MsgTipEvent4",mc.$t("modelLimitErr")),ce.commit("menuStore/setShowManyConfig",!1),void ce.commit("setShowLoading",!1)}var c=ce.state.modelStore.bgSetList[ce.state.modelStore.nowConfig||0],a=B(c);ae.setBackGroundColor(a),ce.commit("modelStore/setShareBg",c),ce.commit("modelStore/setModelPath",e),ce.commit("modelStore/setModelSetInfo",i),n=n||null,i=i||{},this._viewer.resetForReload(),this._viewer.loadModel("idv",e,void 0,void 0,"js",n,(function(){ae._nowModel=o,ae.enableRotation(!1),setTimeout(()=>{ae._viewer.onWindowResize()},2e3),t&&t()}),null,i)},easyLoadModel:function(e,t,o){this._viewer.loadModel("idv",e,void 0,void 0,"js",void 0,(function(){o&&o()}),null,t)},modelUnit:function(){return this._viewer.modelUnit},allowCode(e){return new Promise((t,o)=>{this._viewer.allowshow(e,e=>{t(e)})})},broadcastMember:function(e){try{var t=ae._viewer.getBroadcastInfo();"yzp"==ae._viewMode&&yzp_page_vue&&yzp_page_vue.isSyncView&&yzp_page_vue.isNowAssembling&&yzp_viewCtrl.SocketFun_ViewropeateSend(t,e)}catch(o){}},listenerBroadcastEvent:function(){var e=this;this._viewer.removeEventListener("broadcastEvent",e.broadcastMember),this._viewer.addEventListener("broadcastEvent",e.broadcastMember)},setBroadcastInfo:function(e){var t=this;t._viewer&&t._viewer.setBroadcastInfo(e)},recieveDirect_viewer:function(e){var t=this,o=e;if(t._viewer&&!NDSWebViewer.SETTING.broadcastMajor&&NDSWebViewer.SETTING.enableBroadcast){t._viewer.setBroadcastInfo(o);window.performance.now()}},containProperty:function(){return this._viewer.containProperty},getViewer:function(){return this._viewer},addListener:function(e,t){this._viewer.addEventListener(e,t)},onMoveForward:function(){this._viewer.onMoveForward()},onMoveBack:function(){this._viewer.onMoveBack()},onMoveLeft:function(){this._viewer.onMoveLeft()},onMoveRight:function(){this._viewer.onMoveRight()},onResetCamera:function(){return this._viewer.onResetCamera()},setOperatorByID:function(e){return this._viewer.setOperatorByID(e)},onSectionView:function(e){return this._viewer.onSectionView(e)},hideShowClipPlane:function(e){return this._viewer.clipPlaneManager.hideShowClipPlane(e)},reverseClipDirection:function(){return this._viewer.clipPlaneManager.reverseClipDirection()},getSelectedObjects:function(){return this._viewer.selectionManager.getSelectedObjects()},isolateSelectedObjects:function(){return this._viewer.isolateSelectedObjects()},hideSelectedObjects:function(){return this._viewer.hideSelectedObjects()},onSelectAndMoveModel:function(){return this._viewer.onSelectAndMoveModel(!0)},onSelectAndRestoreModel:function(){return this._viewer.onSelectAndRestoreModel(!0)},onHideModel:function(){return this._viewer.onHideModel()},onReverseVisibleAndHidingModel:function(){return this._viewer.onReverseVisibleAndHidingModel()},showAllModel:function(){return this._viewer.showAllModel()},getSelectedObjectProperty:function(e){this._viewer.getSelectedObjectProperty(e)},hasObjectHiddenOrIsolated:function(){return this._viewer.hasObjectHiddenOrIsolated()},getModelTree:function(){return this._viewer.getModelTree(this._OnlyVisbale)},isLeaf:function(e){return this._viewer.isLeaf(e)},clearSelection:function(){this._viewer.selectionManager.clearSelection(),this.render()},selectObject:function(e){this._viewer.selectionManager.selectObject(e,!0)},deselectObject:function(e){this._viewer.selectionManager.deselectObject(e)},isolateSelectedObjects:function(e){this._viewer.isolateSelectedObjects()},zoomToObject:function(e){this._viewer.zoomToObject(e)},getObjectProperty:function(e,t){this._viewer.getObjectProperty(e,t)},setMeasureOpType:function(e){this._viewer.setMeasureOpType(e)},setMeasuringScale:function(e){this._viewer.setMeasuringScale(e)},lookByFace:function(e){this._viewer.cameraControl.lookByFace(e)},onBoxSectionView:function(e){this._viewer.onBoxSectionView(e)},setBackGroundColor:function(e){this._viewer.setBackGroundColor(e)},getHotPoint:function(e,t){return this._viewer.getHotPoint(e,t)},addAnnotation:function(e){this._viewer.addAnnotation(e)},addAnnotationSave:function(e){this._viewer.addAnnotationSave(e)},CorrectPosition:function(e){this._viewer.CorrectPosition(e)},resetSelectAnnotation:function(){this._viewer.resetSelectAnnotation()},setAnnotationsVisibility:function(e){this._viewer.setAnnotationsVisibility(e)},selectAnnotation:function(e){this._viewer.selectAnnotation(e)},removeAnnotation:function(e){this._viewer.removeAnnotation(e)},removeAnnotations:function(e){this._viewer.removeAnnotations(e)},removeAllAnnotations:function(){this._viewer.removeAllAnnotations()},displayViewBox:function(e){this._viewer.displayViewBox(e)},clientCoordToModelCoord:function(e,t){return this._viewer.clientCoordToModelCoord(e,t)},modelCoordToClientCoord:function(e,t){return this._viewer.modelCoordToClientCoord(e,t)},onExplode:function(e){this._viewer.onExplode(e)},getExplodeFactor:function(){return this._viewer.getExplodeFactor()},onLineVisibility:function(e){this._viewer.onLineVisibility(e)},getCurrentOperatorID:function(){return this._viewer.getCurrentOperatorID()},isModelMoved:function(){return this._viewer.isModelMoved()},onSelectAndMoveModel:function(){"OpDrag"!=this._viewer.getCurrentOperatorID()&&this._viewer.setOperatorByID("OpDrag"),this._viewer.onSelectAndMoveModel(!0)},onSelectAndRestoreModel:function(){"OpDrag"!=this._viewer.getCurrentOperatorID()&&this._viewer.setOperatorByID("OpDrag"),this._viewer.onSelectAndRestoreModel(!0)},isPerspective:function(){return this._viewer.camera.IsPerspective()},toPerspective:function(){this._viewer.camera.toPerspective()},toOrthographic:function(){this._viewer.camera.toOrthographic()},showObject:function(e,t){this._viewer.showObject(e,t),t||this.deselectObject(e)},render:function(){this._viewer.render()},isAllHidden:function(){return this._viewer.isAllHidden()},setPmiVisible:function(e){this._viewer.setPmiVisible(e)},isObjectOrSomeChildHidden:function(e){return this._viewer.isObjectOrSomeChildHidden(e)},getCameraInfo:function(){return this._viewer.getCameraInfo()},hasAnimations:function(){return this._viewer.hasAnimations()},getAllAnimationsInfo:function(){return this._viewer.getAllAnimationsInfo()},startAnimationByUUID:function(e,t){this._viewer.startAnimationByUUID(e,t)},setAnimationScaleByUUID:function(e,t){this._viewer.setAnimationScaleByUUID(e,t)},exitAnimations:function(){this._viewer.exitAnimations()},enableRotation:function(e){this._viewer.enableRotation(e)},OpMeasureRelease:function(){this._viewer.OpMeasureRelease()},setMeasuringScale:function(e){this._viewer.setMeasuringScale(e)},getPrintData:function(e,t,o,n,i,r){return"select"==i?this._viewer.getPrintData(e,t,o,n,i,r):"view"==i?this._viewer.getPrintData(e,t,o,n,i):this._viewer.getPrintData(e,t,o,n)},getPrintDataCallback:function(e,t,o,n,i,r,c){"select"==r?this._viewer.getPrintDataCallback((function(t){e&&e(t)}),t,o,n,i,r,c):"view"==r?this._viewer.getPrintDataCallback((function(t){e&&e(t)}),t,o,n,i,r):this._viewer.getPrintDataCallback((function(t){e&&e(t)}),t,o,n,i)}};var se=ae;const le=function(e){if(Detector.webgl){var t=m();const r={modejsPath:"",modelList:[],configNum:t.configNum,shareInfo:t.shareInfo,allTag:t.allTag,nowTag:[],nowConfigName:"",mpath:e.mpath};se.init(t.viewSetting);var o="";if(e.isModelCfg){r.modelList=D(e.cfgSrcs),(-1==r.configNum||1==r.modelList.length||r.configNum-1>r.modelList.length)&&(r.configNum=0);var n=r.modelList[r.configNum];if(n){n.isShare=!0,r.modejsPath=n.modejsPath,o=n.Folder;var i=n.Name;r.nowConfigName=i,r.nowTag=t.allTag.filter(e=>!e.modelName||e.modelName==i)}}else r.modejsPath=e.cfgSrcs[0],r.nowTag=JSON.parse(JSON.stringify(r.allTag));return ce.commit("modelStore/initModelInfo",{opt:r,initSet:t}),window.configImgPath=o,{opt:r,initSet:t}}alert("系统不支持!")};function de(e,t){Array.isArray(e)&&(e=e[1]);var o=e,n=e.indexOf("model.js");n>1?o=e.substr(0,n):e.lastIndexOf("/")!=e.length-1&&(o=e+"/"),ce.commit("setPath",o),Q({url:o+"Configurations.json",method:"GET"}).then(e=>{var n=!!e,i={isModelCfg:n,cfgSrcs:[],mpath:o},r=[];if(e){var c="";if(e.Configurations){i.isModelCfg=!0;var a=e.Configurations;a[0].isActive=!0,a.map(e=>{e.Folder=c+o+e.Folder});for(let e=0;e<a.length;e++)"Model"==a[e].Name?(i.cfgSrcs.splice(0,0,a[e]),r.splice(0,0,1)):(i.cfgSrcs.push(a[e]),r.push(3));for(let e=0;e<i.cfgSrcs.length;e++)i.cfgSrcs[e].isActive&&ce.commit("modelStore/setActiveCfg",e)}}else r.push(1);ce.commit("modelStore/setInitBgSetList",r),p(),i.isModelCfg||(i.cfgSrcs=[o+"model.js"]),ce.commit("modelStore/setModelCfg",i);var s=le(i);t&&t(s)})}var me={rootClass:"five",hideMutlti:!1,showBtnCfg:[{},{id:"ico-structure"},{id:"ico-home-li"},{id:"ico-showSetting-li",list:[{id:"ico-hiddenLineRemove-li"},{id:"ico-hiddenLineVisible-li"},{id:"ico-shaded-li"},{id:"ico-shadedWithEdges-li"}]},{id:"ico-cutout",list:[{id:"ico-cutSlideHide"},{id:"ico-cutReverse"}]}]};const ue={_btnSetting:[],_bottomDom:[],init(){"overseas"==nd_viewCtrl.showBtnMode&&(nd_viewCtrl.showBtnCfg=me.showBtnCfg),nd_viewCtrl.showBtnCfg&&nd_viewCtrl.showBtnCfg.length>0&&(this._btnSetting=nd_viewCtrl.showBtnCfg)},readyForDom(e){const t=this;t.init(),this._btnSetting.forEach((e,o)=>{t.changeOneLevelBottom(e,o)}),e&&e()},getChildDom(e){let t=[];if(e){const o=this;e.forEach((e,n)=>{let i=document.getElementById(e.id);i&&i.setAttribute("sortidx",n),e.imgUrl&&i.querySelector("img").setAttribute("src",e.imgUrl),t.push(i);let r,c=document.getElementById(e.id+"-list"),a=o.getChildDom(e.list);c&&(r=c.querySelector(".return-menu")),c&&(c.innerHTML="",r&&c.appendChild(r),a.length&&a.map(e=>{c.appendChild(e)}))})}return t},changeLevelLeft(e){if(e.id){let t=document.getElementById(e.id+"-list"),o=this.getChildDom(e.list);if(o=o.sort((e,t)=>e.getAttribute("sortidx")-t.getAttribute("sortidx")),t.innerHTML="",o.length?o.map(e=>{t.appendChild(e)}):t.nextElementSibling.style.display="block",e.imgUrl){let t=document.getElementById(e.id).querySelector("img");t.setAttribute("src",e.imgUrl)}}},changeOneLevelBottom(e,t){let o;o=document.getElementById(e.id),o&&(o.setAttribute("sortidx",t),this.changeBottomChildDom(e),this._bottomDom.push(o),e.imgUrl&&o.querySelector("img").setAttribute("src",e.imgUrl)),t==this._btnSetting.length-1&&this.sortBottomOneLevelBtn()},changeBottomChildDom(e){let t=document.getElementById(e.id+"-list"),o=t&&t.querySelector(".return-menu"),n=this.getChildDom(e.list);n=n.sort((e,t)=>e.getAttribute("sortidx")-t.getAttribute("sortidx")),t&&(t.innerHTML="",o&&t.appendChild(o),n.length?n.map(e=>{t.appendChild(e)}):t.nextElementSibling&&(t.nextElementSibling.style.display="block"))},sortBottomOneLevelBtn(){let e=document.getElementById("bottomMainMenu");this._bottomDom=this._bottomDom.sort((e,t)=>e.getAttribute("sortidx")-t.getAttribute("sortidx")),e.innerHTML="",this._bottomDom.map(t=>{e.appendChild(t)})}};var he=ue;function ge(e,t,o,n){return Math.sqrt((e-o)*(e-o)+(t-n)*(t-n))}function pe(e,t,o,n){var i={};return i.x=Math.round(Math.cos(o)*n+e),i.y=Math.round(Math.sin(o)*n+t),i}function ve(e,t,o){var n=e.x,i=e.y,r=t.x,c=t.y,a=[],s=+o,l=ge(n,i,t.x,t.y),d=Math.atan2(c-i,r-n);return t=pe(n,i,d,l-1.5*s),r=t.x,c=t.y,s=Math.max(3*s,10),a.push("M",n,i,"L",r,c),a.push("M",r,c),a.push("L",r-s*Math.cos(d-Math.PI/7),c-s*Math.sin(d-Math.PI/7)),a.push("L",r-s*Math.cos(d+Math.PI/7),c-s*Math.sin(d+Math.PI/7)),a.push("L",r,c),a.push("L",r-s*Math.cos(d-Math.PI/7),c-s*Math.sin(d-Math.PI/7)),a.join(" ")}function we(e,t){var o=.5*r(t.x-e.x),n=.5*r(t.y-e.y),i=["M",e.x,e.y+n];return i.push("a",Math.abs(o),Math.abs(n),0,1,1,r(2*o),0),i.push("a",Math.abs(o),Math.abs(n),0,1,1,r(2*-o),0),i.push("z"),i.join(" ");function r(e){return 0==e?1:e}}function fe(e,t){var o=t.x,n=e.x,i=t.y,r=e.y,c=Math.abs(o-n),a=Math.abs(i-r),s=Math.sqrt(Math.pow(c,2)+Math.pow(a,2)),l=a/s,d=Math.acos(l),m=Math.floor(180/(Math.PI/d));return n>o&&r>i&&(m=180-m),n==o&&r>i&&(m=180),n>o&&r==i&&(m=90),n<o&&r>i&&(m=180+m),n<o&&r==i&&(m=270),n<o&&r<i&&(m=360-m),m}function be(e,t,o){if(se){var n=se._viewer.modelCoordToClientCoord([e,t,o]);return{x:n[0],y:n[1]}}return{x:0,y:0}}function Ce(e,t){if(se){var o=se._viewer.clientCoordToModelCoord([e,t]);return{cx:o[0],cy:o[1],cz:o[2]}}return{cx:0,cy:0,cz:0}}function Se(e,t){if(se){var o=se._viewer.getHotPoint(e,t);return o}return null}function Oe(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=!1,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){o=!0;break}return o}function ye(e){var t=$(".taglayer-nd .svg"),o=t.html(),n=document.createElement("canvas");n.width=t.width(),n.height=t.height(),t.append(n),canvg(n,o,{ignoreMouse:!0,ignoreAnimation:!0,renderCallback:function(){html2canvas(document.getElementById("viewer"),{useCORS:!0,allowTaint:!0,ignoreMouse:!0,ignoreAnimation:!0}).then(t=>{e&&e(t.toDataURL("image/png")),$("#drawImg").remove()})}})}function Te(e){var t=document.createElement("canvas");t.style.width=$("#t_container").width()+"px",t.style.height=$("#t_container").height()+"px",t.id="drawImg",$("#t_container").append(t);var o=new Image;o.setAttribute("crossOrigin","anonymous"),se._viewer.getScreenCapture(e=>{o.src=e}),o.onload=function(){t.width=o.width,t.height=o.height,t.getContext("2d").drawImage(o,0,0),html2canvas(document.getElementById("viewer"),{useCORS:!0,allowTaint:!0,ignoreMouse:!0,ignoreAnimation:!0}).then(t=>{e&&e(t.toDataURL("image/png")),$("#drawImg").remove()})}}var je={offsetSave:{x:0,y:0},saveCss:"",nowCssInfo:{},operateType:"",nowDivInfo:{},setDivPos:function(e,t){var o=e.getBBox();this.nowDivInfo={width:o.width,height:o.height},t.style.width=this.nowDivInfo.width+20+"px",t.style.height=this.nowDivInfo.height+20+"px",this.nowDivInfo.left=o.x,this.nowDivInfo.top=o.y,t.style.left=this.nowDivInfo.left-10+"px",t.style.top=this.nowDivInfo.top-10+"px";var n=$(e).data("rotate");t.style.transform=n?"rotate("+n+"deg)":""},new:function(e,t,o){this.destroy(),this.opt=t,this.parentVue=o,e=e.parentElement||e.parentNode;var n=document.createElement("div");n.className="nd-selector-box",n.setAttribute("num",this.parentVue.tagNum_list),document.querySelector(".taglayer-nd").appendChild(n),n.innerHTML='<div class="selector-drag-point" direction="n" style="top:-5px;left:calc(50% - 5px);cursor:ns-resize;"></div>\t\t\t<div class="selector-drag-point" direction="s" style="top:calc(100% - 5px);left:calc(50% - 5px);cursor:ns-resize;"></div>\t\t\t<div class="selector-drag-point" direction="w" style="left:-5px;top:calc(50% - 5px);cursor: ew-resize;"></div>\t\t\t<div class="selector-drag-point" direction="e" style="right:-5px;top:calc(50% - 5px);cursor: ew-resize;"></div>\t\t\t<div class="selector-drag-point" direction="nw" style="top:-5px;left:-5px;cursor: nwse-resize;"></div>\t\t\t<div class="selector-drag-point" direction="ne" style="top:-5px;right:-5px;cursor: nesw-resize;"></div>\t\t\t<div class="selector-drag-point" direction="sw" style="bottom:-5px;left:-5px;cursor: nesw-resize;"></div>\t\t\t<div class="selector-drag-point" direction="se" style="bottom:-5px;right:-5px;cursor: nwse-resize;"></div>\t\t\t<div class="selector-drag-point" direction="rotation" style="top:-30px;left:calc(50% - 5px);cursor: move;">\t\t\t</div>\t\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA01pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDQ4OCwgMjAyMC8wNy8xMC0yMjowNjo1MyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjAgKDIwMjAwODE4Lm0uMTAxMiAyMDIwLzA4LzE4OiBmODJmNDMzNzYxKSAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjcyNDZDMENDOUMyMTExRUI5NTRCOTI4QUQ1MEM5OENBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjcyNDZDMENEOUMyMTExRUI5NTRCOTI4QUQ1MEM5OENBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzI0NkMwQ0E5QzIxMTFFQjk1NEI5MjhBRDUwQzk4Q0EiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzI0NkMwQ0I5QzIxMTFFQjk1NEI5MjhBRDUwQzk4Q0EiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5xKH8WAAAB+0lEQVR42ryWzUoCURTHj7Nwo4Wr3ChkLWrtYoZI0AdQ8En8gNwErYQ2Blobg2jREyToAyQEkoueILNFG3MTqZs2dc50BmS8HzPl9Ic/DM659+fce869J/RlHoJGm+gDdJYdZ5Mm7D57AA/3H6rJQgpgGF1Cl9EJ8KZX9Dn6AsGfogBDMrBo/1uAhg8YcGzDHmtlil6BFfQtOg2/V9qew8pUdMA8ugnrUxOheRnQRHdh/eoi1HQDKUHaEJzaCA0vA0vSPdvfA9iI6qekGIqV72nJAcY49Ve1kwK4uQa4uvx5loneUQzFyuPK+JUxAuakqT+dAoxfAFLbAKd18WT0G72jGIqlMfKSyRl8eog1mwMcn8ihbhjF0hi5sgZnp1zPYzFUBKNYtUw62p7wYVebFG4AyR+MNCLgDB+inpJ7GUryByPNDfhnGXy9gO8l1WWvWBNvQFGCqLJXA+z7htGeybJXrb4aGImoU18EpTEa4IBv6lUlE/rUd0OTCVU3MHBajCO+qcVLOnkDWCzUi0VfFt9SlUgN244zBxjmL00HVA2PdiOGfY5Th9Tw1AMsv7rTVC0XfgddDQBWRVhH1tO00IU1wgoIa+m6th7a4nX/y55ZCOt57UuH3G3XpCUjT/0aJ8jQb+ftKMZdQZbvTlGrP+QD5A5B76rJvgUYAC/2yxdBsKw2AAAAAElFTkSuQmCC" class="del" title="删除"  />',this.setDivPos(e,n);var i=this.getTransform(e);n.style.transform=i.orotate||"",this.opt&&this.opt.onSel(e);var r=Oe()?["touchstart","touchmove","touchend","touchcancle"]:["mousedown","mousemove","mouseup","mouseleave"],c=Oe()?"touchstart":"mousedown";document.querySelector(".nd-selector-box img.del").addEventListener(c,(function(e){a.opt.onDelDrawChild()}));var a=this,s=function(e){Oe()&&(e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY);var t=e.target.getAttribute("direction");if("rotation"==t)a.operateType="rotate";else if(t&&"rotation"!=t)switch(a.operateType="drag",t){case"n":a.operateDrag={x:0,y:1};break;case"s":a.operateDrag={x:0,y:-1};break;case"ne":a.operateDrag={x:1,y:1};break;case"nw":a.operateDrag={x:-1,y:1};break;case"w":a.operateDrag={x:-1,y:0};break;case"sw":a.operateDrag={x:-1,y:-1};break;case"e":a.operateDrag={x:1,y:0};break;case"se":a.operateDrag={x:1,y:-1};break}else a.operateType="move";document.body.addEventListener(r[1],l),document.body.addEventListener(r[2],d),document.body.addEventListener(r[3],d),a.offsetSave.x=e.clientX,a.offsetSave.y=e.clientY,e.stopPropagation(),e.preventDefault()},l=function(t){Oe()&&(t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY),"move"==a.operateType?a.move(t,e,n):"rotate"==a.operateType?a.rotate(t,e,n):"drag"==a.operateType&&a.drag(t,e,n);var o=a.getTransform(e);e.setAttribute("transform",(o.translate||"")+" "+(o.rotate||"")),n.style.transform=(o.otranslate||"")+" "+(o.orotate||""),a.saveCss=o.data,a.opt&&a.opt.onChange(a.saveCss),t.stopPropagation()},d=function(t){a.opt&&a.opt.onChangeEnd(),a.setDivPos(e,n),document.body.removeEventListener(r[1],l),document.body.removeEventListener(r[2],d),document.body.removeEventListener(r[3],d),t.stopPropagation(),t.preventDefault()};n.addEventListener(r[0],s)},move:function(e,t,o){var n=this,i=$(t).data("translate");if(i)var r={x:i.x,y:i.y};else r={x:0,y:0};var c=e.clientX-n.offsetSave.x,a=e.clientY-n.offsetSave.y;n.offsetSave.x=e.clientX,n.offsetSave.y=e.clientY;var s=r.x+c,l=r.y+a,d=(i=document.getElementById("t_container").getBoundingClientRect(),Math.min(i.left,0)),m=Math.min(i.top,0),u=Math.min(i.width+d,window.innerWidth-Math.max(i.left,0)),h=Math.min(i.height+m,window.innerHeight-Math.max(i.top,0));return o.offsetLeft+s+d<0&&(s+=0-(o.offsetLeft+s+d)),o.offsetTop+l+m<0&&(l+=0-(o.offsetTop+l+m)),d+o.offsetLeft+o.offsetWidth+s>u&&(s+=u-(d+o.offsetLeft+o.offsetWidth+s)),m+o.offsetTop+o.offsetHeight+l>h&&(l+=h-(m+o.offsetTop+o.offsetHeight+l)),$(t).data("translate",{x:s,y:l}),{x:s,y:l}},rotate:function(e,t,o){var n=fe({x:e.clientX,y:e.clientY},this.getCenterPos(o));return $(t).data("rotate",n),n},drag:function(e,t,o){Oe()&&(e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY);var n=e.clientX-this.offsetSave.x,i=e.clientY-this.offsetSave.y;n<0&&this.operateDrag.x>0&&this.nowDivInfo.width+n<20&&(n=20-this.nowDivInfo.width),n>0&&this.operateDrag.x<0&&this.nowDivInfo.width-n<20&&(n=this.nowDivInfo.width-20),i<0&&this.operateDrag.y<0&&this.nowDivInfo.height+i<20&&(i=20-this.nowDivInfo.height),i>0&&this.operateDrag.y>0&&this.nowDivInfo.height-i<20&&(i=this.nowDivInfo.height-20),0==this.operateDrag.x&&(n=0),0==this.operateDrag.y&&(i=0);var r={top:this.nowDivInfo.top,left:this.nowDivInfo.left,width:this.nowDivInfo.width,height:this.nowDivInfo.height};1==this.operateDrag.y&&(r.top=this.nowDivInfo.top+i,r.height=this.nowDivInfo.height-i),-1==this.operateDrag.y&&(r.height=this.nowDivInfo.height+i),1==this.operateDrag.x&&(r.width=this.nowDivInfo.width+n),-1==this.operateDrag.x&&(r.left=this.nowDivInfo.left+n,r.width=this.nowDivInfo.width-n),o.style.top=r.top-10+"px",o.style.left=r.left-10+"px",o.style.width=r.width+20+"px",o.style.height=r.height+20+"px",this.opt&&this.opt.onScale(r,this.nowDivInfo),this.nowDivInfo=r,this.offsetSave.x=e.clientX,this.offsetSave.y=e.clientY},getCenterPos:function(e){var t=e.getBoundingClientRect(),o=t.left+t.width/2,n=t.top+t.height/2;return{x:o,y:n}},getTransform:function(e){var t,o,n,i={data:{}};if(t=$(e).data("translate"),o=$(e).data("rotate"),n=$(e).data("scale"),t&&(i.translate="translate("+t.x+","+t.y+")",i.otranslate="translate("+t.x+"px,"+t.y+"px)",i.data.translate=Ce(t.x,t.y),this.nowCssInfo.translate=t),o){var r=e.getBBox();i.rotate="rotate("+o+","+(r.x+r.width/2)+" "+(r.y+r.height/2)+")",i.orotate="rotate("+o+"deg)",i.data.rotate=o}return n&&(i.scale="scale("+n.x+","+n.y+")",i.data.scale=n),i},destroy:function(){$(".nd-selector-box").remove(),this.opt&&this.opt.onHide()},destroy_new:function(){var e=this,t=document.querySelectorAll(".nd-selector-box").length;if(1==t){var o=$(".nd-selector-box").attr("style"),n=$(".nd-selector-box").attr("num");$(".nd-selector-box").remove(),$(".nd-selector-box2").removeClass("edit");var i=document.createElement("div");i.className="nd-selector-box2",i.style=o,i.setAttribute("num",n);var r=document.createElement("img");r.className="del",r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA01pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDQ4OCwgMjAyMC8wNy8xMC0yMjowNjo1MyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjAgKDIwMjAwODE4Lm0uMTAxMiAyMDIwLzA4LzE4OiBmODJmNDMzNzYxKSAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjcyNDZDMENDOUMyMTExRUI5NTRCOTI4QUQ1MEM5OENBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjcyNDZDMENEOUMyMTExRUI5NTRCOTI4QUQ1MEM5OENBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzI0NkMwQ0E5QzIxMTFFQjk1NEI5MjhBRDUwQzk4Q0EiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzI0NkMwQ0I5QzIxMTFFQjk1NEI5MjhBRDUwQzk4Q0EiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5xKH8WAAAB+0lEQVR42ryWzUoCURTHj7Nwo4Wr3ChkLWrtYoZI0AdQ8En8gNwErYQ2Blobg2jREyToAyQEkoueILNFG3MTqZs2dc50BmS8HzPl9Ic/DM659+fce869J/RlHoJGm+gDdJYdZ5Mm7D57AA/3H6rJQgpgGF1Cl9EJ8KZX9Dn6AsGfogBDMrBo/1uAhg8YcGzDHmtlil6BFfQtOg2/V9qew8pUdMA8ugnrUxOheRnQRHdh/eoi1HQDKUHaEJzaCA0vA0vSPdvfA9iI6qekGIqV72nJAcY49Ve1kwK4uQa4uvx5loneUQzFyuPK+JUxAuakqT+dAoxfAFLbAKd18WT0G72jGIqlMfKSyRl8eog1mwMcn8ihbhjF0hi5sgZnp1zPYzFUBKNYtUw62p7wYVebFG4AyR+MNCLgDB+inpJ7GUryByPNDfhnGXy9gO8l1WWvWBNvQFGCqLJXA+z7htGeybJXrb4aGImoU18EpTEa4IBv6lUlE/rUd0OTCVU3MHBajCO+qcVLOnkDWCzUi0VfFt9SlUgN244zBxjmL00HVA2PdiOGfY5Th9Tw1AMsv7rTVC0XfgddDQBWRVhH1tO00IU1wgoIa+m6th7a4nX/y55ZCOt57UuH3G3XpCUjT/0aJ8jQb+ftKMZdQZbvTlGrP+QD5A5B76rJvgUYAC/2yxdBsKw2AAAAAElFTkSuQmCC",r.setAttribute("title","删除"),i.appendChild(r),document.querySelector(".taglayer-nd").appendChild(i);var c=function(o){o.stopPropagation(),o.preventDefault(),"del"!=o.target.className&&($(o.target).hasClass("edit")||(t=document.querySelectorAll(".nd-selector-box").length,1==t&&e.destroy_new(),$(".nd-selector-box").remove(),$(".nd-selector-box2").removeClass("edit"),$(o.target).addClass("edit")))},a=Oe()?"touchstart":"mouseover",s=Oe()?"touchstart":"click";i.addEventListener(a,c),r.addEventListener(s,(function(t){e.opt.onDelDrawChild(),t.stopPropagation(),t.preventDefault()}))}$(".nd-selector-box").remove(),this.opt&&this.opt.onHide()}},Me=je;const xe=function(e,t,o){this.parent=e,this.dom=null,this.container=t,this.disableText=!0,o&&(this.parentVue=o),this._moveTag=!1,this.offsetSave={},this.tagPos={},this.fontSize=12,this.init=function(){},this.init(),this.addHotpoint=function(e,t){this.parentVue.onShowstep1(),this.parentVue.hideTagTips();var o=document.createElement("div");o.className="ico-sign",this.container.appendChild(o);var n=be(t.cx,t.cy,t.cz);o.style.top=n.y+"px",o.style.left=n.x+"px",o.style.pointerEvents="none",this.tagDiv=o,this.tagPos={cx:t.cx,cy:t.cy,cz:t.cz}},this.drawHtml=function(){},this.modifyHot=function(e,t,o){this.moveHot(e),this.tagDiv&&(this.tagDiv.style.display="block")},this.moveHot=function(e){e&&this.tagDiv&&(this.tagDiv.style.left=e.x+"px",this.tagDiv.style.top=e.y+"px")},this.newText=function(e){this.disableText=!1},this.showText=function(e){e=e.replace(/<br\/>/g,"\n").replace(/&nbsp;/g," ")},this.writeInfo=function(e){this.disableText=!0,this.tagPos.cx=e.cx,this.tagPos.cy=e.cy,this.tagPos.cz=e.cz;var t=be(e.cx,e.cy,e.cz),o=T(e.text);"undefined"===o&&(o=""),this.modifyHot(t,o,e.size)},this.getInfo=function(){return{pos:this.tagPos}},this.exit=function(){this.hotPot&&(this.hotPot.style.display="none"),this.tagDiv=null}};var De=xe,ke=function(e,t){var o=this;this.drawInfo=null,this.nowDrawingInfo={},this._tagIdx=0,t&&(this.parentVue=t),this._openDraw=!1,this.strokeColor="rgb(255,99,2)",this.strokeWidth=2,this.fontSize="12px",this.drawType="point",this.container=e,this.container.querySelector(".taglayer-nd")&&this.container.removeChild(this.container.querySelector(".taglayer-nd")),this.drawTagDiv=document.createElement("div"),this.drawTagDiv.className="taglayer-nd",this.drawTagDiv.setAttribute("onselectstart","return false"),this.container.appendChild(this.drawTagDiv),this.drawTagDiv.addEventListener("contextmenu",e=>(e.preventDefault(),e.stopPropagation(),!1));const n=document.createElement("div");n.id="tagTooltips",this.container.appendChild(n);const i=document.createElement("div");i.id="tagCancelButton",this.container.appendChild(i),i.addEventListener("click",()=>{this.parentVue.cancelSave(),n.style.left="-1000px"}),i.addEventListener("contextmenu",e=>(e.preventDefault(),e.stopPropagation(),!1)),i.addEventListener("mouseenter",()=>{n.style.display="none"}),i.addEventListener("mouseleave",()=>{n.style.display="block"});const r=document.createElement("div");r.id="tagSaveButton",this.container.appendChild(r),r.addEventListener("contextmenu",e=>(e.preventDefault(),e.stopPropagation(),!1)),r.addEventListener("mouseenter",()=>{n.style.display="none"}),r.addEventListener("mouseleave",()=>{n.style.display="block"}),this.container.addEventListener("mousemove",e=>{if("none"!=this.drawTagDiv.style.display){const t=document.getElementById("vueMain").offsetLeft,o=document.getElementById("vueMain").offsetTop;n.style.top=e.clientY-o+14+"px",n.style.left=e.clientX-t+17+"px"}}),i.style.display="none",r.style.display="none",n.style.display="none",this.drawTagDiv.style.display="none",this.selectSVG=-1,this.nowDiving=null,this.nowSvg=null,this.offsetSave={_start:!1,x:0,y:0},this._tagTextCtrl=new De(this,this.drawTagDiv,this.parentVue);var c=null;window.onresize=function(){c=c?null:setTimeout((function(){o.resizeTags(),c=null}),350)}};ke.prototype.localToPoint=function(e,t,o){if(se){var n=se._viewer.modelCoordToClientCoord([e,t,o]);return{x:n[0],y:n[1]}}return{x:0,y:0}},ke.prototype.pointToLocal=function(e,t){if(se){var o=se._viewer.clientCoordToModelCoord([e,t]);return{cx:o[0],cy:o[1],cz:o[2]}}return{cx:0,cy:0,cz:0}},ke.prototype.resizeTags=function(){if(this.drawInfo&&this.drawInfo.list&&"text"!=this.nowDrawingInfo){var e=document.querySelectorAll(".nd-selector-box").length;if(e>0&&this.drawSvg(),this.drawSvg_resize(),-1!=this.selectSVG){var t=$(this.drawTagDiv).find("path[idx="+this.selectSVG+"]"),o=$(this.drawTagDiv).find("div.area-box[idx="+this.selectSVG+"]");t.length&&(this.nowDiving=t),o.length&&(this.nowDiving=o),(t.length||o.length)&&e>0&&(this.nowDiving=this.nowDiving[0])}}},ke.prototype.changePos=function(){var e=this.nowDrawingInfo;if(e.transform&&e.transform.translate){var t=e.transform.translate;if(t=be(t.cx,t.cy,t.cz),"point"==e.type&&e.points.map((function(e){var o=be(e.cx,e.cy,e.cz);o.x+=t.x,o.y+=t.y,o=Ce(o.x,o.y),e.cx=o.cx,e.cy=o.cy,e.cz=o.cz})),"arrow"==e.type||"line"==e.type||"circle"==e.type||"rect"==e.type){var o=be(e.cx,e.cy,e.cz);if(o.x+=t.x,o.y+=t.y,o=Ce(o.x,o.y),e.cx=o.cx,e.cy=o.cy,e.cz=o.cz,e.cx2||e.cy2||e.cz2){var n=be(e.cx2,e.cy2,e.cz2);n.x+=t.x,n.y+=t.y,n=Ce(n.x,n.y),e.cx2=n.cx,e.cy2=n.cy,e.cz2=n.cz}}if("text"==e.type){o=be(e.cx,e.cy,e.cz);o.x+=t.x,o.y+=t.y,o=Ce(o.x,o.y),e.cx=o.cx,e.cy=o.cy,e.cz=o.cz}}this.drawSvg()},ke.prototype.changeScale=function(e,t){var o=this.nowDrawingInfo;if("point"==o.type&&o.points.map((function(o){var n=be(o.cx,o.cy,o.cz),i=(n.x-t.left)/t.width,r=(n.y-t.top)/t.height;n.x=e.width*i+e.left,n.y=e.height*r+e.top,n=Ce(n.x,n.y),o.cx=n.cx,o.cy=n.cy,o.cz=n.cz})),"arrow"==o.type||"line"==o.type||"circle"==o.type||"rect"==o.type){var n=be(o.cx,o.cy,o.cz),i=(n.x-t.left)/t.width,r=(n.y-t.top)/t.height;if(n.x=e.width*i+e.left,n.y=e.height*r+e.top,n=Ce(n.x,n.y),o.cx=n.cx,o.cy=n.cy,o.cz=n.cz,o.cx2||o.cy2||o.cz2){var c=be(o.cx2,o.cy2,o.cz2),a=(c.x-t.left)/t.width,s=(c.y-t.top)/t.height;c.x=e.width*a+e.left,c.y=e.height*s+e.top,c=this.pointToLocal(c.x,c.y),o.cx2=c.cx,o.cy2=c.cy,o.cz2=c.cz}}this.drawSvg()},ke.prototype.showSelectBox=function(){var e=this,t=this.nowDiving.getAttribute("idx");Me.new(this.nowDiving,{onChange:function(o){try{e.selectSVG=t,e.drawInfo.list[t].transform=o}catch(n){}},onChangeEnd:function(){e.changePos()},onSel:function(o){e.selectSVG=t},onHide:function(){},onScale:function(t,o){e.changeScale(t,o)},onDelDrawChild:function(){var t="",o=document.querySelector(".nd-selector-box"),n=document.querySelector(".nd-selector-box2.edit");if(o?(t=o.getAttribute("num"),o.remove()):n&&(t=n.getAttribute("num"),n.remove()),""!=t){var i=document.querySelector("svg g[num='"+t+"']");i&&i.remove(),e.drawInfo.list=e.drawInfo.list.filter(e=>{if(e.num!=t)return e})}}},this.parentVue)},ke.prototype.showTags=function(e){this._openDraw=!1,this.drawTagDiv.style.display="block",this.drawTagDiv.style.zIndex=6,this.getTagLayer(e)},ke.prototype.openDraw=function(e){this.drawInfo=null,this.drawTagDiv.style.display="block",this.drawTagDiv.style.zIndex=4,this.drawTagDiv.style.pointerEvents="auto",this._openDraw=!0,this._tagIdx=e,this.getTagLayer()},ke.prototype.closeDraw=function(){this._openDraw=!1,this.container.style.cursor="auto",document.body.removeEventListener("keydown",this.delete)},ke.prototype.delete=function(e){if(46==e.keyCode){var t=this.nowDiving.getAttribute("idx");this.drawInfo.list[t].del=!0;var o=this.nowDiving.parentElement||this.nowDiving.parentNode;o.remove(),Me.destroy()}},ke.prototype.setPen=function(e){this.drawType=e},ke.prototype.setLineWidth=function(e){this.strokeWidth=e},ke.prototype.setColor=function(e){this.strokeColor=e},ke.prototype.initPicTag=function(e){this.drawType="image",this.drawInfo=new Object,this.drawInfo.cx=e.cx,this.drawInfo.cy=e.cy,this.drawInfo.cz=e.cz,this.drawInfo.list=[],this._tagTextCtrl.addHotpoint(this._tagIdx,this.drawInfo)},ke.prototype.setPenStatus=function(e,t){if("color"==e&&(this.strokeColor=t),"size"==e&&(this.strokeWidth=t),"fontsize"==e&&(this.fontSize=t),"text"!=this.drawType){var o=this.nowDiving.parentElement||this.nowDiving.parentNode,n=o.getAttribute("type");if("text"!=n&&("color"==e&&o.setAttribute("stroke",this.strokeColor),"size"==e&&o.setAttribute("stroke-width",this.strokeWidth)),"arrow"==n&&"size"==e){var i={pos0:be(this.nowDrawingInfo.cx,this.nowDrawingInfo.cy,this.nowDrawingInfo.cz),pos1:be(this.nowDrawingInfo.cx2,this.nowDrawingInfo.cy2,this.nowDrawingInfo.cz2)},r=this.strokeWidth,c=ve(i.pos0,i.pos1,r);this.nowDiving.setAttribute("d",c)}}"color"==e&&(this.drawInfo.list[this.selectSVG].color=this.strokeColor),"size"==e&&(this.drawInfo.list[this.selectSVG].line=this.strokeWidth),"fontsize"==e&&(this.drawInfo.size=this.fontSize)},ke.prototype.initDrawInfo=function(e,t){var o=this;this.parentVue.tagNum_list++;var n={type:o.drawType,cx:e.cx,cy:e.cy,cz:e.cz,text:"",color:o.strokeColor,line:o.strokeWidth,size:o.fontSize,idx:o.drawInfo.list.length,new:!0,num:this.parentVue.tagNum_list},i=10;if("point"==o.drawType)n.points=[{cx:e.cx,cy:e.cy,cz:e.cz}];else if("arrow"==o.drawType||"line"==o.drawType){var r={x:t.x+i,y:t.y+i};r=this.pointToLocal(r.x,r.y),n.cx2=r.cx,n.cy2=r.cy,n.cz2=r.cz}else if("rect"==o.drawType||"circle"==o.drawType){var c=i;r={x:t.x+c,y:t.y+c};r=this.pointToLocal(r.x,r.y),n.cx2=r.cx,n.cy2=r.cy,n.cz2=r.cz}return n},ke.prototype.openDrawEvt=function(){var e=this,t=Oe()?["touchstart","touchmove","touchend","touchcancle"]:["mousedown","mousemove","mouseup","mouseleave"],o=this.drawTagDiv.querySelector(".svg");function n(o){if(o.stopPropagation(),o.preventDefault(),e._openDraw){var n=document.querySelector(".taglayer-nd");if(n&&n.className.indexOf("drawing")<0&&(n.className+=" drawing"),Oe()){var c=o.touches[0];o.offsetX=c.clientX-Number(e.container.style.marginLeft.replace("px",""))-e.container.offsetLeft,o.offsetY=c.clientY-Number(e.container.style.marginTop.replace("px",""))-e.container.offsetTop}var a=e.pointToLocal(o.offsetX,o.offsetY);e.offsetSave.x=o.offsetX,e.offsetSave.y=o.offsetY,e.drawInfo||(e.drawInfo=new Object,e.drawInfo.cx=a.cx,e.drawInfo.cy=a.cy,e.drawInfo.cz=a.cz,e.drawInfo.list=[]),"text"!=e.drawType?(e.drawTagDiv.addEventListener(t[1],i),e.drawTagDiv.addEventListener(t[2],r),e.drawTagDiv.addEventListener(t[3],r)):(e._tagTextCtrl.addHotpoint(e._tagIdx,e.drawInfo),e._openDraw=!1),e.drawInfo.list.push(e.initDrawInfo(a,e.offsetSave)),e.nowDrawingInfo=e.drawInfo.list[e.drawInfo.list.length-1],e.parentVue.onCheckSaveEable(),e.getTags(e.nowDrawingInfo)}}function i(t){if(t.stopPropagation(),t.preventDefault(),Oe()){var o=t.touches[0];t.offsetX=o.clientX-Number(e.container.style.marginLeft.replace("px",""))-e.container.offsetLeft,t.offsetY=o.clientY-Number(e.container.style.marginTop.replace("px",""))-e.container.offsetTop}var n=e.pointToLocal(t.offsetX,t.offsetY);switch(e.drawType){case"point":var i=e.nowDrawingInfo.points[e.nowDrawingInfo.points.length-1];if(i&&i.cx==n.cx&&i.cy==n.cy&&i.cz==n.cz)return;e.nowDrawingInfo.points.push({cx:n.cx,cy:n.cy,cz:n.cz});break;case"arrow":case"line":case"rect":case"circle":n.cx==e.nowDrawingInfo.cx&&n.cy==e.nowDrawingInfo.cy&&n.cz==e.nowDrawingInfo.cz||(e.nowDrawingInfo.cx2=n.cx,e.nowDrawingInfo.cy2=n.cy,e.nowDrawingInfo.cz2=n.cz);break}e.drawSvg()}function r(o){var n=document.querySelector(".taglayer-nd");n&&n.className.indexOf("drawing")>=0&&(n.className=n.className.replace("drawing",""));for(var c=document.querySelectorAll(".nd-selector-box2"),a=0;a<c.length;a++){var s=c[a];s&&s.className.indexOf("edit")>=0&&(s.className=s.className.replace("edit",""))}if("point"==e.drawType&&1==e.nowDrawingInfo.points.length){var l=e.pointToLocal(e.offsetSave.x+1,e.offsetSave.y+1);e.nowDrawingInfo.points.push({cx:l.cx,cy:l.cy,cz:l.cz}),e.drawSvg()}if(e._openDraw&&"text"!==e.drawType&&"pic"!==e.drawType){Me.destroy_new();var d=e.parentVue.tagNum_list;e.parentVue.svgNum_list.push(d)}e.drawTagDiv.removeEventListener(t[1],i),e.drawTagDiv.removeEventListener(t[2],r),e.drawTagDiv.removeEventListener(t[3],r),o.stopPropagation(),o.preventDefault()}o.addEventListener(t[0],n,!1)},ke.prototype.getTagLayer=function(e){this.tagDiv&&(this.drawTagDiv.innerHTML="",this.tagDiv=null);var t="http://www.w3.org/2000/svg";this.tagDiv=document.createElement("div"),this.tagDiv.className="svg",this.nowSvg=document.createElementNS(t,"svg"),this.nowSvg.style.width="100%",this.nowSvg.style.height="100%",this.drawTagDiv.appendChild(this.tagDiv),this.tagDiv.appendChild(this.nowSvg);var o=this;e&&e.list&&e.list.length&&(e.list.forEach((function(e,t){e.num||(e.num=t+1),o.getTags(e)})),this.drawInfo=e,this.nowDrawingInfo=e.list[0]),this._openDraw?this.openDrawEvt():(this.drawTagDiv.style.pointerEvents="none","ImageAnno"!=e.state.origiType&&this._tagTextCtrl.writeInfo(e))},ke.prototype.getTags_old=function(e){switch(e.type){case"text":e.new&&(this._tagTextCtrl.newText(this.drawInfo),this.closeDraw(),e.new=!1);break;default:this.nowDiving=this.newDiv(e.type,e),this.nowDiving.setAttribute("d",this.getSVGpath(e))}e&&!e.new&&"text"!=e.type&&this.setTransform(this.nowDiving,e)},ke.prototype.getTags=function(e){this.nowDiving=this.newDiv(e.type,e),this.nowDiving.setAttribute("d",this.getSVGpath(e)),"arrow"==e.type&&this.nowDiving.setAttribute("fill",e.color),e&&!e.new&&this.setTransform(this.nowDiving,e)},ke.prototype.drawSvg=function(){this.nowDiving&&(this.nowDiving.setAttribute("d",this.getSVGpath(this.nowDrawingInfo)),this.setTransform(this.nowDiving,this.nowDrawingInfo))},ke.prototype.drawSvg_resize=function(){if(this.drawInfo.list&&this.drawInfo.list.length>0)for(var e=0;e<this.drawInfo.list.length;e++){var t=this.drawInfo.list[e];if(t.num&&Number(t.num>0)){var o=document.querySelector("svg g[num='"+t.num+"'] path");if(o){o.setAttribute("d",this.getSVGpath(t)),this.setTransform(o,t);var n=document.querySelector(".nd-selector-box2[num='"+t.num+"']");if(n){var i=o.parentElement||o.parentNode;Me.setDivPos(i,n)}}}}},ke.prototype.newDiv=function(e,t){var o=t.color||this.strokeColor,n=t.line||this.strokeWidth,i=document.createElementNS("http://www.w3.org/2000/svg","g");i.setAttribute("stroke",o),i.setAttribute("stroke-width",n),i.setAttribute("type",e),i.setAttribute("num",t.num),i.style.pointerEvents="none",i.setAttribute("fill","none");var r=document.createElementNS("http://www.w3.org/2000/svg","path");return i.appendChild(r),t.new&&(r.setAttribute("idx",t.idx),t.new=!1),this.nowSvg.appendChild(i),r},ke.prototype.getSVGpath=function(e){var t="";switch(e.type){case"point":e.points&&e.points.forEach((function(e,o){var n=be(e.cx,e.cy,e.cz);t+=0==o?"M "+n.x+" "+n.y+" ":"L "+n.x+" "+n.y+" "}));break;case"arrow":var o=be(e.cx,e.cy,e.cz),n=e.line||this.strokeWidth,i=be(e.cx2,e.cy2,e.cz2);t=ve(o,i,n);break;case"line":o=be(e.cx,e.cy,e.cz),i=be(e.cx2,e.cy2,e.cz2);t="M "+o.x+" "+o.y+" L "+i.x+" "+i.y+" ";break;case"rect":o=be(e.cx,e.cy,e.cz),i=be(e.cx2,e.cy2,e.cz2);t="M "+o.x+" "+o.y+" L "+i.x+" "+o.y+" L "+i.x+" "+i.y+" L"+o.x+" "+i.y+"z";break;case"circle":o=be(e.cx,e.cy,e.cz),i=be(e.cx2,e.cy2,e.cz2);t=we(o,i);break}return t},ke.prototype.setTransform=function(e,t){if(e=e.parentElement||e.parentNode,t.transform){var o="";if(t.transform.rotate){var n=e.getBBox();o="rotate("+t.transform.rotate+","+(n.x+n.width/2)+" "+(n.y+n.height/2)+")",$(e).data("rotate",t.transform.rotate)}t.transform.translate&&(t.transform.translate="",$(e).data("translate","")),$(e).attr("transform",o)}},ke.prototype.destroy=function(){this._openDraw=!1,this.drawTagDiv.style.display="none",this.drawTagDiv.style.zIndex=0,this.drawType="point",this.drawTagDiv.innerHTML="",this.tagDiv=null,this._tagTextCtrl.exit()},ke.prototype.isTextTag=function(){return!!(this.drawInfo.list&&this.drawInfo.list.length>0&&"text"==this.drawInfo.list[0].type)},ke.prototype.getTextDrawInfo=function(){var e=this._tagTextCtrl.getInfo();this.drawInfo.cx=e.pos.cx,this.drawInfo.cy=e.pos.cy,this.drawInfo.cz=e.pos.cz;var t=be(this.drawInfo.cx,this.drawInfo.cy,this.drawInfo.cz),o=document.querySelector("#annoText").value,n=o;return this._tagTextCtrl.modifyHot(t,n),this.drawInfo.text=n,this.drawInfo},ke.prototype.getInfo=function(){if(this.parentVue.picTagUrl){o=$("#annoText").val();this.drawInfo.text=o}else{var e=this._tagTextCtrl.getInfo();this.drawInfo.cx=e.pos.cx,this.drawInfo.cy=e.pos.cy,this.drawInfo.cz=e.pos.cz;var t=be(this.drawInfo.cx,this.drawInfo.cy,this.drawInfo.cz),o=$("#annoText").val(),n=o.replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;");this._tagTextCtrl.modifyHot(t,n,this._tagTextCtrl.fontSize),this.drawInfo.text=encodeURIComponent(n)}return this.drawInfo},ke.prototype.revoke=function(){var e=this.drawInfo.list.length;if(e>1){var t=e-1;this.drawInfo.list.splice(t,1)}var o=this.parentVue.svgNum_list.length,n=this.parentVue.svgNum_list[o-1];$(`.taglayer-nd .svg svg g[num='${n}']`).remove();var i=o-1;this.parentVue.svgNum_list.splice(i,1),this.parentVue.onCheckSaveEable()},ke.prototype.clear=function(){$(".taglayer-nd .svg svg g").remove(),this.drawInfo.list=[this.drawInfo.list[0]],this.parentVue.svgNum_list=[],this.parentVue.onCheckSaveEable()},ke.prototype.destroy=function(){this._openDraw=!1,this.drawTagDiv.style.display="none",this.drawTagDiv.style.zIndex=0,this.drawType="text",this.drawTagDiv.innerHTML="",this.tagDiv=null,this._tagTextCtrl.exit()};var Ee=ke;const Ie=function(e,t){const o=se.getViewerIntance();e||(e=[]),e.forEach((e,n)=>{if(e.state){var i=n+1;t.forEach((t,o)=>{e.state.uuid==t.state.uuid&&(i=o+1)}),e.state.index=i}e.isCorrect?o.addAnnotation(e.state):(o.addAnnotationSave(e),e.isCorrect=!0)}),_e()},_e=function(){const e=se.getViewerIntance();var t=e.isSectionViewEnabled();const o=ce.state.menuStore.menuChoose,n=ce.state.menuStore.menuChoose2;(t||["meter","tag"].includes(o)||["meterDistance","meterLength","meterAngle"].includes(n))&&setTimeout(()=>{e.setAnnotationsVisibility(0)},200)},Be=function(e){let t=[],o=ce.state.modelStore.nowConfigName;return t=e.filter(e=>!e.modelName||e.modelName==o),t},Ne={tagInfo:{},saveAllType:{},getTreeData:!1,isTagStatus:!1,operTagOpenId:"",willTagOpenId:"",lastFreeOper:!1,windowWhite:[],sendAllMsg(){this.sendCenter(1),this.sendCenter(2),this.sendCenter(3),this.sendCenter(4),this.sendCenter(5),this.sendCenter(6),this.sendCenter(7),this.sendCenter(8)},receiveAllMsg(e,t,o){let n=e||this.saveAllType||{},i=t||[];try{n=JSON.parse(n)}catch(r){n=n||{}}if(this.saveAllType=n,"fromWindow"==o&&(this.windowWhite=i),n.hasOwnProperty("8")&&!i.includes(8)&&n["8"])this.receiveCenter(n["8"]);else{i=[...i,...this.windowWhite];for(let e in n)!i.includes(1*e)&&n[""+e]&&this.receiveCenter(n[""+e])}},receiveCenter(e){const t=JSON.parse(e);(this.judgeCanReceive()||6==t.type)&&t&&(this.saveAllType[t.type]=e,1==t.type?(se._viewer.setBroadcastInfo(t.data),mc.$tag.ctrlDraw.resizeTags()):2==t.type?this.setButtomStatus(t):3==t.type?this.setCardStatus(t):4==t.type?this.setValueStatus(t):5==t.type?this.setTreeStatus(t):6==t.type?this.setTagStatus(t):7==t.type?this.setPositionStatus(t):8==t.type&&this.setMultiStatus(t))},sendCenter(e,t){let o=this;"sync"==nd_viewCtrl.viewMode&&(nd_viewCtrl&&!nd_viewCtrl.rtmSDK.isRtmOperate||(1==e?o.sendDirect(e,o.getBroadcast()):2==e?o.sendDirect(e,o.getButtomStatus()):3==e?o.sendDirect(e,o.getCardStatus()):4==e?o.sendDirect(e,o.getValueStatus()):5==e?o.sendDirect(e,o.getTreeStatus()):6==e?o.sendDirect(e,o.getTagStatus(t)):7==e?o.sendDirect(e,o.getPositionStatus()):8==e&&o.sendDirect(e,o.getMultiStatus())))},sendDirect(e,t){const o={type:e,data:t,terminal:"PC"};nd_viewCtrl&&nd_viewCtrl.rtmSDK&&nd_viewCtrl.rtmSDK.rtmSendMsg(o)},getBroadcast(){let e=se._viewer.getBroadcastInfo();return e},getButtomStatus(){return{showOneMenu:ce.state.menuStore.showOneMenu,menuChoose:ce.state.menuStore.menuChoose,menuChoose2:ce.state.menuStore.menuChoose2,menuChoose3:ce.state.menuStore.menuChoose3,showAllMenu:ce.state.menuStore.showAllMenu,distanceMeterIndx:mc.$distanceBtn.meterStartIdx,meterMeterType:mc.$meterBtn.nowMeterType}},setButtomStatus(e){ce.commit("menuStore/setShowAllMenu",e.data.showAllMenu),ce.commit("menuStore/setShowOneMenu",e.data.showOneMenu),ce.commit("menuStore/setMenuChoose",e.data.menuChoose),ce.commit("menuStore/setMenuChoose2",e.data.menuChoose2),ce.commit("menuStore/setMenuChoose3",e.data.menuChoose3),mc.$distanceBtn.meterStartIdx=e.data.distanceMeterIndx,mc.$meterBtn.nowMeterType=e.data.meterMeterType},getCardStatus(){return{structMenu:ce.state.menuStore.structMenu,unitMenu:ce.state.menuStore.unitMenu,showManyConfig:ce.state.menuStore.showManyConfig,showConfigContent:mc.$configSwitch.showCfgContent,scaleDialog:ce.state.modelStore.scaleDialog}},setCardStatus(e){ce.commit("menuStore/setStructMenu",e.data.structMenu),ce.commit("menuStore/setUnitMenu",e.data.unitMenu),ce.commit("menuStore/setShowManyConfig",e.data.showManyConfig),ce.commit("modelStore/setScaleDialog",e.data.scaleDialog),mc.$configSwitch.showCfgContent=e.data.showConfigContent},getValueStatus(){return{measureScale:ce.state.modelStore.measureScale,bgSetList:ce.state.modelStore.bgSetList,colorIdx:ce.state.modelStore.colorIdx,unit:ce.state.modelStore.unit,scale:mc.$scaleBtn.scale}},setValueStatus(e){ce.commit("modelStore/setUnitType",e.data.unit),ce.commit("modelStore/setInitBgSetList",e.data.bgSetList),ce.commit("modelStore/setShareBg",e.data.colorIdx),ce.commit("modelStore/setInitMeasureScale",e.data.measureScale),mc.$scaleBtn.scale=e.data.scale},getTreeStatus(){let e=mc.$structureTree.modelTreeData,t=["children","isChecked","isHighlight","uuid","isOpenChild","name"];return e=JSON.stringify(e,t),{treeData:q(e)}},setTreeStatus(e){let t=JSON.parse(X(e.data.treeData));mc.$structureTree.coverTreeData(t),t&&"{}"!=JSON.stringify(t)?this.getTreeData=!0:this.getTreeData=!1},getTagStatus(e){let t=e&&e.openTagId;return!e&&mc.$tag.tcChecktag&&(t=mc.$tag.curUuid),{tagShow:ce.state.tagStore.tagShow,openTagId:t,closeTag:e&&e.closeTag,tcChecktag:mc.$tag.tcChecktag,tcCheckTI:mc.$tag.tcCheckTI}},setTagStatus(e){mc.$tag.curUuid;let t=ce.state.modelStore.allTag;if(ce.commit("tagStore/setTagshow",e.data.tagShow),!nd_viewCtrl.rtmSDK.isRtmFreeOper||nd_viewCtrl.rtmSDK.isRtmOperate)if(this.willTagOpenId="",this.isTagStatus)this.operTagOpenId=e.data.openTagId||"";else{if(e.data.openTagId)return ee(t,e.data.openTagId)?void setTimeout(()=>{se.selectAnnotation(e.data.openTagId)},200):void(this.willTagOpenId=e.data.openTagId||"");mc.$tag.tcChecktag=e.data.tcChecktag,mc.$tag.tcCheckTI=e.data.tcCheckTI,e.data.closeTag&&mc.$eventBus.emit("closeTagSeeSub"),mc.$tag.tcChecktag||$(".taglayer-nd").css("display","none")}else this.lastFreeOper||(this.operTagOpenId=e.data.openTagId||"")},renderInitTag(e,t,o){se._viewer.removeAllAnnotations(),Ie(e,t,!0),mc.$tag.tcChecktag&&setTimeout(()=>{se._viewer.setAnnotationsVisibility(0),se._viewer.setAnnotationsVisibilityByUuid(1,o)},200)},getPositionStatus(){return{structScrollTop:mc.$structureTree.scrollTop,structWidth:mc.$structureTree.structWidth,structHeight:mc.$structureTree.structHeight}},setPositionStatus(e){mc.$structureTree.setTreeScroll(e.data.structScrollTop),mc.$structureTree.setTreeSize(e.data)},getMultiStatus(){return{cfgIdx:mc.$configSwitch.cfgIdx,modelPath:ce.state.modelStore.modelPath,modelSetInfo:ce.state.modelStore.modelSetInfo}},setMultiStatus(e){const t=this,o=mc.$configSwitch.cfgIdx;o!=e.data.cfgIdx?mc.$configSwitch.chooseCfg(e.data.cfgIdx,!0):t.receiveAllMsg(t.saveAllType,[8])},operateChange(e){if(e){if(nd_viewCtrl.rtmSDK.isRtmOperate)return;nd_viewCtrl.rtmSDK.isRtmOperate=!0,se._viewer.startBroadcast(!0),ce.commit("setRtmNeedCover",!1),this.sendAllMsg()}else{if(!nd_viewCtrl.rtmSDK.isRtmOperate)return;nd_viewCtrl.rtmSDK.isRtmOperate=!1,se._viewer.exitBroadcast(),ce.commit("setRtmNeedCover",!1)}},freeOperChange(e){nd_viewCtrl.rtmSDK.isRtmOperate||(nd_viewCtrl.rtmSDK.isRtmFreeOper=e,e?(se._viewer.exitBroadcast(),ce.commit("setRtmNeedCover",!1)):(se._viewer.startBroadcast(!1),ce.commit("setRtmNeedCover",!0),window.nd_rtmReceiveAllMsg(),(mc.$tag.tcStep0||mc.$tag.tcStep1)&&mc.$tag.cancelSave()))},startTagChange(){if("sync"!=nd_viewCtrl.viewMode)return!1;nd_viewCtrl.rtmSDK.isRtmOperate||(nd_viewCtrl.rtmSDK.lastFreeOper=nd_viewCtrl.rtmSDK.isRtmFreeOper,nd_viewCtrl.rtmSDK.isRtmFreeOper=!0,se._viewer.exitBroadcast(),ce.commit("setRtmNeedCover",!1),this.isTagStatus=!0)},endTagChange(){if("sync"!=nd_viewCtrl.viewMode)return!1;nd_viewCtrl.rtmSDK.isRtmOperate||this.isTagStatus&&(nd_viewCtrl.rtmSDK.lastFreeOper||(nd_viewCtrl.rtmSDK.isRtmFreeOper=!1,se._viewer.startBroadcast(!1),ce.commit("setRtmNeedCover",!0),window.nd_rtmReceiveAllMsg([6])),nd_viewCtrl.rtmSDK.isRtmFreeOper||nd_viewCtrl.rtmSDK.isRtmOperate||this.operTagOpenId&&setTimeout(()=>{se.selectAnnotation(this.operTagOpenId)},200),this.isTagStatus=!1)},closeTagChange(e){try{let t=mc.$tag.curUuid,o=!1;mc.$tag.tcChecktag&&(e.map(e=>{e.state.uuid==t&&(o=!0)}),o?setTimeout(()=>{se._viewer.setAnnotationsVisibility(0),se._viewer.setAnnotationsVisibilityByUuid(1,t)},100):mc.$tag.exitChecktag("click")),this.willTagOpenId&&ee(e,this.willTagOpenId)&&(setTimeout(()=>{se.selectAnnotation(this.willTagOpenId)},300),this.willTagOpenId="")}catch(t){}},judgeCanReceive(){return"sync"==nd_viewCtrl.viewMode&&(!(!nd_viewCtrl||!nd_viewCtrl.rtmSDK)&&(!nd_viewCtrl.rtmSDK.isRtmOperate&&!nd_viewCtrl.rtmSDK.isRtmFreeOper))},judgeCanWatch(){return"sync"!=nd_viewCtrl.viewMode||(!!nd_viewCtrl.rtmSDK.isRtmOperate||!!nd_viewCtrl.rtmSDK.isRtmFreeOper)}};var Ae=Ne;const Ve=e=>(Object(n["pushScopeId"])("data-v-05685948"),e=e(),Object(n["popScopeId"])(),e),Le={id:"v_message"},Pe=Ve(()=>Object(n["createElementVNode"])("div",{class:"shadow",style:{"z-index":"99"}},null,-1)),ze={class:"del-attr-tc tc-box",style:{"z-index":"100"}},$e={class:"ts-tcCnt"},Re={class:"txt"},Ue={class:"clearfix ts-tcBtn ts-tcBtn02"};function Fe(e,t,o,i,r,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Le,[Pe,Object(n["createElementVNode"])("div",ze,[Object(n["createElementVNode"])("div",$e,[Object(n["createElementVNode"])("p",Re,Object(n["toDisplayString"])(e.$store.state.msgTxt),1)]),Object(n["createElementVNode"])("div",Ue,[Object(n["createElementVNode"])("a",{onClick:t[0]||(t[0]=e=>i.cancleFunc())},Object(n["toDisplayString"])(e.$t("cancel")),1),Object(n["createElementVNode"])("a",{onClick:t[1]||(t[1]=e=>i.sureFunc())},Object(n["toDisplayString"])(e.$t("sure")),1)])])])}var He={name:"MsgTips",setup(){const e=Object(n["reactive"])({}),t=Object(n["toRefs"])(e),o=Object(l["useStore"])();function i(){o.commit("hideMsgTip")}function r(){o.commit("hideMsgTip"),o.state.msgFunc&&o.state.msgFunc()}return{...t,cancleFunc:i,sureFunc:r}}},We=(o("58d1"),o("b3f2")),Ge=o.n(We);const Ke=Ge()(He,[["render",Fe],["__scopeId","data-v-05685948"]]);var Je=Ke;const Ye={class:"tip mytip3"};function Qe(e,t,o,i,r,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["tip mytip",{b4:e.useClass2}])},[Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.msg),1)],2),[[n["vShow"],e.isShowTipMsg]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",Ye,[Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.msg),1)],512),[[n["vShow"],e.isShowTipMsg3]])])}var Ze={name:"Tips",setup(){const e=Object(n["reactive"])({msg:"",isShowTipMsg:!1,isShowTipMsg3:!1,useClass2:!1}),t=Object(n["toRefs"])(e),{proxy:o}=Object(n["getCurrentInstance"])(),i=(t,o)=>{e.msg=t,e.isShowTipMsg=!0,o&&(e.useClass2=!0),setTimeout(()=>{e.isShowTipMsg=!1,e.useClass2=!1},2e3)},r=t=>{e.msg=t,e.isShowTipMsg3=!0,setTimeout(()=>{e.isShowTipMsg3=!1},2e3)};return Object(n["onMounted"])(()=>{o.$eventBus.on("MsgTipEvent",i),o.$eventBus.on("MsgTipEvent2",(function(e){i(e,!0)})),o.$eventBus.on("MsgTipEvent3",r),o.$eventBus.on("MsgTipEvent4",t=>{e.msg=t,e.isShowTipMsg=!0})}),{...t}}};o("48c0");const Xe=Ge()(Ze,[["render",Qe],["__scopeId","data-v-8c8ccdd2"]]);var qe=Xe;const et=Object(n["createStaticVNode"])('<div class="waiter" data-v-7b2e8449><div class="bounce1" data-v-7b2e8449></div><div class="bounce2" data-v-7b2e8449></div><div class="bounce3" data-v-7b2e8449></div></div><div class="cover" data-v-7b2e8449></div>',2),tt=[et];function ot(e,t,o,i,r,c){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,tt,512)),[[n["vShow"],e.$store.state.showLoading]])}var nt={setup(){}};o("2ea3");const it=Ge()(nt,[["render",ot],["__scopeId","data-v-7b2e8449"]]);var rt=it;function ct(e,t,o,i,r,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"coor-cover",onMouseenter:t[0]||(t[0]=(...e)=>i.mourseBigMenu&&i.mourseBigMenu(...e)),onMouseleave:t[1]||(t[1]=(...e)=>i.mourseBigMenuLeave&&i.mourseBigMenuLeave(...e))},null,32)}var at={name:"",setup(){const e=Object(n["reactive"])({}),{proxy:t}=(Object(l["useStore"])(),Object(n["getCurrentInstance"])());Object(n["onBeforeMount"])(()=>{}),Object(n["onMounted"])(()=>{});const o=()=>{const e=document.querySelector(".pc-alert");e&&(e.style.display="none"),$(".ActiveCoordinate").hide()},i=()=>{const e=document.querySelector(".pc-alert");$(".ActiveCoordinate,.pc-alert").show(),e&&e.innerText&&e.innerText.trim().length>0?e.style.display="block":e&&(e.style.display="none")},r=Object(n["toRefs"])(e);return{...r,mourseBigMenu:o,mourseBigMenuLeave:i}}};o("04f4");const st=Ge()(at,[["render",ct],["__scopeId","data-v-027020cc"]]);var lt=st;const dt=e=>(Object(n["pushScopeId"])("data-v-087a2b04"),e=e(),Object(n["popScopeId"])(),e),mt={class:"ndp2-btn-ul",id:"bottomMainMenu"},ut=["selected"],ht=["track-name"],gt=["selected"],pt={key:4,id:"ico-color","track-name":"bgColor"},vt=["selected"],wt={key:5,id:"ico-unit","track-name":"unitChange"},ft=["selected"],bt={key:6,id:"ico-zoomwindow","track-name":"zoomwindow"},Ct=["selected"],St={key:7,id:"ico-home","track-name":"resetEye"},Ot={key:8,id:"ico-full","track-name":"ico-full",class:"no-select"},yt=["selected"],Tt=dt(()=>Object(n["createElementVNode"])("div",{class:"hd_title header"}," ",-1)),jt={class:"ndp2-win-frame beijingse close",style:{"z-index":"999"}},Mt={class:"win-content beijingse-lavel"},xt={class:"ndp2-beijingse-box"},Dt=dt(()=>Object(n["createElementVNode"])("span",{class:"black"},null,-1));function kt(e,t,o,i,r,c){const a=Object(n["resolveComponent"])("meter-btn"),s=Object(n["resolveComponent"])("distance-btn"),l=Object(n["resolveComponent"])("scale-btn"),d=Object(n["resolveComponent"])("card"),m=Object(n["resolveComponent"])("tag-write"),u=Object(n["resolveDirective"])("img-switch"),h=Object(n["resolveDirective"])("click-track"),g=Object(n["resolveDirective"])("tooltip");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:Object(n["normalizeClass"])([{hhiden:e.isLoading},"bottomWrap"]),onMouseenter:t[7]||(t[7]=(...e)=>i.mourseBigMenu&&i.mourseBigMenu(...e)),onMouseleave:t[8]||(t[8]=(...e)=>i.mourseBigMenuLeave&&i.mourseBigMenuLeave(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("div",{class:"ndp2-my-page bot-btn-card",onContextmenu:t[3]||(t[3]=Object(n["withModifiers"])(()=>{},["right","stop","prevent"]))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("ul",mt,[i.checkBtnExit("#ico-Tagging")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:0,id:"ico-Tagging","track-name":"tagNote",onMouseenter:t[0]||(t[0]=(...e)=>i.mourseMenu&&i.mourseMenu(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",null,null,512),[[u,["view-tool-comment","ico-Tagging"]]])],32)),[[h,i.chooseToTag],[g,e.$t("tagNote")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-measure")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:1,id:"ico-measure","track-name":"meter",onMouseenter:t[1]||(t[1]=(...e)=>i.mourseMenu&&i.mourseMenu(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",null,null,512),[[u,["view-tool-measure","ico-measure"]]])],32)),[[h,i.chooseToMeter],[g,e.$t("meter")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-structure")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:2,id:"ico-structure","track-name":"structureTree",onMouseenter:t[2]||(t[2]=(...e)=>i.mourseMenu&&i.mourseMenu(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:"struct"==i.menuStore.menuChoose},null,8,ut),[[u,["view-tool-layer","ico-structure"]]])],32)),[[h,i.chooseToStructureTree],[g,e.$t("chooseLayer")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-show")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:3,id:"ico-show","track-name":i.store.state.tagStore.tagShow?"hideNote":"showNote",class:"no-select"},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:!i.store.state.tagStore.tagShow},null,8,gt),[[u,["ico-set-hideMark","ico-show"]]])],8,ht)),[[h,i.hideTags],[g,e.$t(i.store.state.tagStore.tagShow?"hideNote":"showNote")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-color")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",pt,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:"bgColor"==i.store.state.menuStore.menuChoose},null,8,vt),[[u,["view-tool-bgcolor","ico-color"]]])])),[[h,i.chooseToBgColor],[g,e.$t("pcMtxtBgColor")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-unit")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",wt,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:"unitChange"==i.menuStore.menuChoose},null,8,ft),[[u,["view-tool-unit","unit-change"]]])])),[[h,i.chooseUnitChange],[g,e.$t("pcUnitIcon")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-zoomwindow")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",bt,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:"zoomwindow"==i.menuStore.menuChoose},null,8,Ct),[[u,["view-tool-scale","ico-zoomwindow"]]])])),[[h,i.chooseZoomwindow],[g,e.$t("pcMtxtZoom")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-home")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",St,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",null,null,512),[[u,["view-tool-reset","ico-home"]]])])),[[h,i.reset],[g,e.$t("pcMtxtHomeView")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-full")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Ot,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:i.store.state.isFull},null,8,yt),[[u,["all-screen","ico-full"]]])])),[[h,i.chooseFullScreen],[g,i.store.state.isFull?e.$t("pcMtxtFullexit"):e.$t("pcMtxtFull")]]):Object(n["createCommentVNode"])("",!0)],512),[[n["vShow"],i.store.state.menuStore.showOneMenu]]),Object(n["withDirectives"])(Object(n["createVNode"])(a,null,null,512),[[n["vShow"],"meter"==i.store.state.menuStore.menuChoose]]),Object(n["withDirectives"])(Object(n["createVNode"])(s,null,null,512),[[n["vShow"],"meterDistance"==i.store.state.menuStore.menuChoose2]])],544),[[n["vShow"],i.store.state.menuStore.showAllMenu]]),(Object(n["openBlock"])(),Object(n["createBlock"])(n["Teleport"],{to:e.teleportTo},[Object(n["withDirectives"])(Object(n["createVNode"])(l,{onMouseenter:i.mourseBigMenu,onMouseleave:i.mourseBigMenuLeave},null,8,["onMouseenter","onMouseleave"]),[[n["vShow"],i.modelStore.scaleDialog]]),Object(n["withDirectives"])(Object(n["createVNode"])(d,{class:"ndp2-bgColor-card",onClose:i.closeBgColor,onContextmenu:Object(n["withModifiers"])(i.rightEvent,["right","stop","prevent"])},{header:Object(n["withCtx"])(()=>[Tt]),default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",jt,[Object(n["createElementVNode"])("div",Mt,[Object(n["createElementVNode"])("div",xt,[Object(n["createElementVNode"])("ul",null,[Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])({select:1==i.modelStore.colorIdx||"num:0"==i.modelStore.colorIdx}),onClick:t[4]||(t[4]=e=>i.setBgColor(1))},[Dt,Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.$t("colorBlack")),1)],2),Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])({select:3==i.modelStore.colorIdx||"num:15921906"==i.modelStore.colorIdx})},[Object(n["createElementVNode"])("span",{class:"grey",onClick:t[5]||(t[5]=e=>i.setBgColor(3))}),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.$t("colorGrey")),1)],2),Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])({select:2==i.modelStore.colorIdx||"num:16776693"==i.modelStore.colorIdx})},[Object(n["createElementVNode"])("span",{class:"beige",onClick:t[6]||(t[6]=e=>i.setBgColor(2))}),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.$t("colorBeige")),1)],2)])])])])]),_:1},8,["onClose","onContextmenu"]),[[n["vShow"],"bgColor"==i.store.state.menuStore.menuChoose]]),Object(n["createVNode"])(m,{onTagClick:i.writeTag},null,8,["onTagClick"])],8,["to"]))],34)}var Et=o("61bc"),It=o.n(Et);const _t=e=>(Object(n["pushScopeId"])("data-v-dec900ee"),e=e(),Object(n["popScopeId"])(),e),Bt={class:"ndp2-btn-ul",id:"ico-measure-list"},Nt={class:"return-menu"},At=_t(()=>Object(n["createElementVNode"])("img",{src:It.a},null,-1)),Vt=[At],Lt=["selected"],Pt=["selected"],zt=["selected"],$t=["selected"],Rt=["selected"],Ut=["selected"],Ft=["selected"];function Ht(e,t,o,i,r,c){const a=Object(n["resolveDirective"])("click-track"),s=Object(n["resolveDirective"])("img-switch"),l=Object(n["resolveDirective"])("tooltip");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("ul",Bt,[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Nt,Vt)),[[a,i.returnOneMenu]]),i.checkBtnExit("#ico-coordinate")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:0,id:"ico-coordinate","track-name":"coordinate",onMouseenter:t[0]||(t[0]=(...e)=>i.mouseEnter&&i.mouseEnter(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:"coordinate"==e.nowMeterType},null,8,Lt),[[s,["view-tool-coordinate","ico-coordinate"]]])],32)),[[a,i.meterCoordinate],[l,e.$t("pcMtxtCoordinate")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-distance")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:1,id:"ico-distance","track-name":"distance",onMouseenter:t[1]||(t[1]=(...e)=>i.mouseEnter&&i.mouseEnter(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",null,null,512),[[s,["view-tool-distance","ico-distance"]]])],32)),[[a,i.meterDistance],[l,e.$t("pcMtxtDistance")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-edges")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:2,id:"ico-edges","track-name":"edges",onMouseenter:t[2]||(t[2]=(...e)=>i.mouseEnter&&i.mouseEnter(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:"measureEdges"==e.nowMeterType},null,8,Pt),[[s,["view-tool-segmentlength","ico-edges"]]])],32)),[[a,i.meterLength],[l,e.$t("pcMtxtEdges")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-continuousLine")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:3,id:"ico-continuousLine","track-name":"continuousLine",onMouseenter:t[3]||(t[3]=(...e)=>i.mouseEnter&&i.mouseEnter(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:"contour"==e.nowMeterType},null,8,zt),[[s,["view-tool-Continuouslength","ico-continuousLine"]]])],32)),[[a,i.meterContinuousLine],[l,e.$t("pcMtxtContinuousLine")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-continuousArea")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:4,id:"ico-continuousArea","track-name":"continuousArea",onMouseenter:t[4]||(t[4]=(...e)=>i.mouseEnter&&i.mouseEnter(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:"contourarea"==e.nowMeterType},null,8,$t),[[s,["view-tool-Area","ico-continuousArea"]]])],32)),[[a,i.meterContinuousArea],[l,e.$t("pcMtxtContinuousArea")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-radius")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:5,id:"ico-radius","track-name":"radius",onMouseenter:t[5]||(t[5]=(...e)=>i.mouseEnter&&i.mouseEnter(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:"radius"==e.nowMeterType},null,8,Rt),[[s,["view-tool-radius","ico-radius"]]])],32)),[[a,i.meterRadius],[l,e.$t("pcMtxtRadius")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-lineAngel")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:6,id:"ico-lineAngel","track-name":"lineangel",onMouseenter:t[6]||(t[6]=(...e)=>i.mouseEnter&&i.mouseEnter(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:"LineAngle"==e.nowMeterType},null,8,Ut),[[s,["view-tool-angel","ico-lineAngel"]]])],32)),[[a,i.meterLineAngel],[l,e.$t("pcMtxtLineAngel")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-meaScale")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:7,id:"ico-meaScale","track-name":"scale",onMouseenter:t[7]||(t[7]=(...e)=>i.mouseEnter&&i.mouseEnter(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:i.store.state.modelStore.scaleDialog},null,8,Ft),[[s,["view-tool-proportion","ico-meaScale"]]])],32)),[[a,i.meterScale],[l,e.$t("pcMtxtScale")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-measureClear")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:8,id:"ico-measureClear","track-name":"clear",onMouseenter:t[8]||(t[8]=(...e)=>i.mouseEnter&&i.mouseEnter(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",null,null,512),[[s,["view-tool-clear","ico-measureClear"]]])],32)),[[a,i.meterClear],[l,e.$t("clear")]]):Object(n["createCommentVNode"])("",!0)])])}var Wt={components:{},setup(){const e=Object(n["reactive"])({nowMeterType:"",showAreaMeter:!1,showBoundMeter:!1,showVolMeter:!1}),t=Object(l["useStore"])(),{menuStore:o,tagStore:i}=t.state,{proxy:r,appContext:c}=Object(n["getCurrentInstance"])();Object(n["nextTick"])(()=>{c.config.globalProperties.$meterBtn=e}),r.$eventBus.on("openTagPointSub",()=>{e.nowMeterType=""}),r.$eventBus.on("closeMeasure",()=>{a()}),Object(n["watch"])(()=>e.nowMeterType,e=>{"sync"!=nd_viewCtrl.viewMode||nd_viewCtrl.rtmSDK.isRtmOperate}),Object(n["onBeforeMount"])(()=>{}),Object(n["onMounted"])(()=>{});const a=()=>{t.commit("menuStore/setShowOneMenu",!0),t.commit("menuStore/setMenuChoose","none"),t.commit("menuStore/setMenuChoose2",""),t.commit("menuStore/setMenuChoose3",""),t.commit("menuStore/setShowManyConfig",!0),t.commit("modelStore/setScaleDialog",!1),se.setMeasureOpType(""),t.state.printMode||i.tagShow&&se._viewer.setAnnotationsVisibility(1),se._viewer.setOperatorByID("OpPan"),e.nowMeterType="",Ae.sendCenter(2)},s=()=>{t.state.modelStore._brepload?(se.setMeasureOpType("coordinate"),t.commit("menuStore/setMenuChoose","meter"),t.commit("menuStore/setMenuChoose2","coordinate"),t.commit("modelStore/setScaleDialog",!1),e.nowMeterType="coordinate",y("coordinateMeter"),Ae.sendCenter(2),Ae.sendCenter(3)):r.$eventBus.emit("MsgTipEvent3",r.$t("pcBrepNotEnd"))},d=()=>{t.state.modelStore._brepload?(se.setMeasureOpType("contour"),t.commit("menuStore/setMenuChoose","meter"),t.commit("menuStore/setMenuChoose2","contour"),t.commit("modelStore/setScaleDialog",!1),e.nowMeterType="contour",y("continuousLineMeter"),Ae.sendCenter(2),Ae.sendCenter(3)):r.$eventBus.emit("MsgTipEvent3",r.$t("pcBrepNotEnd"))},m=()=>{t.state.modelStore._brepload?(se.setMeasureOpType("contourarea"),t.commit("menuStore/setMenuChoose","meter"),t.commit("menuStore/setMenuChoose2","contourarea"),t.commit("modelStore/setScaleDialog",!1),e.nowMeterType="contourarea",y("continuousAreaMeter"),Ae.sendCenter(2),Ae.sendCenter(3)):r.$eventBus.emit("MsgTipEvent3",r.$t("pcBrepNotEnd"))},u=()=>{t.state.modelStore._brepload?(se.setMeasureOpType("LineAngle"),t.commit("menuStore/setMenuChoose","meter"),t.commit("menuStore/setMenuChoose2","LineAngle"),t.commit("modelStore/setScaleDialog",!1),e.nowMeterType="LineAngle",y("angelMeter"),Ae.sendCenter(2),Ae.sendCenter(3)):r.$eventBus.emit("MsgTipEvent3",r.$t("pcBrepNotEnd"))},h=()=>{t.state.modelStore._brepload?(se.setMeasureOpType(""),t.commit("menuStore/setMenuChoose","none"),t.commit("menuStore/setMenuChoose2","meterDistance"),t.commit("menuStore/setMenuChoose3",""),t.commit("modelStore/setScaleDialog",!1),r.$eventBus.emit("closeAttrBox"),e.nowMeterType="meterDistance",y("distanceMeter"),Ae.sendCenter(2),Ae.sendCenter(3)):r.$eventBus.emit("MsgTipEvent3",r.$t("pcBrepNotEnd"))},g=()=>{t.state.modelStore._brepload?(se.setMeasureOpType("measureEdges"),t.commit("menuStore/setMenuChoose","meter"),t.commit("menuStore/setMenuChoose2",""),t.commit("modelStore/setScaleDialog",!1),e.nowMeterType="measureEdges",y("edgesMeter"),Ae.sendCenter(2),Ae.sendCenter(3)):r.$eventBus.emit("MsgTipEvent3",r.$t("pcBrepNotEnd"))},p=()=>{t.state.modelStore._brepload?(t.commit("menuStore/setMenuChoose","meter"),t.commit("menuStore/setMenuChoose2",""),t.commit("modelStore/setScaleDialog",!1),e.nowMeterType="meterAngle",y("angelMeter"),Ae.sendCenter(2),Ae.sendCenter(3)):r.$eventBus.emit("MsgTipEvent3",r.$t("pcBrepNotEnd"))},v=()=>{t.state.modelStore._brepload?(se.setMeasureOpType("radius"),t.commit("menuStore/setMenuChoose","meter"),t.commit("menuStore/setMenuChoose2",""),t.commit("modelStore/setScaleDialog",!1),e.nowMeterType="radius",y("radiusMeter"),Ae.sendCenter(2),Ae.sendCenter(3)):r.$eventBus.emit("MsgTipEvent3",r.$t("pcBrepNotEnd"))},w=()=>{se.OpMeasureRelease(),se.setMeasureOpType(""),se.setOperatorByID("OpMeasure"),t.commit("menuStore/setMenuChoose2",""),t.commit("menuStore/setMenuChoose3",""),t.commit("modelStore/setScaleDialog",!1),e.nowMeterType=!1,y("clearMeter"),Ae.sendCenter(2),Ae.sendCenter(3)},f=()=>{se.setMeasureOpType(""),t.state.modelStore.scaleDialog?t.commit("modelStore/setScaleDialog",!1):(t.commit("modelStore/setScaleDialog",!0),r.$eventBus.emit("refreshScale")),e.nowMeterType="scale",y("scaleMeter"),Ae.sendCenter(2),Ae.sendCenter(3)},b=e=>E(e),C=t=>{S(),t&&(e[t]=!0)},S=()=>{e.showAreaMeter=!1,e.showBoundMeter=!1,e.showVolMeter=!1},O=Object(n["toRefs"])(e);return{...O,store:t,menuStore:o,returnOneMenu:a,meterDistance:h,meterCoordinate:s,meterContinuousLine:d,meterContinuousArea:m,checkBtnExit:b,meterLength:g,meterLineAngel:u,meterAngle:p,meterRadius:v,meterClear:w,meterScale:f,mouseEnter:C}}};o("6dc1");const Gt=Ge()(Wt,[["render",Ht],["__scopeId","data-v-dec900ee"]]);var Kt=Gt;const Jt=e=>(Object(n["pushScopeId"])("data-v-a649c59a"),e=e(),Object(n["popScopeId"])(),e),Yt={class:"ndp2-btn-ul"},Qt={class:"return-menu"},Zt=Jt(()=>Object(n["createElementVNode"])("img",{src:It.a},null,-1)),Xt=[Zt],qt={key:0,id:"ico-zoom","track-name":"zoomwindow"},eo=["selected"],to={key:1,id:"ico-zoomwindow","track-name":"zoom"},oo=["selected"];function no(e,t,o,i,r,c){const a=Object(n["resolveDirective"])("click-track"),s=Object(n["resolveDirective"])("img-switch"),l=Object(n["resolveDirective"])("tooltip");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("ul",Yt,[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Qt,Xt)),[[a,i.returnOneMenu]]),i.checkBtnExit("#ico-zoom")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",qt,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:"zoom"==e.selected},null,8,eo),[[s,["view-tool-scale","ico-zoom"]]])])),[[a,i.chooseZoom],[l,e.$t("pcMtxtTagImg")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-zoomwindow")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",to,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:"zoomwindow"==e.selected},null,8,oo),[[s,["view-tool-scale","ico-zoomwindow"]]])])),[[a,i.chooseZoomwindow],[l,e.$t("pcMtxtTagTxt")]]):Object(n["createCommentVNode"])("",!0)])])}var io={name:"",components:{},setup(){const e=Object(n["reactive"])({selected:""}),t=Object(l["useStore"])(),{proxy:o}=Object(n["getCurrentInstance"])();Object(n["onBeforeMount"])(()=>{}),Object(n["onMounted"])(()=>{});const i=()=>{e.selected="",se._viewer.setOperatorByID("OpPan"),t.commit("menuStore/setShowOneMenu",!0),t.commit("menuStore/setMenuChoose",""),t.commit("menuStore/setShowManyConfig",!0)},r=e=>E(e),c=()=>{"zoomwindow"!=e.selected?(e.selected="zoomwindow",se._viewer.setOperatorByID("OpZoomWindow")):(e.selected="",se._viewer.setOperatorByID("OpPan"))},a=()=>{"zoom"!=e.selected?(e.selected="zoom",se._viewer.setOperatorByID("OpZoom")):(e.selected="",se._viewer.setOperatorByID("OpPan"))},s=Object(n["toRefs"])(e);return{returnOneMenu:i,checkBtnExit:r,chooseZoomwindow:c,chooseZoom:a,...s}}};o("48be");const ro=Ge()(io,[["render",no],["__scopeId","data-v-a649c59a"]]);var co=ro;const ao=e=>(Object(n["pushScopeId"])("data-v-15e6b897"),e=e(),Object(n["popScopeId"])(),e),so={class:"ndp2-twrap"},lo={class:"ndp2-btn-ul",id:"ico-distance-list"},mo={class:"return-menu"},uo=ao(()=>Object(n["createElementVNode"])("img",{src:It.a},null,-1)),ho=[uo],go={key:0,id:"ico-smartdis","track-name":"smartDis"},po=["selected"],vo={key:1,id:"ico-pt2pt","track-name":"pointToPoint"},wo=["selected"],fo={key:2,id:"ico-pt2line","track-name":"pointToLine"},bo=["selected"],Co={key:3,id:"ico-line2line","track-name":"LineToLine"},So=["selected"],Oo={key:4,id:"ico-Lineargauge"},yo=["selected"],To={key:5,id:"ico-holeDist"},jo=["selected"],Mo={key:6,id:"ico-axis2pt"},xo=["selected"],Do={key:7,id:"ico-axis2line"},ko=["selected"];function Eo(e,t,o,i,r,c){const a=Object(n["resolveDirective"])("click-track"),s=Object(n["resolveDirective"])("img-switch"),l=Object(n["resolveDirective"])("tooltip");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",so,[Object(n["createElementVNode"])("ul",lo,[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",mo,ho)),[[a,i.returnOneMenu]]),i.checkBtnExit("#ico-smart1")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",go,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:10===e.meterStartIdx},null,8,po),[[s,["view-tool-smart","ico-smartdis"]]])])),[[a,i.smartDistance],[l,e.$t("pcMtxtSmartMeter")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-pt2pt")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",vo,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:0===e.meterStartIdx},null,8,wo),[[s,["view-tool-pointToPoint","ico-pt2pt"]]])])),[[a,i.meterP2P],[l,e.$t("pcMtxtP2P")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-pt2line")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",fo,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:1===e.meterStartIdx},null,8,bo),[[s,["view-tool-pointToLine","ico-pt2line"]]])])),[[a,i.meterP2L],[l,e.$t("pcMtxtP2L")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-line2line")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Co,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:2===e.meterStartIdx},null,8,So),[[s,["view-tool-lineToLine","ico-line2line"]]])])),[[a,i.distanceLine2line],[l,e.$t("pcMtxtL2L")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-Lineargauge")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Oo,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:3===e.meterStartIdx},null,8,yo),[[s,["view-tool-LinearMeasurement","ico-Lineargauge"]]])])),[[a,i.distanceLineargauge],[l,e.$t("pcMtxtLinear")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-holeDist")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",To,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:4===e.meterStartIdx},null,8,jo),[[s,["view-tool-centreOfCircle","ico-holeDist"]]])])),[[a,i.distanceCentreOfCircle],[l,e.$t("pcMtxtHoleDist")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-axis2pt")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Mo,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:5===e.meterStartIdx},null,8,xo),[[s,["view-tool-centerPointToPoint","ico-axis2pt"]]])])),[[a,i.distanceCentreToPoint],[l,e.$t("pcMtxtAxis2pt")]]):Object(n["createCommentVNode"])("",!0),i.checkBtnExit("#ico-axis2line")?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Do,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{selected:6===e.meterStartIdx},null,8,ko),[[s,["view-tool-centerPointToLine","ico-axis2line"]]])])),[[a,i.distanceAxis2line],[l,e.$t("pcMtxtAxisline")]]):Object(n["createCommentVNode"])("",!0)])])}var Io={name:"",components:{},setup(){const e=Object(n["reactive"])({meterStartIdx:-1}),t=Object(l["useStore"])(),{proxy:o,appContext:i}=Object(n["getCurrentInstance"])();Object(n["nextTick"])(()=>{i.config.globalProperties.$distanceBtn=e}),Object(n["watch"])(()=>e.meterStartIdx,e=>{("sync"!=nd_viewCtrl.viewMode||nd_viewCtrl.rtmSDK.isRtmOperate)&&Ae.sendCenter(4)}),o.$eventBus.on("openTagPointSub",()=>{e.meterStartIdx=-1}),o.$eventBus.on("closeMeasure",()=>{se.setMeasureOpType(""),t.commit("menuStore/setMenuChoose2",""),e.meterStartIdx=-1}),Object(n["onBeforeMount"])(()=>{}),Object(n["onMounted"])(()=>{});const r=()=>{se.setMeasureOpType(""),t.commit("menuStore/setMenuChoose","meter"),t.commit("menuStore/setMenuChoose2",""),e.meterStartIdx=-1,Ae.sendCenter(2)},c=e=>E(e),a=()=>{se.setMeasureOpType("bodyDistance"),e.meterStartIdx=10,Ae.sendCenter(2),y("smartdis")},s=()=>{se.setMeasureOpType("pt2pt"),e.meterStartIdx=0,Ae.sendCenter(2),y("distancePt2pt")},d=()=>{se.setMeasureOpType("PointToLine"),e.meterStartIdx=1,Ae.sendCenter(2),y("distancePt2line")},m=()=>{e.meterStartIdx=2,se.setMeasureOpType("LineToLine"),Ae.sendCenter(2),y("distanceLine2line")},u=()=>{e.meterStartIdx=3,se.setMeasureOpType("Lineargauge"),Ae.sendCenter(2),y("distanceLineargauge")},h=()=>{e.meterStartIdx=4,se.setMeasureOpType("holeDist"),Ae.sendCenter(2),y("distanceCentreOfCircle")},g=()=>{e.meterStartIdx=5,se.setMeasureOpType("AxisToPoint"),Ae.sendCenter(2),y("distanceCentreToPoint")},p=()=>{e.meterStartIdx=6,se.setMeasureOpType("AxisToLine"),Ae.sendCenter(2),y("distanceAxis2line")},v=()=>{$(".pc-alert").hide()},w=()=>{$(".pc-alert").show()},f=Object(n["toRefs"])(e);return{returnOneMenu:r,checkBtnExit:c,smartDistance:a,meterP2P:s,meterP2L:d,distanceLine2line:m,distanceLineargauge:u,distanceCentreOfCircle:h,distanceCentreToPoint:g,distanceAxis2line:p,onmouseoverTool:v,onmouseleaveTool:w,...f}}};o("bc8c");const _o=Ge()(Io,[["render",Eo],["__scopeId","data-v-15e6b897"]]);var Bo=_o,No=o("7863"),Ao=o.n(No);const Vo={class:"dialog_header"},Lo={class:"drag-right",ref:"dragRight"},Po={class:"drag-bottom",ref:"dragBottom"};function zo(e,t,o,i,r,c){const a=Object(n["resolveDirective"])("drag");return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"my-card",ref:"cardRef",onContextmenu:t[1]||(t[1]=Object(n["withModifiers"])(()=>{},["right","stop","prevent"]))},[Object(n["createElementVNode"])("header",Vo,[Object(n["renderSlot"])(e.$slots,"header",{},void 0,!0)]),o.hideClose?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",{key:0,class:"close-icon",src:Ao.a,onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e)),alt:""})),Object(n["renderSlot"])(e.$slots,"default",{},void 0,!0),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",Lo,null,512),[[n["vShow"],o.canDrag]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",Po,null,512),[[n["vShow"],o.canDrag]])],32)),[[a]])}var $o={name:"",props:["hideClose","canDrag","sizeDrag"],setup(e,t){const o=Object(n["reactive"])({});let i=Object(n["ref"])(null),r=Object(n["ref"])(null),c=Object(n["ref"])(null);Object(n["onBeforeMount"])(()=>{}),Object(n["onMounted"])(()=>{e.canDrag&&s()});const a=()=>{t.emit("close"),Ae.sendCenter(2),Ae.sendCenter(3)},s=()=>{i.value.onmousedown=function(e){let o=e.clientX,n=1*c.value.clientWidth;document.onmousemove=function(e){let t=n+e.clientX-o;e.clientX>document.body.clientWidth-10||t>=240&&(c.value.style.width=t+"px")},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,t.emit("sizeDrag",{cardWidth:c.value.style.width,cardHeight:c.value.style.height})}},r.value.onmousedown=function(e){let o=e.clientY,n=1*c.value.clientHeight;document.onmousemove=function(e){let t=n+e.clientY-o;e.clientY>document.body.clientHeight-10||t>=300&&(c.value.style.height=t+"px")},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,t.emit("sizeDrag",{cardWidth:c.value.style.width,cardHeight:c.value.style.height})}}},l=Object(n["toRefs"])(o);return{...l,close:a,dragRight:i,dragBottom:r,cardRef:c}}};o("b53e");const Ro=Ge()($o,[["render",zo],["__scopeId","data-v-0ef834b7"]]);var Uo=Ro;const Fo=e=>(Object(n["pushScopeId"])("data-v-2203e119"),e=e(),Object(n["popScopeId"])(),e),Ho={class:"ndp2-tc-scale"},Wo={class:"ndp2-dialog-model"},Go={class:"dialog-title dialog_header"},Ko={class:"dialog-content"},Jo={class:"win-content scale-box"},Yo=Fo(()=>Object(n["createElementVNode"])("span",{class:"fh"},":",-1)),Qo={class:"dialog-footer"};function Zo(e,t,o,i,r,c){const a=Object(n["resolveDirective"])("drag");return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ho,[Object(n["createElementVNode"])("div",Wo,[Object(n["createElementVNode"])("div",Go,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("scaleMeter"))+" ",1),Object(n["createElementVNode"])("img",{class:"dialog-cancel-img",onClick:t[0]||(t[0]=(...e)=>i.closeDialog&&i.closeDialog(...e)),src:Ao.a,alt:""})]),Object(n["createElementVNode"])("div",Ko,[Object(n["createElementVNode"])("div",Jo,[Object(n["createElementVNode"])("span",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.scale.min=t),maxlength:"10",onKeyup:t[2]||(t[2]=(...e)=>i.checkValid&&i.checkValid(...e))},null,544),[[n["vModelText"],e.scale.min]])]),Yo,Object(n["createElementVNode"])("span",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.scale.max=t),maxlength:"10",onKeyup:t[4]||(t[4]=(...e)=>i.checkValid&&i.checkValid(...e))},null,544),[[n["vModelText"],e.scale.max]])])])]),Object(n["createElementVNode"])("div",Qo,[Object(n["createElementVNode"])("button",{class:"dialog-cancel-btn dialog-btn",onClick:t[5]||(t[5]=(...e)=>i.closeDialog&&i.closeDialog(...e))},Object(n["toDisplayString"])(e.$t("cancel")),1),Object(n["createElementVNode"])("button",{class:Object(n["normalizeClass"])(["dialog-sure-btn dialog-btn",{no:0==e.validOK}]),onClick:t[6]||(t[6]=(...e)=>i.sureDialog&&i.sureDialog(...e))},Object(n["toDisplayString"])(e.$t("sure")),3)])])])),[[a],[n["vShow"],i.store.state.modelStore.scaleDialog]])}var Xo={setup(){const{proxy:e,appContext:t}=Object(n["getCurrentInstance"])(),o=Object(l["useStore"])(),i=Object(n["reactive"])({scale:{min:"1",max:"1"},baseScale:{},scaleDialog:!0,validOK:!0});Object(n["nextTick"])(()=>{t.config.globalProperties.$scaleBtn=i,Object(n["watch"])(()=>i.scale,()=>{("sync"!=nd_viewCtrl.viewMode||nd_viewCtrl.rtmSDK.isRtmOperate)&&Ae.sendCenter(4)},{immediate:!0,deep:!0})}),e.$eventBus.on("refreshScale",()=>{i.scale={min:"1",max:"1"},i.validOK=!0;try{var e=o.state.modelStore.measureScale,t=o.state.modelStore.nowConfig;if(e.length>0&&void 0!=e[t]){var n=e[t];i.scale.min=parseFloat(n.split(":")[0]),i.scale.max=parseFloat(n.split(":")[1])}}catch(r){}});const r=()=>{o.commit("modelStore/setScaleDialog",!1),Ae.sendCenter(3)},c=()=>{const t=i.scale.min,n=i.scale.max;a()?(o.commit("modelStore/setScaleDialog",!1),o.commit("modelStore/setMeasureScale",`${t}:${n}`),i.baseScale=JSON.parse(JSON.stringify(i.scale)),y("chooseScale"),Ae.sendCenter(3),Ae.sendCenter(4)):e.$eventBus.emit("MsgTipEvent",e.$t("rightScaleTips"))},a=()=>{const t=/^(0|[1-9]\d*)(\s|$|\.\d{1,2}\b)/,o=i.scale.min,n=i.scale.max;return 0!=Number(o)&&0!=Number(n)&&t.test(o)&&t.test(n)?i.validOK=!0:(e.$eventBus.emit("MsgTipEvent",e.$t("rightScaleTips")),i.validOK=!1),i.validOK};return{...Object(n["toRefs"])(i),store:o,checkValid:a,closeDialog:r,sureDialog:c}}};o("74f1");const qo=Ge()(Xo,[["render",Zo],["__scopeId","data-v-2203e119"]]);var en=qo;const tn={class:"tag-write-icon dialog_header"};function on(e,t,o,i,r,c){const a=Object(n["resolveDirective"])("drag");return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:Object(n["normalizeClass"])([{hhiden:e.isLoading},"tag-write-card"])},[Object(n["createElementVNode"])("div",tn,[Object(n["createElementVNode"])("div",{class:"can-click",onClick:t[0]||(t[0]=Object(n["withModifiers"])((...e)=>i.openTag&&i.openTag(...e),["prevent","stop"])),onMousedown:t[1]||(t[1]=Object(n["withModifiers"])(()=>{},["prevent","stop"])),onMousemove:t[2]||(t[2]=Object(n["withModifiers"])(()=>{},["prevent","stop"]))},null,32)])],2)),[[n["vShow"],e.showWrite],[a]])}var nn={name:"",setup(e,t){const o=Object(n["reactive"])({isLoading:!0,showWrite:!1}),{proxy:i}=(Object(l["useStore"])(),Object(n["getCurrentInstance"])());Object(n["onBeforeMount"])(()=>{}),Object(n["onMounted"])(()=>{i.$eventBus.on("loadComplete",()=>{o.isLoading=!1}),"sync"==nd_viewCtrl.viewMode&&(o.showWrite=!0)});const r=()=>{t.emit("tagClick")},c=Object(n["toRefs"])(o);return{openTag:r,...c}}};o("e1d4");const rn=Ge()(nn,[["render",on],["__scopeId","data-v-0e8d81f2"]]);var cn=rn,an={isFull:!1,unfullHeight:0,callFull:function(e){if(ce.state.isFull){t=document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.msExitFullscreen()&&t.msExitFullscreen()()}else{var t=document.documentElement;t.requestFullscreen?e.requestFullscreen():t.mozRequestFullScreen?e.mozRequestFullScreen():t.webkitRequestFullScreen?e.webkitRequestFullScreen():t.msRequestFullscreen()&&e.msRequestFullscreen()()}ce.commit("setFull",!ce.state.isFull)}},sn={name:"",components:{meterBtn:Kt,plusBtn:co,distanceBtn:Bo,card:Uo,scaleBtn:en,tagWrite:cn},setup(e,t){const o=Object(n["reactive"])({isOpenTag:!0,isLoading:!0,teleportTo:"body"}),i=Object(l["useStore"])(),{menuStore:r,modelStore:c}=i.state,{proxy:a,appContext:s}=Object(n["getCurrentInstance"])();Object(n["nextTick"])(()=>{s.config.globalProperties.$bottomBtn=a}),Object(n["watch"])(()=>r.menuChoose,(e,t)=>{("sync"!=nd_viewCtrl.viewMode||nd_viewCtrl.rtmSDK.isRtmOperate)&&"tag"!=e&&Ae.sendCenter(3)}),Object(n["watch"])(()=>r.showOneMenu,e=>{("sync"!=nd_viewCtrl.viewMode||nd_viewCtrl.rtmSDK.isRtmOperate)&&(e?se._viewer.onChangeCursor("OpPan"):se._viewer.onChangeCursor(""))}),Object(n["onBeforeMount"])(()=>{}),Object(n["onMounted"])(()=>{a.$eventBus.on("loadComplete",()=>{window.ndViewer=se._viewer,T(),o.isLoading=!1}),setTimeout(()=>{o.teleportTo="#vueMain"})});const d=e=>("#ico-measure"!=e||!c.hideItem.measure)&&(("#ico-structure"!=e||!c.hideItem.structTree)&&E(e)),m=(e,t)=>{if(!i.state.modelStore._geometryload)return void a.$eventBus.emit("MsgTipEvent3",a.$t("pcBrepNotEnd"));i.commit("menuStore/setShowManyConfig",!1),i.commit("menuStore/setShowOneMenu",!1),i.commit("menuStore/setMenuChoose","tag"),se.clearSelection(),se._viewer.setOperatorByID("OpPan"),se._viewer.setAnnotationsVisibility(0);const o=document.getElementById("tagTooltips");o&&(o.style.display="none"),Ae.sendCenter(1),f(),a.$eventBus.emit("addtagEvent",t),y("pcMtxtTagTxtImg")},u=()=>{y("zoom"),"zoomwindow"!=i.state.menuStore.menuChoose?(i.commit("menuStore/setMenuChoose","zoomwindow"),se._viewer.setOperatorByID("OpZoomWindow")):(i.commit("menuStore/setMenuChoose",""),se._viewer.setOperatorByID("OpPan")),f(),Ae.sendCenter(2),Ae.sendCenter(3)},h=()=>{i.commit("menuStore/setShowManyConfig",!1),i.commit("menuStore/setShowOneMenu",!1),i.commit("menuStore/setMenuChoose","meter"),se._viewer.setAnnotationsVisibility(0),se.clearSelection(),se.setOperatorByID("OpMeasure"),f(),Ae.sendCenter(2)},g=()=>{if(y("structureTree"),i.state.menuStore.structMenu)return i.commit("menuStore/setMenuChoose",""),i.commit("menuStore/setStructMenu",!1),Ae.sendCenter(2),Ae.sendCenter(3),void Ae.sendCenter(5);i.state.menuStore.structMenu||(i.commit("menuStore/setMenuChoose","struct"),i.commit("menuStore/setMenuChoose2",""),i.commit("menuStore/setMenuChoose3","")),i.commit("menuStore/setStructMenu",!0),i.commit("menuStore/setUnitMenu",!1),se._viewer.setOperatorByID("OpPan"),a.$eventBus.emit("closeCfg"),Ae.sendCenter(2),Ae.sendCenter(3),Ae.sendCenter(5)},p=()=>{y("unit"),se._viewer.setOperatorByID("OpPan"),"unitChange"!=r.menuChoose?(i.commit("menuStore/setMenuChoose","unitChange"),i.commit("menuStore/setUnitMenu",!0)):(i.commit("menuStore/setMenuChoose",""),i.commit("menuStore/setUnitMenu",!1)),i.commit("menuStore/setStructMenu",!1),Ae.sendCenter(2),Ae.sendCenter(3)},v=()=>{y("bgColor"),se._viewer.setOperatorByID("OpPan"),"bgColor"!=r.menuChoose?i.commit("menuStore/setMenuChoose","bgColor"):i.commit("menuStore/setMenuChoose",""),f(),Ae.sendCenter(2),Ae.sendCenter(3),setTimeout(()=>{Ae.sendCenter(4)})},w=e=>{e&&(o[e]=!0)},f=()=>{i.commit("menuStore/setStructMenu",!1),i.commit("menuStore/setUnitMenu",!1),i.commit("modelStore/setScaleDialog",!1)},b=(e,t)=>{var o=B(e);se._viewer.setBackGroundColor(o),i.commit("modelStore/setShareBg",e),y("bgColor"),Ae.sendCenter(4)},C=()=>{se.onResetCamera(),i.commit("menuStore/setMenuChoose",""),se._viewer.setOperatorByID("OpPan"),f(),y("reset"),Ae.sendCenter(2),Ae.sendCenter(3)},S=()=>{y("bgColor");const e=i.state.menuStore;"bgColor"==e.menuChoose&&i.commit("menuStore/setMenuChoose","")},O=()=>{if(y("hideshowNote"),i.state.modelStore.nowTag.length>0){o.isOpenTag=i.state.tagStore.tagShow;var e=!o.isOpenTag;se.setAnnotationsVisibility(e),i.commit("tagStore/setTagshow",e),o.isOpenTag=e,o.isShowHideSetting=!1}i.commit("menuStore/setMenuChoose",""),se._viewer.setOperatorByID("OpPan"),f(),Ae.sendCenter(2),Ae.sendCenter(3),Ae.sendCenter(6)};function T(){$(document).on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",(function(e){var t=document.webkitFullscreenElement||document.mozFullScreen||document.msFullscreenEnabled||document.fullscreen;t||i.commit("setFull",!1)}));var e=null;window.addEventListener("resize",()=>{e&&clearTimeout(e),e=setTimeout((function(){window.innerHeight<=an.unfullHeight&&i.commit("setFull",!1)}),500)})}const j=()=>{i.state.isFull?y("fullout"):(y("full"),an.unfullHeight=window.innerHeight),an.callFull(document.body)},M=()=>{const e=document.querySelector(".pc-alert");e&&(e.style.display="none"),$(".ActiveCoordinate").hide()},x=()=>{const e=document.querySelector(".pc-alert");$(".ActiveCoordinate,.pc-alert").show(),e&&e.innerText&&e.innerText.trim().length>0?e.style.display="block":e&&(e.style.display="none")},D=()=>{i.state.modelIsLoaded&&(a.$tag.tcStep0||a.$tag.tcStep1||a.$tag.tcChecktag||(se.clearSelection(),f(),i.commit("menuStore/setMenuChoose",""),i.commit("menuStore/setMenuChoose2",""),i.commit("menuStore/setMenuChoose3",""),Ae.startTagChange(),m(null,!0),i.commit("setRtmNeedCover",!1)))},k=(e,t)=>{},I=Object(n["toRefs"])(o);return{...I,store:i,menuStore:r,modelStore:c,checkBtnExit:d,chooseToTag:m,chooseToMeter:h,chooseToStructureTree:g,chooseZoomwindow:u,chooseUnitChange:p,chooseToBgColor:v,reset:C,mourseMenu:w,hideTags:O,closeBgColor:S,rightEvent:k,setBgColor:b,chooseFullScreen:j,mourseBigMenu:M,mourseBigMenuLeave:x,writeTag:D}}};o("36e8");const ln=Ge()(sn,[["render",kt],["__scopeId","data-v-087a2b04"]]);var dn=ln,mn=o("eec7"),un=o.n(mn);const hn=["title"],gn={class:"cfg-content"},pn=["onClick"],vn={class:"cfg-list-pic"},wn=["src"],fn={class:"cfg-bottom"},bn=["title"];function Cn(e,t,o,i,r,c){return i.store.state.modelStore.configs.length>1&&i.checkBtnExit("#ico-multipleSetting")?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"ndp2-my-page config-switch",onContextmenu:t[2]||(t[2]=Object(n["withModifiers"])(()=>{},["right","stop","prevent"]))},[Object(n["createElementVNode"])("div",{class:"cfg-top",onClick:t[0]||(t[0]=(...e)=>i.showCfgList&&i.showCfgList(...e))},[Object(n["createElementVNode"])("p",{title:e.configList[e.cfgIdx]&&e.configList[e.cfgIdx].Name},Object(n["toDisplayString"])(e.$t("pcNowConfig"))+"："+Object(n["toDisplayString"])(e.configList[e.cfgIdx]&&e.configList[e.cfgIdx].Name),9,hn),Object(n["createElementVNode"])("img",{class:Object(n["normalizeClass"])(["menu-ctrl-icon",{open:e.showCfgContent}]),src:un.a,alt:""},null,2)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",gn,[Object(n["createElementVNode"])("ul",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.configList,(o,r)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"cfg-list",key:r,onClick:e=>i.chooseCfg(r)},[Object(n["createElementVNode"])("div",vn,[Object(n["createElementVNode"])("img",{class:"cfg-img-cap",src:o.captureImg,onError:t[1]||(t[1]=(...e)=>i.imgLoadError&&i.imgLoadError(...e)),alt:""},null,40,wn)]),Object(n["createElementVNode"])("div",fn,[Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])(e.cfgIdx==r?"icon-radio-checked":"icon-radio-nocheck")},null,2),Object(n["createElementVNode"])("span",{title:o.Name,class:Object(n["normalizeClass"])({light:e.cfgIdx==r})},Object(n["toDisplayString"])(o.Name),11,bn)])],8,pn))),128))])],512),[[n["vShow"],e.showCfgContent]])],32)):Object(n["createCommentVNode"])("",!0)}var Sn={name:"",setup(){const e=Object(n["reactive"])({showCfgContent:!1,configList:[],cfgIdx:0,isStartToChange:!1,timer:null,needUpdateRtm:!1,rtmSwitchTimer:null,rtmSwitchTimer2:null}),t=Object(l["useStore"])(),{proxy:i,appContext:r}=Object(n["getCurrentInstance"])();Object(n["nextTick"])(()=>{r.config.globalProperties.$configSwitch=i}),Object(n["watch"])(()=>t.state.modelStore.configs,t=>{e.configList=t}),Object(n["onBeforeMount"])(()=>{}),Object(n["onMounted"])(()=>{i.$eventBus.on("loadAndInitSub",d),i.$eventBus.on("loadFail",m),i.$eventBus.on("closeCfg",()=>{e.showCfgContent=!1})});const c=(o,n)=>{const r=()=>{-1!==e.cfgIdx&&(t.commit("menuStore/setStructMenu",!1),t.commit("menuStore/setShowOneMenu",!0),t.commit("menuStore/setMenuChoose",""),t.commit("menuStore/setMenuChoose2",""),t.commit("menuStore/setMenuChoose3",""),t.commit("tagStore/setTagshow",!0),setTimeout(()=>{i.$eventBus.emit("cfgSwitchSub"),i.$eventBus.emit("closeTagSeeSub"),Ae.sendCenter(6),t.commit("modelStore/changeMultipleCfg",e.cfgIdx),e.isStartToChange=!0}))};clearTimeout(e.timer),e.timer=setTimeout(()=>{e.cfgIdx!=o&&(n&&(e.needUpdateRtm=!0),clearTimeout(e.rtmSwitchTimer),clearTimeout(e.rtmSwitchTimer2),e.cfgIdx=o,r())},200)},a=e=>{let n=event.srcElement;"en"==t.state.language?n.src=o("bc2f"):n.src=o("382f"),n.classList.add("nomsg")},s=()=>{e.showCfgContent=!e.showCfgContent,e.showCfgContent&&(t.commit("menuStore/setStructMenu",!1),"struct"==t.state.menuStore.menuChoose&&t.commit("menuStore/setMenuChoose","")),Ae.sendCenter(2),Ae.sendCenter(3)},d=()=>{const o=n=>{e.rtmSwitchTimer=setTimeout(()=>{se._viewer.getScreenCapture2((function(i){if(i){let e=t.state.modelStore.configs[n];nd_viewCtrl.configImgUpload&&nd_viewCtrl.configImgUpload(e,i),t.state.modelStore.configs[n].imgURL=i,t.state.modelStore.configs[n].captureImg=i}else e.rtmSwitchTimer2=setTimeout(()=>{o(n)},1e3)}))},1e3)};e.cfgIdx=t.state.modelStore.nowConfig,t.state.modelStore.configs[e.cfgIdx]&&!t.state.modelStore.configs[e.cfgIdx].imgURL&&o(e.cfgIdx),e.isStartToChange=!1,e.needUpdateRtm&&(Ae.receiveAllMsg(null,[8]),e.needUpdateRtm=!1),t.state.modelIsLoaded||Ae.sendCenter(6),Ae.sendCenter(3),Ae.sendCenter(5),Ae.sendCenter(8)},m=()=>{e.isStartToChange=!1},u=e=>E(e),h=Object(n["toRefs"])(e);return{...h,store:t,chooseCfg:c,showCfgList:s,checkBtnExit:u,imgLoadError:a}},methods:{}};o("bfb3");const On=Ge()(Sn,[["render",Cn],["__scopeId","data-v-57bdef93"]]);var yn=On;const Tn=["title"];function jn(e,t,o,i,r,c){const a=Object(n["resolveComponent"])("tree-node"),s=Object(n["resolveComponent"])("card");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{class:Object(n["normalizeClass"])(["ndp2-my-page structure-tree tree-card",{"struct-top":i.store.state.modelStore.configs.length<2||"explode"==i.menuStore.menuChoose}]),onClose:i.close,canDrag:!0,onSizeDrag:i.structSizeDrag,ref:"structCardRef"},{header:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("structureTree")),1)]),default:Object(n["withCtx"])(()=>[Object(n["withDirectives"])(Object(n["createElementVNode"])("div",{class:"struc-content",onScrollPassive:t[4]||(t[4]=(...e)=>i.getTreeScroll&&i.getTreeScroll(...e)),ref:"scrollRef"},[Object(n["withDirectives"])(Object(n["createElementVNode"])("ul",null,[Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])(["tree-node-item",{select:e.modelTreeData.isHighlight}])},[Object(n["createElementVNode"])("div",{class:"treenode-node-item",onContextmenu:t[3]||(t[3]=Object(n["withModifiers"])(t=>i.rightEvent(t,e.modelTreeData),["right","stop","prevent"]))},[e.modelTreeData.children&&e.modelTreeData.children.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",{key:0,class:Object(n["normalizeClass"])({"tree-node-open":e.modelTreeData.isOpenChild,"tree-node-close":!e.modelTreeData.isOpenChild}),onClick:t[0]||(t[0]=(...e)=>i.toggleOpen&&i.toggleOpen(...e))},null,2)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])(["tree-node-checkbox",{"ico-tree-checkedbox":e.modelTreeData.isChecked}]),onClick:t[1]||(t[1]=t=>i.toggleVisible(e.modelTreeData))},null,2),Object(n["createElementVNode"])("span",{class:"tree-node-txt",onClick:t[2]||(t[2]=t=>i.selectNode(e.modelTreeData)),title:e.modelTreeData.name},Object(n["toDisplayString"])(e.modelTreeData.name),9,Tn)],32),e.modelTreeData.isOpenChild&&e.modelTreeData.children&&e.modelTreeData.children.length?(Object(n["openBlock"])(),Object(n["createBlock"])(a,{key:Math.random(),treeData:e.modelTreeData,defaulOpen:!0,level:"2"},null,8,["treeData"])):Object(n["createCommentVNode"])("",!0)],2)],512),[[n["vShow"],e.hasData]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.$t("noTreeData2")),513),[[n["vShow"],!e.hasData]])],544),[[n["vShow"],!e.searchMode]])]),_:1},8,["onClose","onSizeDrag","class"])}const Mn=["lev","uuid"],xn=["onContextmenu"],Dn=["onClick"],kn={class:"tree-module"},En=["onClick"],In=["onClick","title"];function _n(e,t,o,i,r,c){const a=Object(n["resolveComponent"])("tree-node",!0);return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.treeData.children,(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["tree-node-item",{select:e.isHighlight}]),key:t,lev:o.level,uuid:e.uuid},[Object(n["createElementVNode"])("div",{class:"treenode-node-item",onContextmenu:Object(n["withModifiers"])(t=>i.rightEvent(t,e),["right","stop","prevent"])},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(i.getLevel(e),(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("b",{key:t}))),128)),Object(n["withDirectives"])(Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])({"tree-node-open":e.isOpenChild,"tree-node-close":!e.isOpenChild}),onClick:t=>i.toggleOpen(e)},null,10,Dn),[[n["vShow"],e.children.length>0]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("i",kn,null,512),[[n["vShow"],!e||!e.children.length]]),Object(n["createElementVNode"])("i",{onClick:t=>i.toggleVisible(e),class:Object(n["normalizeClass"])(["tree-node-checkbox",{"ico-tree-checkedbox":e.isChecked}])},null,10,En),Object(n["createElementVNode"])("span",{onClick:t=>i.selectNode(e),class:"tree-node-txt",title:e.name},Object(n["toDisplayString"])(e.name),9,In)],40,xn),e.children.length&&e.isOpenChild?(Object(n["openBlock"])(),Object(n["createBlock"])(a,{key:Math.random(),treeData:e,level:o.level+1},null,8,["treeData","level"])):Object(n["createCommentVNode"])("",!0)],10,Mn))),128))],512)),[[n["vShow"],e.reload]])}var Bn={name:"",props:["treeData","defaulOpen","level"],setup(e,t){const o=Object(n["reactive"])({reload:!0,childDom:[]}),{proxy:i}=Object(n["getCurrentInstance"])(),r=Object(l["useStore"])();Object(n["onMounted"])(()=>{r.state.clickIng||(e.defaulOpen?r.state.modelStore._geometryload&&e.treeData.children&&e.treeData.children.map(t=>{t.parent||(t.parent=e.treeData),!Ae.judgeCanWatch()&&Ae.getTreeData||(t.isRendered=!0,t.isChecked=!se.isObjectOrSomeChildHidden(t))}):e.treeData.children&&e.treeData.children.map(t=>{t.parent||(t.parent=e.treeData),e.treeData.isChecked?t.isChecked=!0:t.isChecked=!se.isObjectOrSomeChildHidden(t),e.treeData.isHighlight&&(t.isHighlight=!0)}))});const c=e=>{var t=0;while(null!==e.parent)t++,e=e.parent;return t},a=e=>{e.isRendered=!0,e.isOpenChild=!e.isOpenChild,Ae.sendCenter(5)},s=e=>{r.commit("setClickIng",!0),e.isChecked=!e.isChecked,e.isChecked?U(e):(R(e),H(e),G(e,!1)),F(e,e.isChecked),se.showObject(e,e.isChecked),se.render(),Ae.sendCenter(5)},d=e=>{let t=r.state.modelStore._highLightNode.indexOf(e.uuid);if(t>-1)return t>-1},m=e=>{e.isChecked&&("explode"==r.state.menuStore.menuChoose&&i.$eventBus.emit("structSelectSub"),e.isHighlight=!e.isHighlight,window.structflag=!0,e.isHighlight?(W(e),se.selectObject(e)):(H(e),se.deselectObject(e)),G(e,e.isHighlight),se.render(),i.$eventBus.emit("selectChange"),Ae.sendCenter(5))},u=(e,t)=>{t.isChecked&&(t.isHighlight||m(t))},h=Object(n["toRefs"])(o);return{...h,getLevel:c,toggleOpen:a,toggleVisible:s,checkIsHighLight:d,selectNode:m,rightEvent:u}}};o("39d9");const Nn=Ge()(Bn,[["render",_n],["__scopeId","data-v-c1f46cf6"]]);var An=Nn,Vn={name:"",components:{card:Uo,treeNode:An},setup(){const e=Object(n["reactive"])({modelTreeData:{},searchMode:!1,keyWord:"",hasData:!0,searchData:[],scrollTimer:null,scrollTop:0,structWidth:null,structHeight:null}),t=Object(l["useStore"])(),{menuStore:o}=t.state,{proxy:i,appContext:r}=Object(n["getCurrentInstance"])(),c=Object(n["ref"])(null),a=Object(n["ref"])(null);Object(n["nextTick"])(()=>{r.config.globalProperties.$structureTree=i}),Object(n["onMounted"])(()=>{i.$eventBus.on("loadBack",()=>{v()}),i.$eventBus.on("VolumnChange",()=>{if(Ae.judgeCanWatch()&&t.state.menuStore.structMenu){if(window.structflag)return void(window.structflag=!1);d()}}),i.$eventBus.on("structAllShow",()=>{e.modelTreeData.isChecked||p(e.modelTreeData)}),i.$eventBus.on("nodeShowChange",()=>{Ae.judgeCanWatch()&&v()}),i.$eventBus.on("clearSelectionSub",()=>{Ae.judgeCanWatch()&&(t.state.menuStore.structMenu&&v(),Ae.sendCenter(5))})}),Object(n["watch"])(()=>t.state.menuStore.structMenu,t=>{("sync"!=nd_viewCtrl.viewMode||nd_viewCtrl.rtmSDK.isRtmOperate)&&t&&(d(),e.structWidth=a.value.cardRef.clientWidth,e.structHeight=a.value.cardRef.clientHeight,Ae.sendCenter(7))});const s=t=>{t&&"{}"!=JSON.stringify(t)&&(Y(t,e.modelTreeData),i.$forceUpdate())},d=()=>{e.modelTreeData.isChecked=!se.isObjectOrSomeChildHidden(e.modelTreeData);let t=se.getSelectedObjects();e.modelTreeData.isHighlight=!1,G(e.modelTreeData,!1),t&&t.length>0&&t.map(e=>{w(e)})},m=()=>{e.keyWord="",h(),f()},u=()=>{e.modelTreeData.isOpenChild=!e.modelTreeData.isOpenChild,Ae.sendCenter(5)},h=()=>{f(),H(e.modelTreeData),G(e.modelTreeData,!1),""==e.keyWord?e.searchMode=!1:(e.searchData=k(e.keyWord,"name",e.modelTreeData),e.searchData.map(e=>{e.isChecked=!se.isObjectOrSomeChildHidden(e)}),e.searchMode=!0)},g=e=>{e.isChecked&&("explode"==t.state.menuStore.menuChoose&&i.$eventBus.emit("structSelectSub"),e.isHighlight=!e.isHighlight,window.structflag=!0,e.isHighlight?(W(e),se.selectObject(e)):(H(e),se.deselectObject(e)),G(e,e.isHighlight),se.render(),i.$eventBus.emit("selectChange"),Ae.sendCenter(5))},p=e=>{t.commit("setClickIng",!0),e.isChecked=!e.isChecked,e.isChecked?U(e):(R(e),H(e),G(e,!1)),F(e,e.isChecked),se.showObject(e,e.isChecked),se.render(),Ae.sendCenter(5)},v=()=>{nd_viewCtrl.shareInfo&&nd_viewCtrl.shareInfo.camerainfo?e.modelTreeData=se.getModelTree(!0)||{}:e.modelTreeData=se.getModelTree()||{},b(e.modelTreeData),e.modelTreeData&&Object.keys(e.modelTreeData).length>0?e.modelTreeData.isOpenChild=!0:e.hasData=!1,e.modelTreeData.isChecked=!se.isObjectOrSomeChildHidden(e.modelTreeData),e.modelTreeData.isRendered=!0,e.modelTreeData.level=1},w=t=>{K(e.modelTreeData,t)},f=()=>{t.commit("modelStore/setHighLightNode",[]),se.clearSelection()},b=e=>{e.isRendered&&(e.isHighlight=!1),e.children&&e.children.map(e=>{e.children&&e.isRendered&&C(e)})},C=e=>(e&&(e.isChecked=!se.isObjectOrSomeChildHidden(e)),e.isHighlight=!1,e.children.map(t=>{t.parent=e,t.children&&C(t)}),e),S=(e,t)=>{t.isChecked&&(t.isHighlight||g(t))},O=t=>{clearTimeout(e.scrollTimer),e.scrollTimer=setTimeout(()=>{e.scrollTop=t.target.scrollTop,Ae.sendCenter(7)},100)},y=t=>{e.scrollTop=t,Object(n["nextTick"])(()=>{c.value.scrollTop=t})},T=e=>{a.value.cardRef.style.width=e.structWidth||null,a.value.cardRef.style.height=e.structHeight||null},j=t=>{e.structWidth=t.cardWidth,e.structHeight=t.cardHeight,Ae.sendCenter(7)},M=()=>{const e=t.state.menuStore;"struct"==e.menuChoose&&t.commit("menuStore/setMenuChoose",""),t.commit("menuStore/setStructMenu",!1),i.$eventBus.emit("structSelectSub")},x=Object(n["toRefs"])(e);return{...x,close:M,exitSearch:m,goToSearch:h,store:t,menuStore:o,toggleVisible:p,selectNode:g,rightEvent:S,toggleOpen:u,coverTreeData:s,getTreeScroll:O,setTreeScroll:y,setTreeSize:T,structSizeDrag:j,scrollRef:c,structCardRef:a}}};o("42a6");const Ln=Ge()(Vn,[["render",jn],["__scopeId","data-v-5750d26d"]]);var Pn=Ln,zn=o("82fc"),$n=o.n(zn),Rn=o("dd36"),Un=o.n(Rn),Fn=o("9718"),Hn=o.n(Fn),Wn=o("0410"),Gn=o.n(Wn),Kn=o("0e31"),Jn=o.n(Kn);const Yn=e=>(Object(n["pushScopeId"])("data-v-04fec397"),e=e(),Object(n["popScopeId"])(),e),Qn=["uuid"],Zn={class:"ts-tcCnt dialog_header"},Xn={class:"Annotation2"},qn={class:"ndp2-textarea-box-SaveAnnotation"},ei={class:"textarea-img-wrap"},ti={class:"textarea-img-box"},oi=["src"],ni=["placeholder"],ii={id:"textarea-num"},ri={class:"ndp2-tool-box ndp2-tool-box-SaveAnnotation"},ci={class:"tool-title"},ai={class:"tool-list"},si={class:"pen-box"},li={class:"pathline-img"},di={class:"arrow-img"},mi={class:"straight-img"},ui={class:"circle-img"},hi={class:"rect-img"},gi={class:"line-box"},pi={class:"ndp2-line-spread-box"},vi={class:"line1-img"},wi={class:"line2-img"},fi={class:"line3-img"},bi={class:"color-box"},Ci={class:"ndp2-color-spread-box"},Si={class:"orange-img"},Oi={class:"blue-img"},yi={class:"green-img"},Ti={class:"grey-img"},ji={class:"add-img-box"},Mi=Yn(()=>Object(n["createElementVNode"])("div",{class:"line"},null,-1)),xi=["idx"],Di={key:1,class:"save-btn no"},ki={class:"img-box"},Ei=["src"],Ii=["title","innerHTML"],_i={class:"file-markSub",id:"calcAudioShow"},Bi={class:"file-markSub-main audio"},Ni={class:"main voice-box"},Ai={class:"voice-block",style:{cursor:"pointer"}},Vi={src:Gn.a,width:"12"},Li={src:Jn.a,width:"12"},Pi={class:"voice-number"};function zi(e,t,i,r,c,a){const s=Object(n["resolveComponent"])("bigimg"),l=Object(n["resolveComponent"])("confirm"),d=Object(n["resolveDirective"])("drag");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{style:{"z-index":"5"},onContextmenu:t[38]||(t[38]=Object(n["withModifiers"])(()=>{},["right","stop","prevent"]))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("section",{class:"sign-out",onClick:t[0]||(t[0]=(...e)=>a.cancelSave&&a.cancelSave(...e)),onMouseenter:t[1]||(t[1]=(...e)=>a.tagMouseEnter&&a.tagMouseEnter(...e))},Object(n["toDisplayString"])(e.$t("tagExit2")),545),[[n["vShow"],e.tcStep0]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("section",{class:"sign-out",onClick:t[2]||(t[2]=e=>a.exitChecktag("click")),uuid:r.store.state.tagStore.showonlyUuid,id:"tagShow"},Object(n["toDisplayString"])(e.$t("tagExitSee")),9,Qn),[[n["vShow"],e.tcChecktag]]),Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"tc-box_2 ts-tc comment-tc",id:"tcStep1",onMouseenter:t[34]||(t[34]=(...e)=>a.tagMouseEnter&&a.tagMouseEnter(...e))},[Object(n["createElementVNode"])("div",Zn,[Object(n["createElementVNode"])("div",Xn,[Object(n["createElementVNode"])("section",qn,[Object(n["createElementVNode"])("div",{class:"textarea-wrap",onMousedown:t[8]||(t[8]=(...e)=>a.inputMouse&&a.inputMouse(...e))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("div",ei,[Object(n["createElementVNode"])("div",ti,[Object(n["createElementVNode"])("img",{class:"textarea-img",src:e.imgSrc_add||o("0d85"),alt:"",onClick:t[3]||(t[3]=(...e)=>a.upimgClick&&a.upimgClick(...e))},null,8,oi)]),Object(n["createElementVNode"])("div",{class:"delete-img-btn",onClick:t[4]||(t[4]=(...e)=>a.onDelimg&&a.onDelimg(...e))},Object(n["toDisplayString"])(e.$t("tagDelImg")),1)],512),[[n["vShow"],e.tcTagImg]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("textarea",{id:"annoText",placeholder:e.$t("tagTips"),maxlength:"50",rows:"4","onUpdate:modelValue":t[5]||(t[5]=t=>e.annoText_add=t),onKeyup:t[6]||(t[6]=(...e)=>a.textChange&&a.textChange(...e)),onKeydown:t[7]||(t[7]=Object(n["withKeys"])((...e)=>a.textareaKeydown&&a.textareaKeydown(...e),["enter","native"]))},null,40,ni),[[n["vModelText"],e.annoText_add]]),Object(n["createElementVNode"])("div",ii,Object(n["toDisplayString"])(e.annoText_add.length)+"/50",1)],32)]),Object(n["createElementVNode"])("section",ri,[Object(n["createElementVNode"])("p",ci,Object(n["toDisplayString"])(e.$t("tagDraw")),1),Object(n["createElementVNode"])("div",ai,[Object(n["withDirectives"])(Object(n["createElementVNode"])("div",si,[Object(n["createElementVNode"])("img",{src:$n.a,alt:"",onClick:t[9]||(t[9]=e=>a.setSpreadType("pen"))})],512),[[n["vShow"],"pen"!=e.spreadType]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",{class:"ndp2-pen-spread-box",onClick:t[16]||(t[16]=Object(n["withModifiers"])((...e)=>a.none&&a.none(...e),["stop"]))},[Object(n["createElementVNode"])("img",{src:$n.a,alt:"",onClick:t[10]||(t[10]=e=>a.setSpreadType(""))}),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",li,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])(["pathline",{active:"0"==e.selectIdx}]),onClick:t[11]||(t[11]=Object(n["withModifiers"])(e=>a.tagPenClick(0,"point"),["stop"]))},null,2)],512),[[n["vShow"],"sync"!=e.viewMode]]),Object(n["createElementVNode"])("div",di,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])(["arrow",{active:"1"==e.selectIdx}]),onClick:t[12]||(t[12]=Object(n["withModifiers"])(e=>a.tagPenClick(1,"arrow"),["stop"]))},null,2)]),Object(n["createElementVNode"])("div",mi,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])(["straight",{active:"2"==e.selectIdx}]),onClick:t[13]||(t[13]=Object(n["withModifiers"])(e=>a.tagPenClick(2,"line"),["stop"]))},null,2)]),Object(n["createElementVNode"])("div",ui,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])(["circle",{active:"3"==e.selectIdx}]),onClick:t[14]||(t[14]=Object(n["withModifiers"])(e=>a.tagPenClick(3,"circle"),["stop"]))},null,2)]),Object(n["createElementVNode"])("div",hi,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])(["rect",{active:"4"==e.selectIdx}]),onClick:t[15]||(t[15]=Object(n["withModifiers"])(e=>a.tagPenClick(4,"rect"),["stop"]))},null,2)])],512),[[n["vShow"],"pen"==e.spreadType]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",gi,[Object(n["createElementVNode"])("img",{src:Un.a,alt:"",onClick:t[17]||(t[17]=e=>a.setSpreadType("line"))})],512),[[n["vShow"],"line"!=e.spreadType]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",pi,[Object(n["createElementVNode"])("img",{src:Un.a,alt:"",onClick:t[18]||(t[18]=e=>a.setSpreadType(""))}),Object(n["createElementVNode"])("div",vi,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])(["line1",{active:2==e.strokeWidth}]),onClick:t[19]||(t[19]=Object(n["withModifiers"])(e=>a.tagLineClick(2),["stop"]))},null,2)]),Object(n["createElementVNode"])("div",wi,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])(["line2",{active:4==e.strokeWidth}]),onClick:t[20]||(t[20]=Object(n["withModifiers"])(e=>a.tagLineClick(4),["stop"]))},null,2)]),Object(n["createElementVNode"])("div",fi,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])(["line3",{active:6==e.strokeWidth}]),onClick:t[21]||(t[21]=Object(n["withModifiers"])(e=>a.tagLineClick(6),["stop"]))},null,2)])],512),[[n["vShow"],"line"==e.spreadType]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",bi,[Object(n["createElementVNode"])("img",{src:Hn.a,alt:"",onClick:t[22]||(t[22]=e=>a.setSpreadType("color"))})],512),[[n["vShow"],"color"!=e.spreadType]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",Ci,[Object(n["createElementVNode"])("img",{src:Hn.a,alt:"",onClick:t[23]||(t[23]=e=>a.setSpreadType(""))}),Object(n["createElementVNode"])("div",Si,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])(["orange",{active:"rgb(255,99,2)"==e.strokeColor}]),onClick:t[24]||(t[24]=Object(n["withModifiers"])(e=>a.tagColorClick("rgb(255,99,2)"),["stop"]))},null,2)]),Object(n["createElementVNode"])("div",Oi,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])(["blue",{active:"rgb(34,131,249)"==e.strokeColor}]),onClick:t[25]||(t[25]=Object(n["withModifiers"])(e=>a.tagColorClick("rgb(34,131,249)"),["stop"]))},null,2)]),Object(n["createElementVNode"])("div",yi,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])(["green",{active:"rgb(29,231,96)"==e.strokeColor}]),onClick:t[26]||(t[26]=Object(n["withModifiers"])(e=>a.tagColorClick("rgb(29,231,96)"),["stop"]))},null,2)]),Object(n["createElementVNode"])("div",Ti,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])(["grey",{active:"rgb(51,51,51)"==e.strokeColor}]),onClick:t[27]||(t[27]=Object(n["withModifiers"])(e=>a.tagColorClick("rgb(51,51,51)"),["stop"]))},null,2)])],512),[[n["vShow"],"color"==e.spreadType]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",ji,[Object(n["createElementVNode"])("span",{class:Object(n["normalizeClass"])(["add-img",{active:e.activeImg}]),onClick:t[29]||(t[29]=(...e)=>a.upimgClick&&a.upimgClick(...e))},[Object(n["createElementVNode"])("input",{style:{display:"none"},type:"file",onChange:t[28]||(t[28]=(...e)=>a.onChange&&a.onChange(...e)),ref:"picSelectInput",class:"choosepic",accept:"image/gif,image/jpeg,image/jpg,image/png,image/bmp"},null,544)],2)],512),[[n["vShow"],e.showImgTag]]),Mi,Object(n["createElementVNode"])("div",{class:"revoke-box",onClick:t[30]||(t[30]=(...e)=>a.revokeClick&&a.revokeClick(...e))},[Object(n["createElementVNode"])("span",{class:Object(n["normalizeClass"])(["revoke",{no:!e.revokeEnable}])},null,2)]),Object(n["createElementVNode"])("div",{class:"empty-box",onClick:t[31]||(t[31]=(...e)=>a.clearClick&&a.clearClick(...e))},[Object(n["createElementVNode"])("span",{class:Object(n["normalizeClass"])(["empty",{no:!e.emptyEnable}])},null,2)])])]),Object(n["createElementVNode"])("section",{class:"btn-box",idx:e.selectIdx},[Object(n["createElementVNode"])("button",{class:"cancel-btn",onClick:t[32]||(t[32]=(...e)=>a.cancelSaveClick&&a.cancelSaveClick(...e))},Object(n["toDisplayString"])(e.$t("tagCancle")),1),e.saveEnable?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,class:"save-btn",onClick:t[33]||(t[33]=(...e)=>a.sureSave&&a.sureSave(...e))},Object(n["toDisplayString"])(e.$t("tagSave")),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",Di,Object(n["toDisplayString"])(e.$t("tagSave")),1))],8,xi)])])],32)),[[n["vShow"],e.tcStep1],[d]]),(Object(n["openBlock"])(),Object(n["createBlock"])(n["Teleport"],{to:e.teleportTo},[Object(n["withDirectives"])(Object(n["createElementVNode"])("section",{class:Object(n["normalizeClass"])(["Annotation-content",{"only-text":e.annoText_check&&!e.imgSrc_check}]),id:"calcPicTextShow"},[Object(n["withDirectives"])(Object(n["createElementVNode"])("div",ki,[Object(n["createElementVNode"])("img",{class:"Annotation-img",src:e.imgSrc_check,alt:"",onClick:t[35]||(t[35]=(...e)=>a.checkBigimg&&a.checkBigimg(...e))},null,8,Ei)],512),[[n["vShow"],e.imgSrc_check]]),Object(n["createElementVNode"])("p",{class:Object(n["normalizeClass"])(["Annotation-desc",{mt8:e.imgSrc_check&&e.annoText_check}]),title:e.annoText_check,innerHTML:e.annoText_check},null,10,Ii)],2),[[n["vShow"],e.tcCheckTI&&"checkaudio"!=e.tcType&&(e.imgSrc_check||a.judgeTxtEmpty(e.annoText_check))]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",_i,[Object(n["createElementVNode"])("div",Bi,[Object(n["createElementVNode"])("div",Ni,[Object(n["createElementVNode"])("div",{class:"voice",onClick:t[36]||(t[36]=(...e)=>a.audioClick&&a.audioClick(...e))},[Object(n["createElementVNode"])("label",Ai,[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",Vi,null,512),[[n["vShow"],!e.audioPlaying]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("img",Li,null,512),[[n["vShow"],e.audioPlaying]]),Object(n["createElementVNode"])("span",Pi,Object(n["toDisplayString"])(e.audioTime)+' "',1)])])])])],512),[[n["vShow"],e.tcCheckTI&&"checkaudio"==e.tcType]])],8,["to"])),Object(n["withDirectives"])(Object(n["createVNode"])(s,{ref:"bigImg","img-src":e.imgSrc_check,onClose:t[37]||(t[37]=t=>e.tcCheckBig=!1)},null,8,["img-src"]),[[n["vShow"],e.tcCheckBig]]),Object(n["createVNode"])(l,{ref:"msgBox"},null,512)],32)}var $i=o("04b3"),Ri=o.n($i);const Ui={class:"tag-my-dialog dialog",style:{}},Fi=Object(n["createElementVNode"])("div",{class:"dialog-cover"},null,-1),Hi={class:"ndp2-dialog-model",style:{width:"90%",height:"90%"}},Wi={class:"dialog-content"},Gi={class:"big-viewer-title"},Ki={class:"big-title"},Ji=["data-tip2"],Yi=Object(n["createElementVNode"])("img",{src:Ri.a,alt:""},null,-1),Qi=[Yi],Zi={class:"bigimg-content"},Xi={class:"drag-div",id:"drag-div",ref:"dragImgRef2"},qi=["src"];function er(e,t,o,i,r,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ui,[Fi,Object(n["createElementVNode"])("div",Hi,[Object(n["createElementVNode"])("div",Wi,[Object(n["createElementVNode"])("div",Gi,[Object(n["createElementVNode"])("div",Ki,Object(n["toDisplayString"])(e.$t("tagSeeBigImg")),1),Object(n["createElementVNode"])("div",{"data-tip2":e.$t("tagSeeSmallImg"),onClick:t[0]||(t[0]=(...e)=>i.closeClick&&i.closeClick(...e)),style:{cursor:"pointer"}},Qi,8,Ji)])]),Object(n["createElementVNode"])("div",Zi,[Object(n["createElementVNode"])("div",Xi,[Object(n["createElementVNode"])("img",{id:"bigImg",class:"big_img",style:Object(n["normalizeStyle"])([{cursor:"pointer"},{transform:"rotateY("+e.overturn+"deg) rotate("+e.rotate+"deg) scale("+e.scale+")"}]),src:o.imgSrc,ondragStart:"return false",alt:""},null,12,qi)],512)])])])}var tr={props:{imgSrc:{type:String,default:""}},setup(e){const{proxy:t}=Object(n["getCurrentInstance"])(),o=(Object(l["useStore"])(),Object(n["reactive"])({showBigModel:!1,rotate:0,overturn:0,scale:1})),i=Object(n["ref"])(null);Object(n["watch"])(()=>t.imgSrc,()=>{("sync"!=nd_viewCtrl.viewMode||nd_viewCtrl.rtmSDK.isRtmOperate)&&r()}),Object(n["onBeforeMount"])(()=>{}),Object(n["onMounted"])(()=>{});const r=()=>{o.rotate=0,o.overturn=0,o.scale=1,i.value&&i.value.removeAttribute("style"),c()};function c(){var e=new Image;e.src=t.imgSrc,e.onload=function(){i.value&&i.value.removeAttribute("style");var t=e.width,o=e.height,n=1,r=$("#bigImg").parent().width(),c=$("#bigImg").parent().height();$("#bigImg").css("cursor","default"),o>c||t>r?(n=Math.min(c/o,r/t),$("#bigImg").css("width",n*t)):$("#bigImg").css("width","auto"),o*n<c&&$("#bigImg").parent().css("top",(c-o*n)/2),$("#bigImg").css("opacity",1)}}const a=()=>{ctx.emit("closeSee")},s=e=>{o.rotate=o.rotate+e},d=()=>{180==o.overturn?o.overturn=0:o.overturn=180},m=e=>{e.wheelDelta>0?o.scale=o.scale+.05:o.scale=o.scale-.05,o.scale<1&&(o.scale=1),o.scale>5&&(o.scale=5)},u=()=>{o.showBigModel=!0,o.scale=1};function h(){t.$emit("close")}return{...Object(n["toRefs"])(o),closeClick:h,closeSee:a,rotateClick:s,rotateTurnClick:d,rollImg:m,resetModel:u,resetStyle:r,dragImgRef2:i}}};o("020b");const or=Ge()(tr,[["render",er]]);var nr=or,ir=o("c7ac"),rr=o.n(ir);const cr={key:0,class:"mask-box",style:{display:"flex"}},ar={class:"dialog-box"},sr={class:"warn-box"},lr=Object(n["createElementVNode"])("img",{class:"warn-img",src:rr.a,alt:""},null,-1),dr={class:"btn-box"};function mr(e,t,o,i,r,c){return e.isShow?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",cr,[Object(n["createElementVNode"])("div",ar,[Object(n["createElementVNode"])("img",{class:"close-img",src:Ri.a,alt:"",onClick:t[0]||(t[0]=(...e)=>i.closeClick&&i.closeClick(...e))}),Object(n["createElementVNode"])("div",sr,[lr,Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.msg),1)]),Object(n["createElementVNode"])("section",dr,[Object(n["withDirectives"])(Object(n["createElementVNode"])("button",{class:"cancel-btn",onClick:t[1]||(t[1]=(...e)=>i.cancelClick&&i.cancelClick(...e))},Object(n["toDisplayString"])(e.$t("cancel")),513),[[n["vShow"],e.showCancel]]),Object(n["createElementVNode"])("button",{class:"save-btn",onClick:t[2]||(t[2]=(...e)=>i.sureClick&&i.sureClick(...e))},Object(n["toDisplayString"])(e.showCancel?e.$t("save"):e.$t("sure")),1)])])])):Object(n["createCommentVNode"])("",!0)}var ur={setup(){const{proxy:e,appContext:t}=Object(n["getCurrentInstance"])();Object(n["nextTick"])(()=>{t.config.globalProperties.$msgBox=e});const o=Object(n["reactive"])({msg:"",isShow:!1,showCancel:!0});var i=()=>{},r=()=>{},c=()=>{};function a(e,t,o,n){this.msg=e,this.isShow=!0,this.showCancel=!0,i=t,r=o,c=n||o}function s(e,t){this.msg=e,this.isShow=!0,this.showCancel=!1,i=t,c=t}function l(){this.isShow=!1,i&&i()}function d(){this.isShow=!1,r&&r()}function m(){this.isShow=!1,c&&c()}return{...Object(n["toRefs"])(o),showMsg:a,showTip:s,cancelClick:d,sureClick:l,closeClick:m}}};const hr=Ge()(ur,[["render",mr]]);var gr=hr,pr={setup(){const{proxy:e,appContext:t}=Object(n["getCurrentInstance"])();Object(n["nextTick"])(()=>{t.config.globalProperties.$tag=e});const o=Object(l["useStore"])(),i=Object(n["reactive"])({language:"zh",selectIdx:"-1",teleportTo:"body",annoText_add:"",annoText_check:"",tcChecktag:!1,tcStep0:!1,tcStep1:!1,tagNum:0,tagNum_list:0,svgNum_list:[],ctrlDraw:{tagIdx:0,_openDraw:!1,setPen:function(){}},imgSrc_check:"",imgSrc_add:"",spreadType:"",colors:["rgb(255,99,2)","rgb(34,131,249)","rgb(29,231,96)","rgb(51,51,51)"],color:"orange",strokeColor:"rgb(255,99,2)",strokeWidth:2,activeImg:!1,tcTagImg:!1,tcCheckTI:!1,tcCheckBig:!1,saveEnable:!1,emptyEnable:!1,revokeEnable:!1,setTime0:null,curUuid:"",audioPlaying:!1,audioTime:0,audioObj:null,showImgTag:!0,tagSaveFlag:!1,viewMode:""}),r=Object(n["ref"])(null);var c=Object(n["computed"])(()=>o.state.nowTag);return Object(n["watch"])(()=>o.state.modelStore.delTagUuid,t=>{("sync"!=nd_viewCtrl.viewMode||nd_viewCtrl.rtmSDK.isRtmOperate||nd_viewCtrl.rtmSDK.isRtmFreeOper)&&i.curUuid&&e.exitChecktag()}),Object(n["watch"])(()=>i.annoText_add,t=>{t&&e.onCheckSaveEable()}),{...Object(n["toRefs"])(i),store:o,tagList:c,picSelectInput:r}},components:{bigimg:nr,confirm:gr},computed:{name(){return this.data}},mounted(){var e=document.getElementById("viewer");e&&(this.ctrlDraw=new Ee(e,this),window.ctrlDraw=this.ctrlDraw),this.$eventBus.on("loadComplete",()=>{this.listenersCoreviewEvent(),this.store.state.modelStore.annotationTagId&&setTimeout(()=>{se.selectAnnotation(this.store.state.modelStore.annotationTagId),this.store.commit("modelStore/setAnnotationTagId","")},300)}),this.language="zh",this.viewMode=nd_viewCtrl.viewMode,this.$eventBus.on("addtagEvent",e=>{this.tcChecktag&&this.exitChecktag(!0),this.showImgTag=!e,this.startDrawTag()}),this.$eventBus.on("closeTagSeeSub",e=>{this.exitChecktag()}),this.language="zh",setTimeout(()=>{this.teleportTo="#vueMain"})},methods:{pageChangedBack(){},listenersCoreviewEvent(){if(se._viewer){if(!this.listenered){this.listenered=!0;var e=this;this.addViewListen(),se._viewer.addEventListener("annotationSelectedEvent",t=>{this.audioObj&&this.audioObj.pause(),se.clearSelection(),e.tcType="",e.tcAnnotext=!1;const o=document.getElementById("tagCancelButton"),n=document.getElementById("tagSaveButton"),i=document.getElementById("tagTooltips");o&&(o.style.display="none"),n&&(n.style.display="none"),i&&(i.style.display="none"),se._viewer.setOperatorByID("OpPan"),se.setMeasureOpType(""),e.store.commit("menuStore/setMenuChoose",""),e.store.commit("menuStore/setMenuChoose2",""),e.store.commit("menuStore/setMenuChoose3",""),e.store.commit("menuStore/setShowOneMenu",!0),e.store.commit("menuStore/setStructMenu",!1),e.store.commit("menuStore/setUnitMenu",!1),e.store.commit("menuStore/setShowAllMenu",!1),e.store.commit("modelStore/setScaleDialog",!1),e.store.commit("menuStore/setShowManyConfig",!0),setTimeout(()=>{NDSWebViewer.SETTING.enableArrowKeyOp=!0},200),e.$eventBus.emit("openTagPointSub"),e.$eventBus.emit("closeShowSetting"),e.$eventBus.emit("closeMultiple"),e.$eventBus.emit("closeAttr"),e.curUuid=t.userData.uuid;var r=e.store.state.modelStore.nowTag,c=r.filter((function(t){return t.state.uuid==e.curUuid}))[0];e.curTagInfo=c,e.$emit("tagOperate","checkTag"),e.tcCheckTI=!1,e.imgSrc_check="",e.annoText_check="",e.tcCheckBig=!1;var a=c;"AudioAnno"==a.state.type?(e.tcCheckTI=!0,e.checkTag_Audio(a,a.imgURL)):(e.tcType="checkpic",e.imgSrc_check=a.imgURL,e.annoText_check=T(a.text||""),e.tcCheckTI=!0,e.store.state.modelStore.needOpenImg&&(e.checkBigimg(),e.store.commit("modelStore/setNeedOpenImg",!1))),e.tcStep0=!1,e.tcStep1=!1,e.imgSrc_add=!1,e.annoText_add=!1,e.tcTagImg=!1,e.chectTag_Normal(a),nd_viewCtrl&&nd_viewCtrl.beSelectTag&&nd_viewCtrl.beSelectTag(c.state.uuid)});var t=document.querySelector(".canvas2DBIM"),o=function(t){e.tcChecktag&&e.chectTag_Normal(e.curTagInfo)},n=function(){t.removeEventListener("touchmove",o),t.removeEventListener("touchend",n),t.removeEventListener("touchcancle",n)};t.addEventListener("touchstart",(function(){t.addEventListener("touchmove",o,!1),t.addEventListener("touchend",n,!1),t.addEventListener("touchcancle",n,!1)}),!1)}}else setTimeout(()=>{this.listenersCoreviewEvent()},500)},addViewListen(){var e=this,t=document.querySelector(".canvas2DBIM"),o=function(t){e.tcChecktag&&e.ctrlDraw.resizeTags()},n=function(){t.removeEventListener("mousemove",o),t.removeEventListener("mouseup",n)};t.addEventListener("mousedown",(function(){t.addEventListener("mousemove",o,!1),t.addEventListener("mouseup",n,!1)}),!1),t.removeEventListener("DOMMouseScroll",o),t.removeEventListener("mousewheel",o),t.addEventListener("mousewheel",o,!1),t.addEventListener("DOMMouseScroll",o,!1),document.addEventListener("keydown",(function(e){switch(e.keyCode){case 37:case 39:setTimeout(()=>{o()},200);break}}))},textareaKeydown(){let e=window.event||arguments[0];if("Enter"==e.key||"Enter"==e.code||13==e.keyCode)return e.returnValue=!1,!1},textChange(){setTimeout(()=>{this.onCheckSaveEable()},0)},onCheckSaveEable(){var e=!1;this.annoText_add.trim().length>0&&(e=!0);var t=!1;this.ctrlDraw.drawInfo.list.length>1&&(e=!0,t=!0),this.imgSrc_add&&(e=!0),this.saveEnable=e,this.revokeEnable=t,this.emptyEnable=t},onShowstep1(){this.tcStep0=!1,window._this=this,this.selectIdx="-1",this.spreadType="",this.setTime0&&clearTimeout(this.setTime0),this.tcStep1=!0,NDSWebViewer.SETTING.enableArrowKeyOp=!1,this.ctrlDraw._openDraw=!1,this.setTime0=setTimeout(()=>{$("#annoText").focus(),"sync"==this.viewMode?this.tagPenClick(1,"arrow"):this.tagPenClick(0,"point"),this.ctrlDraw._openDraw=!1},800)},setSpreadType(e){this.spreadType=e,this.activeImg=!1,this.ctrlDraw._openDraw=!!e},checkBigimg(){this.tcCheckBig=!0,this.$refs.bigImg.resetStyle()},revokeClick(){this.revokeEnable&&(this.ctrlDraw&&this.ctrlDraw.revoke(),this.onCheckSaveEable())},clearClick(){this.emptyEnable&&(this.ctrlDraw&&this.ctrlDraw.clear(),this.onCheckSaveEable())},upimgClick(){this.activeImg=!0,setTimeout(()=>{this.activeImg=!1},1e3),this.$refs.picSelectInput.value="",this.picSelectInput.dispatchEvent(new MouseEvent("click"))},none(){},onDelimg(){this.imgSrc_add="",this.tcTagImg=!1,this.activeImg=!1,this.onCheckSaveEable()},onChange(e){var t=this,o=e.target.files[0];if(o){var n=o.name.slice(o.name.lastIndexOf(".")+1,o.name.length);if(n=n.toLowerCase(),-1!=["gif","jpeg","jpg","png","bmp"].indexOf(n))if(o.size>5242880)this.$msgBox.showTip("图片过大");else{var i=new FileReader;i.onload=function(e){t.imgSrc_add=e.target.result,t.tcTagImg=!0,t.onCheckSaveEable()},i.readAsDataURL(o),t.activeImg=!1}else this.$msgBox.showTip("图片格式不正确")}},chectTag_Normal:function(e){this.ctrlDraw.showTags(e),this.showTag_only(e),this.tcChecktag=!0},resetTagMsg(){this.selectIdx=-1,this.imgSrc_add="",this.annoText_add="",this.tcTagImg=!1,this.saveEnable=!1,this.revokeEnable=!1,this.emptyEnable=!1},startDrawTag(e){this.setTime0&&clearTimeout(this.setTime0),this.store.commit("tagStore/setTagshow",!1),this.resetTagMsg(),this.showTagTips(),this.tcStep0=!0,this.tcTagImg=!1,this.imgSrc_add="",this.tcStep1=!1,this.imgSrc_add="",this.annoText_add="",this.tagNum=this.store.state.modelStore.allTag.length+1,this.saveEnable=!1,this.revokeEnable=!1,this.emptyEnable=!1,this.ctrlDraw.setPen("text"),this.ctrlDraw.openDraw(this.tagNum),this.tagNum_list=0,setTimeout(()=>{$("#annoText").focus()},500)},showTagTips(){const e=document.getElementById("tagTooltips");e.style.display="block",e.innerHTML=this.$t("choosePoint"),e.style.left="-1000px"},hideTagTips(){const e=document.getElementById("tagTooltips");e.style.display="none"},sureSave:function(){if(this.tagSaveFlag)return;var e=this;e.ctrlDraw.closeDraw(),e.tagSaveFlag=!0,$(".nd-selector-box").css("display","none");var t=e.ctrlDraw.drawInfo;t.text=encodeURIComponent(this.annoText_add);const o=()=>{e.tcStep0=!1,e.tcStep1=!1,e.tcTagImg=!1,e.annoText_add="",e.imgSrc_add="",e.store.commit("menuStore/setMenuChoose",""),NDSWebViewer.SETTING.enableArrowKeyOp=!0,e.tagSaveFlag=!1,this.$eventBus.emit("openTagPointSub")};if("yzp"==nd_viewCtrl.viewMode){var n=document.createElement("canvas");n.style.width=$("#t_container").width()+"px",n.style.height=$("#t_container").height()+"px",n.id="drawImg",$("#t_container").append(n),$(".ico-sign").hide();var i=new Image;i.setAttribute("crossOrigin","anonymous"),se._viewer.getScreenCapture((function(e){i.src=e})),i.onload=function(){n.width=i.width,n.height=i.height,n.getContext("2d").drawImage(i,0,0),ye((function(n){e.tcTagImg&&e.imgSrc_add?e.addTag(t,e.imgSrc_add,n):e.addTag(t,"",n),o()}))}}else e.tcTagImg&&e.imgSrc_add?e.addTag(t,this.imgSrc_add):e.addTag(t),o()},cancelSaveClick(){var e=this;this.onCheckSaveEable(),this.saveEnable?this.$msgBox.showMsg(this.$t("tagSaveConfirm2"),(function(){e.sureSave()}),(function(){e.cancelSave()})):this.cancelSave()},cancelSave(e){this.$emit("tagOperate","cancel"),this.hideTagTips(),this.ctrlDraw&&this.ctrlDraw.destroy(),this.tcChecktag=!1,this.store.commit("tagStore/setTagdrawing",!1),1!=e&&this.showTag(),this.saveEnable=!1,this.tcStep1=!1,this.tcStep0=!1,this.selectIdx=-1,this.tcType="",this.imgSrc_check="",this.imgSrc_add="",1!=e&&(this.store.commit("menuStore/setShowOneMenu",!0),this.store.state.printMode||(this.store.commit("menuStore/setShowManyConfig",!0),this.store.commit("menuStore/setShowAllMenu",!0),setTimeout(()=>{Ae.sendCenter(2),Ae.sendCenter(3),Ae.endTagChange()},200),"sync"==nd_viewCtrl.viewMode&&this.$eventBus.emit("openTagPointSub"))),NDSWebViewer.SETTING.enableArrowKeyOp=!0},exitChecktag(e){this.tcCheckBig=!1,this.tcChecktag=!1,this.tcCheckTI=!1,this.annoText_check="",this.imgSrc_check="",this.imgSrc_add="",this.curUuid="",se._viewer.resetSelectAnnotation(),this.audioObj&&this.audioObj.pause();try{this.ctrlDraw&&this.ctrlDraw.destroy(),this.store.commit("tagStore/setTagdrawing",!1),this.cancelSave(e)}catch(n){}if(1!=e){this.showTag();var t=document.querySelector(".imgAnnotationLogoSelected"),o=document.querySelectorAll(".imgAnnotationLogo");for(let e=0;e<o.length;e++){let n=o[e].getAttribute("uuid");t&&!n&&(n=t.getAttribute("uuid")),n&&se._viewer.setAnnotationType("annotationLogo",n)}this.store.commit("setShowAreaTips",!0),this.store.commit("menuStore/setShowAllMenu",!0),this.store.commit("menuStore/setShowManyConfig",!0),this.$eventBus.emit("openTagPointSub")}nd_viewCtrl&&nd_viewCtrl.exitTag&&nd_viewCtrl.exitTag(),e&&"click"==e&&Ae.sendCenter(6,{closeTag:!0})},showTag_only:function(e){this.hideTag(),se._viewer.setAnnotationsVisibilityByUuid(1,e.state.uuid),Ae.sendCenter(6,{openTagId:e.state.uuid})},hideTag:function(){this.store.state.modelStore.nowTag.length>0&&(se._viewer.setAnnotationsVisibility(0),this.store.commit("tagStore/setTagshow",!1))},showTag:function(){this.store.state.modelStore.nowTag.length>0&&(this.store.state.printMode||setTimeout(()=>{se._viewer.setAnnotationsVisibility(1)},200),this.store.commit("tagStore/setTagshow",!0))},checkTag_Audio:function(e,t){this.tcChecktag&&(this.tcChecktag=!1,this.curTagInfo=!1,this.tcType="",this.store.commit("tagStore/setTagdrawing",!1)),this.tcType="checkaudio";var o=this;this.audioPlaying=!1;try{this.audioTime=0,e.state.stime&&(this.audioTime=e.state.stime);var n=document.createElement("audio");n.pause(),n.src=t||e.src,n.load(),n.oncanplay=function(){},n.onloadedmetadata=function(){n.play(),n.paused||(o.audioPlaying=!0),n.paused&&document.querySelector(".voice").click()},n.addEventListener("ended",(function(){o.audioPlaying=!1}),!1),this.audioObj=n}catch(i){}},audioClick:function(){try{this.audioObj.currentTime=0,this.audioPlaying=!0,this.audioObj.play().catch(e=>{this.audioPlaying=!1})}catch(e){this.audioPlaying=!1}},tagPenClick(e,t){this.selectIdx=e,this.ctrlDraw&&(this.ctrlDraw._openDraw=!0,this.ctrlDraw.setPen(t))},tagLineClick(e){this.strokeWidth=e,this.ctrlDraw&&(this.ctrlDraw._openDraw=!0,this.ctrlDraw.setLineWidth(e))},tagColorClick(e){this.strokeColor=e,this.ctrlDraw&&(this.ctrlDraw._openDraw=!0,this.ctrlDraw.setColor(e))},addTag:function(e,t,o){var n=this,i=n.store.state.modelStore.allTag.length+1,r=be(e.cx,e.cy,e.cz),c=Se(r.x,r.y);function a(){e.index=i,se._viewer.addAnnotation(c),se._viewer.setAnnotationsVisibility(1),n.store.commit("modelStore/addTag",e),n.store.commit("tagStore/setTagshow",!0),n.exitDrawtag(),n.$emit("tagOperate","sure"),n.store.commit("menuStore/setShowOneMenu",!0),n.store.commit("menuStore/setShowManyConfig",!0),n.store.commit("menuStore/setShowAllMenu",!0),"sync"==nd_viewCtrl.viewMode&&window.nd_rtmReceiveAllMsg(),n.ctrlDraw&&n.ctrlDraw.destroy(),setTimeout(()=>{Ae.sendCenter(2),Ae.sendCenter(3),Ae.sendCenter(6)},300),Ae.endTagChange()}c=Object.assign({},c),c.version="5",c.uuid=z(),c.origiType="ImageAnno",e.state=c,e.modelName=this.store.state.modelStore.nowConfigName,"yzp"==nd_viewCtrl.viewMode&&(e.screenShotImg=o||""),t?nd_viewCtrl&&nd_viewCtrl.addPicTag&&nd_viewCtrl.addPicTag(e,t,(function(t){c.index=i,e.imgURL=t,a()})):nd_viewCtrl&&nd_viewCtrl.addTags&&nd_viewCtrl.addTags(e,"",(function(){c.index=i,a()}))},updateTagText(e,t){e==this.curUuid&&(this.annoText_check=t)},exitDrawtag(){se._viewer.displayViewBox(!0),this.ctrlDraw&&this.ctrlDraw.destroy(),this.curTagInfo=!1,this.store.commit("menuStore/setShowManyConfig",!0)},inputMouse(e){e.stopPropagation()},tagMouseEnter(){const e=document.getElementById("tagTooltips");e&&(e.style.left="-1000px")},judgeTxtEmpty(e){return!e.match(/^[ ]*$/)}}};o("876a");const vr=Ge()(pr,[["render",zi],["__scopeId","data-v-04fec397"]]);var wr=vr,fr=o("7143"),br=o.n(fr),Cr=o("25a4"),Sr=o.n(Cr);const Or={class:"header"},yr={class:"unit-content"},Tr={src:br.a,alt:""},jr={src:Sr.a,alt:""},Mr={src:br.a,alt:""},xr={src:Sr.a,alt:""},Dr={src:br.a,alt:""},kr={src:Sr.a,alt:""};function Er(e,t,o,i,r,c){const a=Object(n["resolveComponent"])("card");return Object(n["openBlock"])(),Object(n["createBlock"])(a,{class:"ndp2-my-page unit-card",onClose:i.close},{header:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",Or,Object(n["toDisplayString"])(e.$t("pcUnitIcon")),1)]),default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",yr,[Object(n["createElementVNode"])("div",{onClick:t[0]||(t[0]=e=>i.unitChange("")),class:"uni-flex flex-start-radio"},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",Tr,null,512),[[n["vShow"],""==i.modelStore.unit]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("img",jr,null,512),[[n["vShow"],""!=i.modelStore.unit]]),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.$t("pcUnitType1")),1)]),Object(n["createElementVNode"])("div",{onClick:t[1]||(t[1]=e=>i.unitChange("mm")),class:"uni-flex flex-start-radio"},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",Mr,null,512),[[n["vShow"],"mm"==i.modelStore.unit]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("img",xr,null,512),[[n["vShow"],"mm"!=i.modelStore.unit]]),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.$t("pcUnitType2")),1)]),Object(n["createElementVNode"])("div",{onClick:t[2]||(t[2]=e=>i.unitChange("in")),class:"uni-flex flex-start-radio"},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",Dr,null,512),[[n["vShow"],"in"==i.modelStore.unit]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("img",kr,null,512),[[n["vShow"],"in"!=i.modelStore.unit]]),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.$t("pcUnitType3")),1)])])]),_:1},8,["onClose"])}var Ir={name:"",components:{card:Uo},setup(){const e=Object(n["reactive"])({}),t=Object(l["useStore"])(),{modelStore:o}=t.state,{proxy:i}=Object(n["getCurrentInstance"])();Object(n["onBeforeMount"])(()=>{}),Object(n["onMounted"])(()=>{});const r=()=>{t.commit("menuStore/setUnitMenu",!1),t.commit("menuStore/setMenuChoose","")},c=e=>{switch(t.commit("modelStore/setUnitType",e),se&&se._viewer.setDispalyModelUnit(e),e){case"":y("pcUnitType1");break;case"mm":y("pcUnitType2");break;case"in":y("pcUnitType3");break;default:break}Ae.sendCenter(4)},a=Object(n["toRefs"])(e);return{...a,modelStore:o,unitChange:c,close:r}}};o("10d2");const _r=Ge()(Ir,[["render",Er],["__scopeId","data-v-b5a430be"]]);var Br=_r;let Nr,Ar=null,Vr=null;var Lr={install(e){Nr=e},components:{MsgTip:Je,Tips:qe,Loading:rt,BottomBtn:dn,configSwitch:yn,structureTree:Pn,tagCom:wr,unitChange:Br,coorCover:lt},props:{viewCtrl:{type:Object,default:{configNum:-1,bgColor:15921906,autoPlay:0,showShadow:!1,allowEditAttr:!1,tagRelateConfig:!0,configNum:-1,askAccuracy:!1,hideItem:{userdyAttr:!0,structTree:!0,pmi:!0,measure:!0},hidebtnCfg:[]}}},setup(){const e=Object(n["reactive"])({language:"en",askAlready:!1,unshowtag:!0,isLoaded:!1,broadTimer:null}),t=Object(l["useStore"])(),{menuStore:o}=t.state,{proxy:i}=Object(n["getCurrentInstance"])();Ar=i,Vr=t,window.nd_viewCtrl||(window.nd_viewCtrl=i.viewCtrl),Object(n["onMounted"])(()=>{e.language="zh",0!=nd_viewCtrl.default&&nd_viewCtrl.src&&i.loadViewer(),window.nd_loadViewer=i.loadViewer,window.nd_load2Dviewer=i.loadViewer;const o=async e=>{try{e&&nd_viewCtrl.initLoad&&nd_viewCtrl.initLoad(),!e&&nd_viewCtrl.loadFaild&&nd_viewCtrl.loadFaild(),e&&(O.init("2D"),setTimeout(()=>{he.readyForDom(()=>{t.commit("showBottomBtn"),t.commit("showCtrlBtn")})},0)),se._viewer.setDispalyModelUnit(t.state.modelStore.unit),i.initRTM(),t.commit("setModelIsLoaded",!0),i.$eventBus.emit("loadAndInitSub")}catch(o){}};i.$eventBus.on("loadBack",o)}),nd_viewCtrl.hideItem&&t.commit("modelStore/setHideItem",nd_viewCtrl.hideItem);const r=window.navigator.userAgent.toLocaleLowerCase(),c=/iphone|ipad|ipod/.test(r);function a(e){i.$eventBus||(i.$eventBus=Nr.$eventBus),s();var t=e.shareInfo,o=e.shareInfo&&e.shareInfo.camerainfo?e.shareInfo.camerainfo:null;se.loadModelView(e.modejsPath,(function(){setTimeout(()=>{se._viewer.onWindowResize()},2e3)}),e.configNum,o,t)}function s(o){const n=se.getViewerIntance();n.addEventListener("loadBegin",(function(){t.commit("setShowLoading",!1)})),n.addEventListener("geometryAllLoadedEvent",(function(){t.commit("setShowLoading",!1),i.$eventBus.emit("loadBack",!0),i.$eventBus.emit("loadComplete"),Ie(t.state.modelStore.nowTag,t.state.modelStore.allTag),t.commit("modelStore/setGeometryload",!0),nd_viewCtrl.loadedEvent&&nd_viewCtrl.loadedEvent({geometry:!0,pmi:t.state.modelStore._pmiload,brep:t.state.modelStore._brepload}),setTimeout(()=>{this.unshowtag=!1},1e3)})),n.addEventListener("loadError",(function(e){i.$eventBus.emit("MsgTipEvent",i.$t("modelLoadErr")),t.commit("setShowLoading",!1),i.$eventBus.emit("loadBack",!1),i.$eventBus.emit("loadFail")})),n.addEventListener("clearSelection",(function(e){i.$eventBus.emit("clearSelectionSub")})),n.addEventListener("measureTimes",(function(e){"sync"==nd_viewCtrl.viewMode&&e.times>19&&i.$eventBus.emit("MsgTipEvent",i.$t("measureTimesErr")),nd_viewCtrl.measureTimes&&nd_viewCtrl.measureTimes(e)})),n.addEventListener("BrepInfoEvent",(function(e){t.commit("modelStore/setBrepload",!0),nd_viewCtrl.loadedEvent&&nd_viewCtrl.loadedEvent({geometry:t.state.modelStore._geometryload,pmi:t.state.modelStore._pmiload,brep:!0})})),n.addEventListener("selectObjectEvent",(function(e){i.$eventBus.emit("selectObjectEvent",se.getSelectedObjects())})),n.addEventListener("deselectObjectEvent",(function(e){i.$eventBus.emit("deselectObjectEvent")})),n.addEventListener("annotationSelectedEvent",(function(e){i.$eventBus.emit("resetAll")})),n.addEventListener("BodySelectionChangeEvent",(function(e){const o=se.getSelectedObjects();t.state.menuStore.structMenu&&t.state.menuStore.attrMenu&&1==o.length&&o[0].children.length<1&&i.$eventBus.emit("structNodeChoose",o)})),n.addEventListener("broadcastEvent",(function(t){if("sync"==nd_viewCtrl.viewMode)try{if(e.broadTimer)return;e.broadTimer=setTimeout(()=>{clearInterval(e.broadTimer),e.broadTimer=null,i.$tag.tcStep0||i.$tag.tcStep1||nd_viewCtrl.rtmSDK.joinStatus&&Ae.sendCenter(1)},100)}catch(o){}}))}return c&&window.addEventListener("resize",(function(){t.state.isShowBottomBtn=!t.state.isShowBottomBtn,t.state.isShowCtrlBtn=!t.state.isShowCtrlBtn,setTimeout(()=>{t.state.isShowBottomBtn=!t.state.isShowBottomBtn,t.state.isShowCtrlBtn=!t.state.isShowCtrlBtn},0)})),{...Object(n["toRefs"])(e),store:t,menuStore:o,loadViewer2:a}},methods:{loadViewer(e){void 0==e&&(e=nd_viewCtrl.src),de(e,(function(e){Vr.commit("setOpt",e),Ar.loadViewer2(e.opt)}))},async initRTM(){if("sync"!=nd_viewCtrl.viewMode)return!1;se._viewer.startBroadcast(nd_viewCtrl.rtmSDK.isRtmOperate),this.isLoaded||(this.store.commit("setRtmNeedCover",!nd_viewCtrl.rtmSDK.isRtmOperate),nd_viewCtrl.rtmSDK.isRtmOperate&&(Ae.sendCenter(1),Ae.sendCenter(2),Ae.sendCenter(3),Ae.sendCenter(4),Ae.sendCenter(5),Ae.sendCenter(6),Ae.sendCenter(7)),nd_viewCtrl.rtmSDK.isRtmOperate||window.nd_rtmReceiveAllMsg()),this.isLoaded=!0}}};o("b7f6");const Pr=Ge()(Lr,[["render",s],["__scopeId","data-v-6cf0b7d5"]]);var zr=Pr,$r=o("02aa"),Rr=o("9cc1"),Ur={cancel:"Cancel",save:"Save",sure:"Confirm",search:"Search",back:"Back",exit:"Exit",del:"Delete",searchTree:"Search Designs",searchTree2:"Search Designs Part",gUnit:"",areaBoxTxt:"Area：",volumnBoxTxt:"Volume：",areaAllBoxTxt:"Total Area：",volumnAllBoxTxt:"Total Volume：",premierTxt:"Perimeter",noTxt:"NO.",sizeTxt:"Size",chooseToLayout:"Layer",chooseLayer:"Layer",chooseBgColor:"Backgroud Color",scaleMeter:"Scale",accuracyInfo:"The model is too complex to load, you are advised to choose low precision mode to view. ",lowAccuracy:"Low precision mode",highAccuracy:"High precision mode",resetEye:"Home view",reset:"Reset",hideNote:"Hide comment",showNote:"Show comment",tagNote:"Comment",meter:"Measure",structureTree:"Designs",showHide:"Show and Hide",chooseMeterType:"Forms of Measurement",chooseMeterDistanceType:"Forms of Distance",chooseMeterLengthType:"Forms of Length",chooseMeterAngleType:"Forms of Angle",chooseMeterAreaType:"Forms of Area",chooseMeterVolumnWeightType:"Forms of Volume",chooseTagType:"Forms of Markup",distance:"Distance",pointToPoint:"Point to Point",pointToLine:"Point to Straight Line",pointToFace:"Point to Surface",lineToLine:"Line to Straight Line",circleDistance:"Center Distance",dotToPoint:"Axial-hole to Point",dotToLine:"Axial-hole to Straight Line",length:"Length",meterLine:"Line Meaurement ",circleLength:"Perimeter",angle:"Angle",lineToAngle:"Angle between straight lines",radius:"Radius",area:"Area",clear:"Clear",chooseStructureTree:"Designs",noTreeData:"No Result Found",noTreeData2:"No Data",chooseAttrType:"From of Properties",totalAttr:"Total Properties",selAttrDetail:"Choose a entity",totalattrDetail:"Total Properties Details",normalAttr:"General",selfAttr:"User-defined",noAttr:"No Attribute Found",faceFace:"No Attribute Found",volumn:"Volume",weight:"Weight",boxVolume:"Volume of Bounding Box",objNum:"Numbers of entities",partNum:"Numbers of parts",pmiNum:"Numbers of PMI",sureToDelAttr:"Sure to delete the Properties?",chooseShowType:"Display Mode",serveErrorTips:"Exception",dataIsNeed:"Required",noChildCfg:"缺少当前子菜单配置",choosePoint:"Click to choose the position of the comment.",tagTitle:"Markup",tagholder:"Please enter your descriptions here. (optional)",tagPoint:"point",tagText:"text",tagDraw:"draw",tagArrow:"arrow",tagLine:"line",tagCircle:"circle",tagRect:"rect",tagSave:"Save",tagCancle:"Cancel",tagTip1:"Do not enter illegal characters",tagTip2:"The picture is too large",tagTip3:"Invalid picture format",tagTip4:"Please select a picture",tagTip5:"Select",loadError:"Loading error",pcNowConfig:"Current layout",pcStructLv:"Desigh hierarchy",chooseMateria2:"请选择属性类型",pcInpAttrName3:"属性名重复",pcMtxtHomeView:"Home view",pcMtxtTagTxt:"Text",pcMtxtTagImg:"Picture",pcMtxtTagImg2:"Picture",pcMtxtTagTxtImg:"Picture & Text",pcMtxtSmartMeter:"Intelligent measurement",pcMtxtDistance:"Distance",pcMtxtLength:"Length",pcMtxtRadius:"Radius",pcMtxtVolWet:"Volume and weight",pcMtxtBox:"Bounding box",pcMtxtP2P:"Point to point",pcMtxtP2L:"Point to straight line",pcMtxtP2F:"Point to surface",pcMtxtL2L:"Line to line",pcMtxtL2F:"Line to surface",pcMtxtF2F:"Surface to surface",pcMtxtCpoint:"Center distance",pcMtxtX2P:"Axial-hole to point",pcMtxtX2L:"Axial-hole to line",pcMtxtX2F:"Axial-hole to surface",pcMtxtLmeter:"Line measurement",pcMtxtPmeter:"Perimeter",pcMtxtAngleL:"Angle between straight lines",pcMtxtAngleF:"Angle between planes",pcMtxtAngleLF:"Angle between line and plane",pcMtxtToF:"Choose a plane",pcMtxtToSingle:"Choose a entity",pcMtxtToAllPart:"Total entity",pcMtxtToAllBox:"Total bounding box",pcMtxtToAllAttr:"Total properties",pcMtxtTolArea:"Total area",pcMtxtIplus:"Zoom extents",pcCoutTip1:"Clockwise rotation",pcCoutTip2:"Contrarotate",pcCoutTip3:"Maximize",pcCoutTip4:"Mirror",pcCoutTip5:"Minimize",pcCursorTip:"Click to select the object",pcAllVol:"Total volume",pcAllWeight:"Total weight",pcUnitIcon:"Unit settings",pcUnitType1:"Default unit",pcUnitType2:"Metric unit(mm)",pcUnitType3:"Imperial unit(in)",rightScaleTips:"Please fill out the correct scale",pcMtxtCoordinate:"ID point",pcMtxtEdges:"Length",pcMtxtContinuousLine:"Continuous lengths",pcMtxtContinuousArea:"Area",pcMtxtLineAngel:"Angle",pcMtxtScale:"Scale",pcMtxtLinear:"linear measurement",pcMtxtHoleDist:"Center distance",pcMtxtAxis2pt:"Center to point",pcMtxtAxisline:"Center to line",pcMtxtBgColor:"Backgroud",pcMtxtZoom:"Zoom extents",pcMtxtFull:"Full screen",pcMtxtFullexit:"Exit full",pcFileTypeTips:"Invalid picture format",pcBrepNotEnd:"Something wrong with measurement，please try again",colorBlack:"Black",colorGrey:"Grey",colorBeige:"Beige",tagAudioTips1:"Speaking time is too short",tagDelConfirm:"Are you sure to delete the current comment?",tagSaveConfirm:"Do you want to save the current comments?",tagAudioTimeTip:"",tagAudioCreate:"Undo to create a voice",tagAudioPress:"Push to talk",tagExitSee:"Exit",tagExit:"Exit",tagExit2:"Exit",tagTips:"Please enter text",tagDelImg:"Delete picture",tagNoRoot:"Please allow access to your microphone",tagSaveConfirm2:"Do you want to save the current comments?",tagSeeBigImg:"See a larger image",tagSeeSmallImg:"Minimize",measureTimesErr:"Currently, there are too much measurement data, please delete them then try again",modelLoadErr:"model loaded error!",modelLimitErr:"Exceeded the maximum numer of users"};const Fr={zh:{...C},en:{...Ur}},Hr="zh",Wr=Object(Rr["createI18n"])({globalInjection:!0,legacy:!1,locale:Hr.split("-")[0]||"zh",messages:Fr});var Gr=Wr;o("93fc");let Kr=function(e){return new Promise(t=>{var o=new Image;o.onload=function(){1==this.complete&&(t(!0),o=null)},o.onerror=function(){t(!1),o=null},o.src=e})};const Jr={beforeMount(e,t,o,n){let i=t.value;i&&Kr(i).then(t=>{t&&e.setAttribute("src",i)})}};function Yr(e){}function Qr(e){var t=e.el.id;nd_viewCtrl&&nd_viewCtrl.checkEvent?nd_viewCtrl.checkEvent(t,(function(o){0!=o&&(e.args&&e.args.apply(),nd_viewCtrl&&nd_viewCtrl.checkEventAfter&&nd_viewCtrl.checkEventAfter(t))})):e.args&&e.args.apply()}const Zr=e=>{e.el.addEventListener("click",(function(t){t.stopPropagation(),Qr(e)}))},Xr={created(e,t){const o=t.value;Zr({el:e,args:o})}};var qr={install:Yr,clickDirective:Xr};const ec=function(e,t){const o=t.instance.$i18n.locale||"zh",n=t.value[0],i=t.value[1],r=tc(i);let c;c=r||"img/ico-"+o+"/"+n+".png",e&&("true"==e.getAttribute("selected")?(c=oc(c),e.classList.add("select-m")):e.classList.remove("select-m"),e.setAttribute("src",c),e.onerror=function(){})},tc=function(e){const t=f();if("show"!=t.type)return!1;const o=t.showbtns||[];if(o.length<1)return!1;let n="";function i(e,t){for(let o=0;o<t.length;o++){let r=t[o];if(e==r.id){n=r.imgUrl||"";break}r.list&&i(e,r.list)}}return i(e,o),n};const oc=function(e){let t=e;return t=t.replace(/.png/,"-c.png"),t=t.replace(/.PNG/,"-c.PNG"),t=t.replace(/.jpg/,"-c.jpg"),t=t.replace(/.JPG/,"-c.JPG"),t=t.replace(/.jpeg/,"-c.jpeg"),t=t.replace(/.JPEG/,"-c.JPEG"),t},nc=function(e,t){const o=t.instance.$i18n.locale||"zh";"en"==o&&e.setAttribute("data-tip",t.value)};function ic(e,t,o,n){const i=e.querySelector(".dialog_header"),r=e;i.style.cssText+=";cursor:move;";const c=function(){return window.document.currentStyle?(e,t)=>e.currentStyle[t]:(e,t)=>getComputedStyle(e,!1)[t]}();i.onmousedown=null,i.onmousedown=e=>{const o=e.clientX,n=e.clientY,i=document.getElementById("vueMain").offsetWidth,a=document.getElementById("vueMain").offsetHeight,s=r.offsetWidth,l=r.offsetHeight,d=r.offsetLeft,m=i-r.offsetLeft-s,u=r.offsetTop,h=a-r.offsetTop-l;let g=c(r,"left"),p=c(r,"top");g.includes("%")?(g=+document.getElementById("vueMain").offsetWidth*(+g.replace(/\%/g,"")/100),p=+document.getElementById("vueMain").offsetHeight*(+p.replace(/\%/g,"")/100)):(g=+g.replace(/\px/g,""),p=+p.replace(/\px/g,"")),document.onmousemove=null,document.onmousemove=function(e){let c=e.clientX-o,s=e.clientY-n;"openLimit"!=t.value&&(-c>d?c=-d:c>m&&(c=m),-s>u?s=-u:s>h&&(s=h));let l=(c+g)/i*100,v=(s+p)/a*100;c+g<0&&(l=0),s+p<0&&(v=0),"openLimit"==t.value?r.style.cssText+=`;left:${c+g}px;top:${s+p}px;bottom: auto;right: auto;`:r.style.cssText+=`;left:${l}%;top:${v}%;bottom: auto;right: auto;`},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}let rc;function cc(e){rc=e.config.globalProperties}function ac(e){const t=ce.state.modelStore.allTag,o=ce.state.modelStore.configs,n=ce.state.modelStore.nowConfigName;let i=t.filter((function(t){return e==t.state.uuid}));if(i=i[0]||{},i.modelName&&i.modelName!=n){for(var r=0;r<o.length;r++)if(o[r].Name==i.modelName){ce.commit("modelStore/setAnnotationTagId",e),ce.commit("modelStore/changeMultipleCfg",r);break}}else se.selectAnnotation(e)}window.nd_setViewBoxDir=function(e){se._viewer.setViewBoxDir(e)},window.nd_getBrepMemory=function(){return se._viewer.getBrepMemory()},window.nd_setCameraInfo=function(e){var t=JSON.parse(e);se._viewer.setCameraInfo(t,!0)},window.nd_getCameraInfo=function(){var e=se._viewer.getCameraInfo();return JSON.stringify(e)},window.nd_screenCapture=function(e,t){O.buryClick("screenshot");var o=0!=t;se._viewer.getScreenCapture2((function(t){e&&e(t)}),!1,o)},window.nd_screenshot=function(e){nd_screenCapture(e)},window.nd_screenBounding=function(e){se._viewer.getScreenCapturethumbnail((function(t){e&&e(t)}))},window.nd_addTag=function(){"meter"!=ce.state.menuStore.menuChoose&&"meterDistance"!=ce.state.menuStore.menuChoose2||rc.$eventBus.emit("closeMeasure"),rc.$msgBox.isShow&&(rc.$msgBox.isShow=!1),rc.$bottomBtn.chooseToTag(),ce.commit("menuStore/setShowOneMenu",!1)},window.nd_addTag=nd_addTag,window.nd_delTags=function(e){ce.commit("modelStore/delTagByuuid",e),"sync"==nd_viewCtrl.viewMode?(ce.commit("tagStore/setTagshow",!0),se._viewer.removeAllAnnotations(),setTimeout(()=>{Ie(ce.state.modelStore.nowTag,ce.state.modelStore.allTag),nd_viewCtrl.rtmSDK.isRtmOperate||nd_viewCtrl.rtmSDK.isRtmFreeOper||Ae.closeTagChange(ce.state.modelStore.allTag||[]),Ae.sendCenter(6),Ae.sendCenter(2)},100)):(se.removeAnnotation(e),Ie(ce.state.modelStore.nowTag,ce.state.modelStore.allTag))},window.nd_delTag=window.nd_delTags,window.nd_updateTagtext=function(e,t){const o=ce.state.modelStore.allTag;let n=o.filter((function(t){return e==t.state.uuid}));return!!(n&&n.length>0)&&(ce.commit("modelStore/updateTagText",{uuid:e,text:t}),rc.$tag.updateTagText(e,t),n[0])},window.nd_version=function(){localStorage.setItem("version",encodeURIComponent("DEV-2022-27 3D Viewer V5.2.x（PC Viewer样式优化、单位转换）"))},window.nd_getMeasuringScale=function(){var e=ce.state.modelStore.measureScale;return e},window.nd_selectTag=function(e,t,o){var n=rc.$tag;o?ce.commit("modelStore/setNeedOpenImg",!0):ce.commit("modelStore/setNeedOpenImg",!1),n.tcStep1&&n.saveEnable?(t&&t(!1),rc.$msgBox.showMsg(rc.$t("tagSaveConfirm2"),(function(){n.sureSave()}),(function(){ac(e)}))):ac(e)},window.nd_getShareInfo=function(){var e=-1,t=ce.state.modelStore.isModelCfg;t&&(e=ce.state.modelStore.nowConfig);var o=se._viewer.getCameraInfo(),n=ce.state.modelStore.measureScale,i=ce.state.modelStore.bgSetList,r=ce.state.modelStore.unit;return{camerainfo:o,configNum:e,scale:n,bgSetList:i,unitType:r}},window.nd_print=function(e,t){if(!e||!t)return"传参错误";Z(t,(function(){printSDK&&printSDK.init((function(t){e&&e(t)}),"inviewer")}))},window.nd_getPrintData=function(e,t,o,n,i,r){return"select"==i?se.getPrintData(e,t,o,n,i,r):"view"==i?se.getPrintData(e,t,o,n,i):se.getPrintData(e,t,o,n)},window.nd_stopPlayAudio=function(){var e=rc.$tag;e.tcCheckTI&&"checkaudio"==e.tcType&&e.exitChecktag()},window.nd_openPrintMode=function(e){var t=rc;function o(){ce.commit("setPrintMode",!0),ce.state.menuStore.structMenu&&(ce.commit("menuStore/setMenuChoose",""),ce.commit("menuStore/setStructMenu",!1)),ce.commit("menuStore/setShowManyConfig",!1),t.$eventBus.emit("closeCfg"),(t.$tag.tcCheckTI||"checkaudio"==t.$tag.tcType)&&t.$tag.exitChecktag(),t.$tag.tcStep0&&t.$tag.cancelSave(),"bgColor"==ce.state.menuStore.menuChoose&&ce.commit("menuStore/setMenuChoose",""),"unitChange"==ce.state.menuStore.menuChoose&&(ce.commit("menuStore/setMenuChoose",""),ce.commit("menuStore/setUnitMenu",!1)),"zoomwindow"==ce.state.menuStore.menuChoose&&(ce.commit("menuStore/setMenuChoose",""),se._viewer.setOperatorByID("OpPan")),"meter"!=ce.state.menuStore.menuChoose&&"meterDistance"!=ce.state.menuStore.menuChoose2||t.$eventBus.emit("closeMeasure"),se._viewer.setAnnotationsVisibility(0),se.clearSelection(),e&&e(!0)}t.$tag.tcStep1&&t.$tag.saveEnable?(e&&e(!1),t.$msgBox.showMsg("是否保存当前批注内容?",(function(){t.$tag.sureSave()}),(function(){ce.commit("setPrintMode",!0),t.$tag.cancelSave(),o()}))):t.$tag.tcStep1?(ce.commit("setPrintMode",!0),t.$tag.cancelSave(),o()):o()},window.nd_closePrintMode=function(){ce.commit("setPrintMode",!1),ce.commit("menuStore/setShowManyConfig",!0),ce.state.tagStore.tagShow&&se._viewer.setAnnotationsVisibility(1)},window.nd_getPrintDataCallback=function(e,t,o,n,i,r,c){"select"==r?se.getPrintDataCallback((function(t){e&&e(t)}),t,o,n,i,r,c):"view"==r?se.getPrintDataCallback((function(t){e&&e(t)}),t,o,n,i,r):se.getPrintDataCallback((function(t){e&&e(t)}),t,o,n,i)},window.nd_setBackGroundColor=function(e){var t=colorToNumber(e);se._viewer.setBackGroundColor(t);const o=ce.state.modelStore.bgSetList||[];if(o.length>0){for(let e=0;e<o.length;e++)o[e]="num:"+String(t);ce.commit("modelStore/setInitBgSetList",o),ce.commit("modelStore/setShareBg","num:"+String(t))}},window.nd_resize=function(){se._viewer.onWindowResize()},window.nd_render=function(){se._viewer.render()},window.nd_screenTagCap=function(e){Te(e)},window.nd_initAlltag=function(e){try{const t=Be(e);ce.commit("modelStore/setAllTag",e),ce.commit("modelStore/setNowTag",t),se._viewer.removeAllAnnotations(),Ae.closeTagChange(e||[]),Ie(t,e,!0)}catch(t){}},window.nd_rtmReceiveAllMsg=function(e){nd_viewCtrl.rtmSDK.rtmGetChannelMsg((function(t){Ae.receiveAllMsg(t,e,"fromWindow")}))},window.nd_rtmSendAllMsg=function(){Ae.sendAllMsg()},window.nd_rtmReceiveMsg=function(e){Ae.receiveCenter(e)},window.nd_rtmSetMettingMsg=function(e){e.hasOwnProperty("isRtmFreeOper")&&Ae.freeOperChange(e.isRtmFreeOper),e.hasOwnProperty("isRtmOperate")&&Ae.operateChange(e.isRtmOperate)};var sc={install:cc,nd_addTag:nd_addTag,nd_delTags:nd_delTags,nd_updateTagtext:nd_updateTagtext,nd_setBackGroundColor:nd_setBackGroundColor,nd_getShareInfo:nd_getShareInfo,nd_resize:nd_resize,nd_render:nd_render};const lc=Object(n["createApp"])(zr);lc.directive("real-img",Jr),lc.directive("click-track",qr.clickDirective),lc.directive("img-switch",ec),lc.directive("tooltip",nc),lc.directive("drag",ic),lc.config.globalProperties.$eventBus=new $r["a"],lc.use(zr),lc.use(sc);const dc=lc.use(ce).use(Gr).mount("#app");lc.use(qr);var mc=t["default"]=dc},5880:function(e,t){e.exports=Vuex},"58d1":function(e,t,o){"use strict";o("fe06")},"61bc":function(e,t,o){e.exports=o.p+"img/return-icon.1cb36f98.png"},"6dc1":function(e,t,o){"use strict";o("aa58")},7143:function(e,t,o){e.exports=o.p+"img/radio-check.818b2d54.png"},7144:function(e,t,o){},"74f1":function(e,t,o){"use strict";o("7144")},7863:function(e,t,o){e.exports=o.p+"img/close-icon.cb122c82.png"},"82fc":function(e,t,o){e.exports=o.p+"img/pen.16c2a6dd.png"},"876a":function(e,t,o){"use strict";o("94f3")},"88ae":function(e,t,o){},"8bbf":function(e,t){e.exports=Vue},"93fc":function(e,t){const o=32;function n(){const e=document.documentElement.clientWidth/2380;document.documentElement.style.fontSize=o*Math.min(e,2)+"px"}n(),window.addEventListener("resize",()=>{n()})},9495:function(e,t,o){},"94f3":function(e,t,o){},9718:function(e,t,o){e.exports=o.p+"img/color.ad185a94.png"},9957:function(e,t,o){},aa58:function(e,t,o){},ab28:function(e,t,o){},acd9:function(e,t,o){},b53e:function(e,t,o){"use strict";o("2a32")},b68c:function(e,t,o){},b709:function(e,t,o){},b7f6:function(e,t,o){"use strict";o("acd9")},b8c8:function(e,t,o){},bc2f:function(e,t,o){e.exports=o.p+"img/nomsg-en.310042a6.png"},bc8c:function(e,t,o){"use strict";o("eda0")},bfb3:function(e,t,o){"use strict";o("239b")},bfc2:function(e,t,o){},c6fe:function(e,t,o){},c7ac:function(e,t,o){e.exports=o.p+"img/warn.da864e81.png"},dd36:function(e,t,o){e.exports=o.p+"img/line.de196a65.png"},e1d4:function(e,t,o){"use strict";o("c6fe")},eda0:function(e,t,o){},eec7:function(e,t,o){e.exports=o.p+"img/close-menu.724f59a4.png"},fe06:function(e,t,o){}});