<div class="baseline-relation-object w-100p h-100p">
    <fam-view-table
        ref="famViewTable"
        :view-table-config="viewTableConfig"
        @action-click="actionClick"
    >
        <template
            slot="column:default:erd.cloud.core.vc.ItemRevision#name:content"
            slot-scope="{scope}"
        >
            <span>{{scope.row['erd.cloud.core.vc.ItemRevision#name']}}</span>
            <erd-tag
                size="mini"
                class="pr-normal"
                v-if="scope.row.isMainRef"
                type="danger"
                effect="plain"
                >主要对象</erd-tag
            >
        </template>
        <template
            slot="column:default:operation:content"
            slot-scope="{scope}"
        >
            <erd-button
                v-if="!scope.row.isMainRef"
                type="text"
                @click="onSetMain(scope.row)"
                >{{i18n.setMainObject}}</erd-button
            >
            <erd-button
                v-else
                type="text"
                @click="onCancelMain(scope.row)"
                >{{i18n.cancelMainObject}}</erd-button
            >
            <erd-button
                type="text"
                @click="removeBaseLineMainRef(scope.row)"
                >{{i18n.remove}}</erd-button
            >
        </template>
    </fam-view-table>

    <!-- 添加对象 -->
    <RelatedObject
        v-if="objectForm.visible"
        :visible.sync="objectForm.visible"
        :view-types-list="viewTypesList"
        @submit="selectAssociationDone"
    >
    </RelatedObject>

    <!-- 收集相关对象 -->
    <erd-ex-dialog
        size="large"
        :title="collectForm.title"
        :visible.sync="collectForm.visible"
        @close="collectForm.tableData = []"
    >
        <CollectObjects
            ref="collectObjectsRef"
            v-if="collectForm.visible"
            :table-data="collectForm.tableData"
            :class-name="collectForm.className"
        ></CollectObjects>
        <template #footer>
            <erd-button
                type="primary"
                @click="!collectForm.loading && collectObjectClick()"
                >{{ i18n['confirm'] }}</erd-button
            >
            <erd-button @click="popover({ field: 'collectForm' })">{{ i18n['cancel'] }}</erd-button>
        </template>
    </erd-ex-dialog>

    <!-- 是否替换 -->
    <VersionReplaceDialog
        ref="versionReplaceDialogRef"
        @confirm="handleReplaceSubmit"
        @cancel="handleReplaceBeforeClose"
        :before-close="handleReplaceBeforeClose"
    ></VersionReplaceDialog>
</div>
