<div
    class="w-100p"
    v-if="!readonly"
>
    <erd-contraction-panel
        v-if="isFolded"
        :unfold.sync="panelUnfold"
        :title="title"
    >
        <template v-slot:header-right>
            <div
                v-if="!readonly"
                v-show="isShow && panelUnfold"
                class="btn-group"
            >
                <FamActionButton
                    :is-operation="false"
                    :action-config="actionConfig"
                    :is-default-btn-type="true"
                    @click="actionClick"
                >
                </FamActionButton>
            </div>
        </template>
        <template v-slot:content>
            <!-- 内容 -->
            <div v-if="panelUnfold">
                <div
                    ref="header"
                    v-if="!readonly"
                    v-show="!isFolded"
                    class="mb-xl"
                >
                    <erd-input
                        class="align-middle mt-0"
                        style="width: 220px"
                        v-model="searchValue"
                        @input="search"
                        clearable
                        suffix-icon="erd-iconfont erd-icon-search"
                        :placeholder="i18n.pleaseEnter"
                    ></erd-input>
                    <div
                        class="flex btn-group text-right"
                        style="align-items: center"
                    >
                        <FamActionButton
                            :is-operation="false"
                            :action-config="actionConfig"
                            :is-default-btn-type="true"
                            @click="actionClick"
                        >
                        </FamActionButton>
                    </div>
                </div>
                <FamErdTable
                    ref="erdTable"
                    :column="columns"
                    :data="viewData"
                    :maxLine="10"
                    border
                    :show-overflow="true"
                    auto-resize
                    @checkbox-change="checkboxChange"
                    @checkbox-all="checkboxAll"
                >
                    <template #column:default:icon="{data}">
                        <FamIcon
                            :value="getIcon(data.row)"
                            class="text-16"
                        ></FamIcon>
                    </template>
                    <template #column:default:identifierNo="{data}">
                        <a
                            href="javascript:;"
                            @click="handleGoDetail(data.row)"
                            >{{data.row.identifierNo}}</a
                        >
                    </template>
                </FamErdTable>
            </div>
        </template>
    </erd-contraction-panel>
    <div v-else>
        <div
            ref="header"
            v-if="!readonly"
            v-show="!isFolded"
            class="mb-xl flex justify-between"
        >
            <erd-input
                class="align-middle mt-0"
                style="width: 220px"
                v-model="searchValue"
                @input="search"
                clearable
                suffix-icon="erd-iconfont erd-icon-search"
                :placeholder="i18n.pleaseEnter"
            ></erd-input>
            <div
                class="flex btn-group text-right"
                style="align-items: center"
            >
                <FamActionButton
                    :is-operation="false"
                    :action-config="actionConfig"
                    :is-default-btn-type="true"
                    @click="actionClick"
                >
                </FamActionButton>
            </div>
        </div>
        <FamErdTable
            ref="erdTable"
            :column="columns"
            :data="viewData"
            :maxLine="10"
            border
            :show-overflow="true"
            auto-resize
            @checkbox-change="checkboxChange"
            @checkbox-all="checkboxAll"
        >
            <template #column:default:icon="{data}">
                <FamIcon
                    :value="getIcon(data.row)"
                    class="text-16"
                ></FamIcon>
            </template>
            <template #column:default:identifierNo="{data}">
                <a
                    href="javascript:;"
                    @click="handleGoDetail(data.row)"
                    >{{data.row.identifierNo}}</a
                >
            </template>
        </FamErdTable>
    </div>

    <!-- 收集相关对象 -->
    <erd-ex-dialog
        size="large"
        :title="collectForm.title"
        :visible.sync="collectForm.visible"
        @close="collectForm.tableData = []"
    >
        <CollectObjects
            ref="collectObjectsRef"
            :class-name="getModuleClassName"
            :table-data="collectForm.tableData"
        ></CollectObjects>
        <template #footer>
            <erd-button
                type="primary"
                @click="collectObjectClick"
                >{{i18n.confirm}}</erd-button
            >
            <erd-button @click="collectObjectCancel">{{i18n.cancel}}</erd-button>
        </template>
    </erd-ex-dialog>
    <!-- 穿梭框 -->
    <RelatedObject
        v-if="showDialog"
        ref="assRef"
        :visible.sync="showDialog"
        @after-request="afterRequest"
        @submit="submit"
        :title="i18n.transferTitle"
        :is-unfixed-source="true"
        :show-overflow="true"
        :leftTitle="leftTitle"
        :left-table-columns="tableColumns"
        :view-types-list="viewTypes"
    >
    </RelatedObject>
</div>
